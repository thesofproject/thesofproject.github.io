<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="559px" preserveAspectRatio="none" style="width:524px;height:559px;" version="1.1" viewBox="0 0 524 559" width="524px" zoomAndPan="magnify"><defs><filter height="300%" id="f16wi8i8u8ytx3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[425eaa9ec97ac482e547595d94f7bd76]
entity sw_driver--><polygon fill="#FFFFFF" filter="url(#f16wi8i8u8ytx3)" points="103.5,18,113.5,8,382.5,8,382.5,63.2188,372.5,73.2188,103.5,73.2188,103.5,18" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="372.5" x2="381.5" y1="18" y2="9"/><line style="stroke: #000000; stroke-width: 1.5;" x1="103.5" x2="372.5" y1="18" y2="18"/><line style="stroke: #000000; stroke-width: 1.5;" x1="372.5" x2="372.5" y1="18" y2="73.2188"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="118.5" y="42.5332">SW Driver</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="239" x="118.5" y="60.1426">* DSP power control over IPC protocol</text><!--MD5=[1ab91d7279478d9ad45c70294f58e251]
entity fw--><polygon fill="#FFFFFF" filter="url(#f16wi8i8u8ytx3)" points="6,177,16,167,480,167,480,537.5781,470,547.5781,6,547.5781,6,177" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="470" x2="479" y1="177" y2="168"/><line style="stroke: #000000; stroke-width: 1.5;" x1="6" x2="470" y1="177" y2="177"/><line style="stroke: #000000; stroke-width: 1.5;" x1="470" x2="470" y1="177" y2="547.5781"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="21" y="201.5332">SOF Zephyr Library</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="25" y="219.1426"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="21" y="236.752">* Exposes interface of</text><text fill="#33335B" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="99" x="162" y="236.752">SOF with XTOS</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="265" y="236.752">for Host Power IPC handling</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="377" x="21" y="254.3613">* Executes requested sequence of Zephyr power operations</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="287" x="21" y="271.9707">* Waits and verifies power request completion</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="25" y="289.5801"/><line style="stroke: #000000; stroke-width: 1.0;" x1="6" x2="470" y1="292.6563" y2="292.6563"/><line style="stroke: #000000; stroke-width: 1.0;" x1="470" x2="480" y1="292.6563" y2="282.6563"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="27" y="311.1895">Zephyr Power Management</text><text fill="#33335B" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="271" x="27" y="328.7988">Generic RTOS Power Management service</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="31" y="346.4082"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="204" x="27" y="364.0176">* Manages System Power States</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="27" y="381.627">* Manages Power Policies</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="213" x="27" y="399.2363">* Manages Device Runtime Power</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="31" y="416.8457"/><line style="stroke: #000000; stroke-width: 1.0;" x1="6" x2="470" y1="423.9219" y2="423.9219"/><line style="stroke: #000000; stroke-width: 1.0;" x1="470" x2="480" y1="423.9219" y2="413.9219"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="27" y="442.4551">SoC HAL</text><text fill="#33335B" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="201" x="27" y="460.0645">Hardware specific power control</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="31" y="477.6738"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="422" x="27" y="495.2832">* Moves SoC and its resources to power state requested by Zephyr</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="332" x="27" y="512.8926">* Interacts directly with hardware and power registers</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="389" x="27" y="530.502">* Suppors different power states depending on the target SoC</text><!--MD5=[bc109495cfbce09751f42d24d712483d]
link sw_driver to fw--><path d="M243,73.15 C243,95.45 243,127.39 243,161.85 " fill="none" id="sw_driver-&gt;fw" style="stroke: #F05772; stroke-width: 1.0;"/><polygon fill="#F05772" points="243,166.95,247,157.95,243,161.95,239,157.95,243,166.95" style="stroke: #F05772; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="249.5" y="117.4951">«IPC»</text><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="288.5" y="117.4951">Set Dx</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="334.5" y="117.4951">- power state transition D0/D3</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="244" y="133.8467">«IPC»</text><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="283" y="133.8467">Set D0ix</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="340" y="133.8467">- power gating override (on/off)</text><!--MD5=[9553a1e4602b1010f034e245468c3e01]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam queue {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}

skinparam activity {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam activityDiamond {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam arrowColor	#f05772
skinparam maxMessageSize 400
skinparam BoxPadding 4
node sw_driver [
	<b>SW Driver</b>
	* DSP power control over IPC protocol
]

node fw [
	<b>SOF Zephyr Library</b>

	* Exposes interface of <i>SOF with XTOS</i> for Host Power IPC handling
	* Executes requested sequence of Zephyr power operations
	* Waits and verifies power request completion

	- - -
	<b>Zephyr Power Management</b>
	<i>Generic RTOS Power Management service</i>

	* Manages System Power States
	* Manages Power Policies
	* Manages Device Runtime Power

	- - -
	<b>SoC HAL</b>
	<i>Hardware specific power control</i>

	* Moves SoC and its resources to power state requested by Zephyr
	* Interacts directly with hardware and power registers
	* Suppors different power states depending on the target SoC
]

sw_driver -down-> fw : <<IPC>> <b>Set Dx</b> - power state transition D0/D3\n<<IPC>> <b>Set D0ix</b> - power gating override (on/off)

@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_302-b08
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>