<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="930px" preserveAspectRatio="none" style="width:775px;height:930px;" version="1.1" viewBox="0 0 775 930" width="775px" zoomAndPan="magnify"><defs><filter height="300%" id="fti7dm2az1wu0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="908.6563" style="stroke: #A1A1CA; stroke-width: 1.0;" width="64" x="86" y="4"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="104.5" y="17.4951">Host</text><rect fill="#DDDDDD" height="908.6563" style="stroke: #A1A1CA; stroke-width: 1.0;" width="147" x="260" y="4"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="305" y="17.4951">HD/A HW</text><rect fill="#FFFFFF" height="908.6563" style="stroke: #A1A1CA; stroke-width: 1.0;" width="355" x="409" y="4"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="573" y="17.4951">DSP</text><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="118" x2="118" y1="78.5703" y2="918.6563"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="297" x2="297" y1="78.5703" y2="918.6563"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="371" x2="371" y1="78.5703" y2="918.6563"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="435" x2="435" y1="78.5703" y2="918.6563"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="721" x2="721" y1="78.5703" y2="918.6563"/><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="49.2188" style="stroke: #33335B; stroke-width: 1.5;" width="52" x="90" y="24.3516"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="102" y="45.8848">Host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="97" y="63.4941">Driver</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="31.6094" style="stroke: #33335B; stroke-width: 1.5;" width="62" x="264" y="41.9609"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="271" y="63.4941">hda_sw</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="31.6094" style="stroke: #33335B; stroke-width: 1.5;" width="59" x="340" y="41.9609"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="347" y="63.4941">hda_fw</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="31.6094" style="stroke: #33335B; stroke-width: 1.5;" width="41" x="413" y="41.9609"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="420" y="63.4941">host</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="31.6094" style="stroke: #33335B; stroke-width: 1.5;" width="73" x="683" y="41.9609"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="690" y="63.4941">hda_dma</text><path d="M255,93.5703 L255,119.5703 L409,119.5703 L409,103.5703 L399,93.5703 L255,93.5703 " fill="#F6ED80" filter="url(#fti7dm2az1wu0)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M399,93.5703 L399,103.5703 L409,103.5703 L399,93.5703 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="261" y="112.0654">"DMA in RESET state"</text><polygon fill="#4A4A86" points="106,147.2734,116,151.2734,106,155.2734,110,151.2734" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="112" y1="151.2734" y2="151.2734"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="10" y="146.417">Create Stream</text><polygon fill="#4A4A86" points="423.5,177.625,433.5,181.625,423.5,185.625,427.5,181.625" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="118" x2="429.5" y1="181.625" y2="181.625"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="125" y="176.7686">new()</text><polygon fill="#4A4A86" points="709.5,207.9766,719.5,211.9766,709.5,215.9766,713.5,211.9766" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="435.5" x2="715.5" y1="211.9766" y2="211.9766"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="442.5" y="207.1201">dma_get(dmac_id)</text><polygon fill="#4A4A86" points="446.5,238.3281,436.5,242.3281,446.5,246.3281,442.5,242.3281" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="440.5" x2="720.5" y1="242.3281" y2="242.3281"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="452.5" y="237.4717">dmac</text><polygon fill="#4A4A86" points="129,252.3281,119,256.3281,129,260.3281,125,256.3281" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="434.5" y1="256.3281" y2="256.3281"/><polygon fill="#4A4A86" points="14,266.3281,4,270.3281,14,274.3281,10,270.3281" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="117" y1="270.3281" y2="270.3281"/><polygon fill="#4A4A86" points="106,296.6797,116,300.6797,106,304.6797,110,300.6797" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="112" y1="300.6797" y2="300.6797"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="10" y="295.8232">Stream Params</text><polygon fill="#4A4A86" points="285,327.0313,295,331.0313,285,335.0313,289,331.0313" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="118" x2="291" y1="331.0313" y2="331.0313"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="125" y="326.1748">setup DMA (format &amp; BDL)</text><polygon fill="#4A4A86" points="423.5,357.3828,433.5,361.3828,423.5,365.3828,427.5,361.3828" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="118" x2="429.5" y1="361.3828" y2="361.3828"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="125" y="356.5264">params()</text><polygon fill="#4A4A86" points="709.5,387.7344,719.5,391.7344,709.5,395.7344,713.5,391.7344" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="435.5" x2="715.5" y1="391.7344" y2="391.7344"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="442.5" y="386.8779">dma_channel_get(dmac, params.stream_tag)</text><polygon fill="#4A4A86" points="446.5,418.0859,436.5,422.0859,446.5,426.0859,442.5,422.0859" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="440.5" x2="720.5" y1="422.0859" y2="422.0859"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="452.5" y="417.2295">chan</text><polygon fill="#4A4A86" points="709.5,448.4375,719.5,452.4375,709.5,456.4375,713.5,452.4375" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="435.5" x2="715.5" y1="452.4375" y2="452.4375"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="442.5" y="447.5811">dma_set_config(dmac, chan, config)</text><polygon fill="#4A4A86" points="382.5,478.7891,372.5,482.7891,382.5,486.7891,378.5,482.7891" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="482.7891" y2="482.7891"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="388.5" y="477.9326">DGBBA, DGBS</text><polygon fill="#4A4A86" points="382.5,509.1406,372.5,513.1406,382.5,517.1406,378.5,513.1406" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="513.1406" y2="513.1406"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="388.5" y="508.2842">DGMBS := buffer size [host dma]</text><polygon fill="#4A4A86" points="382.5,539.4922,372.5,543.4922,382.5,547.4922,378.5,543.4922" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="543.4922" y2="543.4922"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="388.5" y="538.6357">GEN := 0</text><polygon fill="#4A4A86" points="382.5,569.8438,372.5,573.8438,382.5,577.8438,378.5,573.8438" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="573.8438" y2="573.8438"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="388.5" y="568.9873">SCS := 1 [bit_depth != 32]</text><polygon fill="#4A4A86" points="382.5,600.1953,372.5,604.1953,382.5,608.1953,378.5,604.1953" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="604.1953" y2="604.1953"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="388.5" y="599.3389">FWCB : = 1</text><polygon fill="#4A4A86" points="382.5,630.5469,372.5,634.5469,382.5,638.5469,378.5,634.5469" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="634.5469" y2="634.5469"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="388.5" y="629.6904">FIFORDY := 0</text><polygon fill="#4A4A86" points="446.5,644.5469,436.5,648.5469,446.5,652.5469,442.5,648.5469" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="440.5" x2="720.5" y1="648.5469" y2="648.5469"/><polygon fill="#4A4A86" points="129,658.5469,119,662.5469,129,666.5469,125,662.5469" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="434.5" y1="662.5469" y2="662.5469"/><polygon fill="#4A4A86" points="14,672.5469,4,676.5469,14,680.5469,10,676.5469" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="117" y1="676.5469" y2="676.5469"/><polygon fill="#4A4A86" points="106,702.8984,116,706.8984,106,710.8984,110,706.8984" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="112" y1="706.8984" y2="706.8984"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="10" y="702.042">RUN</text><polygon fill="#4A4A86" points="285,733.25,295,737.25,285,741.25,289,737.25" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="118" x2="291" y1="737.25" y2="737.25"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="125" y="732.3936">RUN := 1</text><polygon fill="#4A4A86" points="423.5,763.6016,433.5,767.6016,423.5,771.6016,427.5,767.6016" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="118" x2="429.5" y1="767.6016" y2="767.6016"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="125" y="762.7451">trigger(COMP_TRIGGER_START)</text><polygon fill="#4A4A86" points="709.5,793.9531,719.5,797.9531,709.5,801.9531,713.5,797.9531" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="435.5" x2="715.5" y1="797.9531" y2="797.9531"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="442.5" y="793.0967">dma_start()</text><polygon fill="#4A4A86" points="382.5,824.3047,372.5,828.3047,382.5,832.3047,378.5,828.3047" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="828.3047" y2="828.3047"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="388.5" y="823.4482">GEN := 1</text><polygon fill="#4A4A86" points="382.5,854.6563,372.5,858.6563,382.5,862.6563,378.5,858.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="376.5" x2="720.5" y1="858.6563" y2="858.6563"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="388.5" y="853.7998">FIFORDY := 1</text><polygon fill="#4A4A86" points="446.5,868.6563,436.5,872.6563,446.5,876.6563,442.5,872.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="440.5" x2="720.5" y1="872.6563" y2="872.6563"/><polygon fill="#4A4A86" points="129,882.6563,119,886.6563,129,890.6563,125,886.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="434.5" y1="886.6563" y2="886.6563"/><polygon fill="#4A4A86" points="14,896.6563,4,900.6563,14,904.6563,10,900.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="117" y1="900.6563" y2="900.6563"/><!--MD5=[55e581dddf0eca6b31c725c56360fa4e]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
box "Host" #ffffff
    participant "Host\nDriver" as drv
end box
box "HD/A HW"
	participant hda_sw
	participant hda_fw
end box
box "DSP" #ffffff
    participant host
    participant hda_dma
end box

note over hda_sw, hda_fw: "DMA in RESET state"

-> drv : Create Stream
    drv -> host : new()
        host -> hda_dma : dma_get(dmac_id)
            host <- - hda_dma : dmac

        drv <- - host
    <- - drv

-> drv : Stream Params
    drv -> hda_sw : setup DMA (format & BDL)

    drv -> host : params()
        host -> hda_dma : dma_channel_get(dmac, params.stream_tag)
            host <- - hda_dma : chan

        host -> hda_dma : dma_set_config(dmac, chan, config)
            hda_fw <- hda_dma : DGBBA, DGBS
            hda_fw <- hda_dma : DGMBS := buffer size [host dma]
            hda_fw <- hda_dma : GEN := 0
            hda_fw <- hda_dma : SCS := 1 [bit_depth != 32]
            hda_fw <- hda_dma : FWCB : = 1
            hda_fw <- hda_dma : FIFORDY := 0
            host <- - hda_dma

        drv <- - host
    <- - drv

-> drv : RUN
    drv -> hda_sw : RUN := 1

    drv -> host : trigger(COMP_TRIGGER_START)
        host -> hda_dma : dma_start()
            hda_fw <- hda_dma : GEN := 1
            hda_fw <- hda_dma : FIFORDY := 1
            host <- - hda_dma
        drv <- - host
    <- - drv

@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_302-b08
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>