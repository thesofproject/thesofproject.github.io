<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="898px" preserveAspectRatio="none" style="width:844px;height:898px;" version="1.1" viewBox="0 0 844 898" width="844px" zoomAndPan="magnify"><defs><filter height="300%" id="fti7dm2az1wu0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="876.7813" style="stroke: #A1A1CA; stroke-width: 1.0;" width="66" x="95" y="4"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="111" y="16.0669">Host</text><rect fill="#DDDDDD" height="876.7813" style="stroke: #A1A1CA; stroke-width: 1.0;" width="154" x="285" y="4"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="328.5" y="16.0669">HD/A HW</text><rect fill="#FFFFFF" height="876.7813" style="stroke: #A1A1CA; stroke-width: 1.0;" width="392" x="441" y="4"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="622" y="16.0669">DSP</text><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="128" x2="128" y1="74.7266" y2="886.7813"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="324" x2="324" y1="74.7266" y2="886.7813"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="402" x2="402" y1="74.7266" y2="886.7813"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="469" x2="469" y1="74.7266" y2="886.7813"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="788" x2="788" y1="74.7266" y2="886.7813"/><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="46.5938" style="stroke: #33335B; stroke-width: 1.5;" width="54" x="99" y="23.1328"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="110" y="43.1279">Host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="106" y="59.4248">Driver</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="66" x="289" y="39.4297"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="296" y="59.4248">hda_sw</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="62" x="369" y="39.4297"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="376" y="59.4248">hda_fw</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="45" x="445" y="39.4297"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="452" y="59.4248">host</text><rect fill="#FFFFFF" filter="url(#fti7dm2az1wu0)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="77" x="748" y="39.4297"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="755" y="59.4248">hda_dma</text><path d="M282,89.7266 L282,114.7266 L439,114.7266 L439,99.7266 L429,89.7266 L282,89.7266 " fill="#F6ED80" filter="url(#fti7dm2az1wu0)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M429,89.7266 L429,99.7266 L439,99.7266 L429,89.7266 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="288" y="106.7935">"DMA in RESET state"</text><polygon fill="#4A4A86" points="116,140.9922,126,144.9922,116,148.9922,120,144.9922" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="122" y1="144.9922" y2="144.9922"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="10" y="139.9263">Create Stream</text><polygon fill="#4A4A86" points="457.5,170.125,467.5,174.125,457.5,178.125,461.5,174.125" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="128" x2="463.5" y1="174.125" y2="174.125"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="135" y="169.0591">new()</text><polygon fill="#4A4A86" points="776.5,199.2578,786.5,203.2578,776.5,207.2578,780.5,203.2578" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="469.5" x2="782.5" y1="203.2578" y2="203.2578"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="476.5" y="198.1919">dma_get(dmac_id)</text><polygon fill="#4A4A86" points="480.5,228.3906,470.5,232.3906,480.5,236.3906,476.5,232.3906" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="474.5" x2="787.5" y1="232.3906" y2="232.3906"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="486.5" y="227.3247">dmac</text><polygon fill="#4A4A86" points="139,242.3906,129,246.3906,139,250.3906,135,246.3906" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="133" x2="468.5" y1="246.3906" y2="246.3906"/><polygon fill="#4A4A86" points="14,256.3906,4,260.3906,14,264.3906,10,260.3906" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="127" y1="260.3906" y2="260.3906"/><polygon fill="#4A4A86" points="116,285.5234,126,289.5234,116,293.5234,120,289.5234" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="122" y1="289.5234" y2="289.5234"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="10" y="284.4575">Stream Params</text><polygon fill="#4A4A86" points="312,314.6563,322,318.6563,312,322.6563,316,318.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="128" x2="318" y1="318.6563" y2="318.6563"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="135" y="313.5903">setup DMA (format &amp; BDL)</text><polygon fill="#4A4A86" points="457.5,343.7891,467.5,347.7891,457.5,351.7891,461.5,347.7891" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="128" x2="463.5" y1="347.7891" y2="347.7891"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="135" y="342.7231">params()</text><polygon fill="#4A4A86" points="776.5,372.9219,786.5,376.9219,776.5,380.9219,780.5,376.9219" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="469.5" x2="782.5" y1="376.9219" y2="376.9219"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="476.5" y="371.856">dma_channel_get(dmac, params.stream_tag)</text><polygon fill="#4A4A86" points="480.5,402.0547,470.5,406.0547,480.5,410.0547,476.5,406.0547" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="474.5" x2="787.5" y1="406.0547" y2="406.0547"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="486.5" y="400.9888">chan</text><polygon fill="#4A4A86" points="776.5,431.1875,786.5,435.1875,776.5,439.1875,780.5,435.1875" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="469.5" x2="782.5" y1="435.1875" y2="435.1875"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="476.5" y="430.1216">dma_set_config(dmac, chan, config)</text><polygon fill="#4A4A86" points="413,460.3203,403,464.3203,413,468.3203,409,464.3203" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="464.3203" y2="464.3203"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="419" y="459.2544">DGBBA, DGBS</text><polygon fill="#4A4A86" points="413,489.4531,403,493.4531,413,497.4531,409,493.4531" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="493.4531" y2="493.4531"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="419" y="488.3872">DGMBS := buffer size [host dma]</text><polygon fill="#4A4A86" points="413,518.5859,403,522.5859,413,526.5859,409,522.5859" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="522.5859" y2="522.5859"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="419" y="517.52">GEN := 0</text><polygon fill="#4A4A86" points="413,547.7188,403,551.7188,413,555.7188,409,551.7188" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="551.7188" y2="551.7188"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="419" y="546.6528">SCS := 1 [bit_depth != 32]</text><polygon fill="#4A4A86" points="413,576.8516,403,580.8516,413,584.8516,409,580.8516" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="580.8516" y2="580.8516"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="419" y="575.7856">FWCB : = 1</text><polygon fill="#4A4A86" points="413,605.9844,403,609.9844,413,613.9844,409,609.9844" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="609.9844" y2="609.9844"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="419" y="604.9185">FIFORDY := 0</text><polygon fill="#4A4A86" points="480.5,619.9844,470.5,623.9844,480.5,627.9844,476.5,623.9844" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="474.5" x2="787.5" y1="623.9844" y2="623.9844"/><polygon fill="#4A4A86" points="139,633.9844,129,637.9844,139,641.9844,135,637.9844" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="133" x2="468.5" y1="637.9844" y2="637.9844"/><polygon fill="#4A4A86" points="14,647.9844,4,651.9844,14,655.9844,10,651.9844" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="127" y1="651.9844" y2="651.9844"/><polygon fill="#4A4A86" points="116,677.1172,126,681.1172,116,685.1172,120,681.1172" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="122" y1="681.1172" y2="681.1172"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="10" y="676.0513">RUN</text><polygon fill="#4A4A86" points="312,706.25,322,710.25,312,714.25,316,710.25" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="128" x2="318" y1="710.25" y2="710.25"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="135" y="705.1841">RUN := 1</text><polygon fill="#4A4A86" points="457.5,735.3828,467.5,739.3828,457.5,743.3828,461.5,739.3828" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="128" x2="463.5" y1="739.3828" y2="739.3828"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="135" y="734.3169">trigger(COMP_TRIGGER_START)</text><polygon fill="#4A4A86" points="776.5,764.5156,786.5,768.5156,776.5,772.5156,780.5,768.5156" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="469.5" x2="782.5" y1="768.5156" y2="768.5156"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="476.5" y="763.4497">dma_start()</text><polygon fill="#4A4A86" points="413,793.6484,403,797.6484,413,801.6484,409,797.6484" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="797.6484" y2="797.6484"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="419" y="792.5825">GEN := 1</text><polygon fill="#4A4A86" points="413,822.7813,403,826.7813,413,830.7813,409,826.7813" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="407" x2="787.5" y1="826.7813" y2="826.7813"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="419" y="821.7153">FIFORDY := 1</text><polygon fill="#4A4A86" points="480.5,836.7813,470.5,840.7813,480.5,844.7813,476.5,840.7813" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="474.5" x2="787.5" y1="840.7813" y2="840.7813"/><polygon fill="#4A4A86" points="139,850.7813,129,854.7813,139,858.7813,135,854.7813" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="133" x2="468.5" y1="854.7813" y2="854.7813"/><polygon fill="#4A4A86" points="14,864.7813,4,868.7813,14,872.7813,10,868.7813" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="127" y1="868.7813" y2="868.7813"/><!--MD5=[c56393728ef2ea71877c9c8e45c24c62]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
box "Host" #ffffff
    participant "Host\nDriver" as drv
end box
box "HD/A HW"
	participant hda_sw
	participant hda_fw
end box
box "DSP" #ffffff
    participant host
    participant hda_dma
end box

note over hda_sw, hda_fw: "DMA in RESET state"

-> drv : Create Stream
    drv -> host : new()
        host -> hda_dma : dma_get(dmac_id)
            host <- - hda_dma : dmac

        drv <- - host
    <- - drv

-> drv : Stream Params
    drv -> hda_sw : setup DMA (format & BDL)

    drv -> host : params()
        host -> hda_dma : dma_channel_get(dmac, params.stream_tag)
            host <- - hda_dma : chan

        host -> hda_dma : dma_set_config(dmac, chan, config)
            hda_fw <- hda_dma : DGBBA, DGBS
            hda_fw <- hda_dma : DGMBS := buffer size [host dma]
            hda_fw <- hda_dma : GEN := 0
            hda_fw <- hda_dma : SCS := 1 [bit_depth != 32]
            hda_fw <- hda_dma : FWCB : = 1
            hda_fw <- hda_dma : FIFORDY := 0
            host <- - hda_dma

        drv <- - host
    <- - drv

-> drv : RUN
    drv -> hda_sw : RUN := 1

    drv -> host : trigger(COMP_TRIGGER_START)
        host -> hda_dma : dma_start()
            hda_fw <- hda_dma : GEN := 1
            hda_fw <- hda_dma : FIFORDY := 1
            host <- - hda_dma
        drv <- - host
    <- - drv

@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>