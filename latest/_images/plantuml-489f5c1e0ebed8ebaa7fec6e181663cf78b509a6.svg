<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="499px" preserveAspectRatio="none" style="width:784px;height:499px;" version="1.1" viewBox="0 0 784 499" width="784px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lmeo82oajdae" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="56.1328" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="46" y="384.1953"/><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="62.1328" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="334" y="138.7266"/><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="198.6641" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="334" y="270.7969"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="51" x2="51" y1="102.5938" y2="208.8594"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="51" x2="51" y1="208.8594" y2="249.6641"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="51" x2="51" y1="249.6641" y2="487.4609"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="338.5" x2="338.5" y1="102.5938" y2="208.8594"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="338.5" x2="338.5" y1="208.8594" y2="249.6641"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="338.5" x2="338.5" y1="249.6641" y2="487.4609"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="725.5" x2="725.5" y1="102.5938" y2="208.8594"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="725.5" x2="725.5" y1="208.8594" y2="249.6641"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="725.5" x2="725.5" y1="249.6641" y2="487.4609"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="38" y="82.9951">dai</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="8" y="99.292">component</text><ellipse cx="51" cy="13" fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" rx="8" ry="8" style="stroke: #33335B; stroke-width: 2.0;"/><path d="M51,21 L51,48 M38,29 L64,29 M51,48 L38,63 M51,48 L64,63 " fill="none" filter="url(#f1lmeo82oajdae)" style="stroke: #33335B; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="77" x="298.5" y="67.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="305.5" y="87.292">hda_dma</text><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="99" x="674.5" y="67.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="681.5" y="87.292">work_queue</text><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="56.1328" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="46" y="384.1953"/><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="62.1328" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="334" y="138.7266"/><rect fill="#FFFFFF" filter="url(#f1lmeo82oajdae)" height="198.6641" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="334" y="270.7969"/><polygon fill="#4A4A86" points="322,134.7266,332,138.7266,322,142.7266,326,138.7266" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="51" x2="328" y1="138.7266" y2="138.7266"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="58" y="133.6606">dma_start()</text><path d="M349,117.5938 L349,142.5938 L544,142.5938 L544,127.5938 L534,117.5938 L349,117.5938 " fill="#F6ED80" filter="url(#f1lmeo82oajdae)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M534,117.5938 L534,127.5938 L544,127.5938 L534,117.5938 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="355" y="134.6606">GEN := 1 -&gt; transfer starts</text><polygon fill="#4A4A86" points="714,168.8594,724,172.8594,714,176.8594,718,172.8594" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="344" x2="720" y1="172.8594" y2="172.8594"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="358" x="351" y="167.7935">work_schedule_default(&amp;hda_work, HDA_LINK_1MS_US)</text><polygon fill="#4A4A86" points="355,182.8594,345,186.8594,355,190.8594,351,186.8594" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="349" x2="725" y1="186.8594" y2="186.8594"/><polygon fill="#4A4A86" points="62,196.8594,52,200.8594,62,204.8594,58,200.8594" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56" x2="338" y1="200.8594" y2="200.8594"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="349.5" y="233.0698">1 ms elapsed</text><polygon fill="#4A4A86" points="355,266.7969,345,270.7969,355,274.7969,351,270.7969" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="349" x2="725" y1="270.7969" y2="270.7969"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="361" y="265.731">hda_work-&gt;cb()</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="344" x2="386" y1="299.9297" y2="299.9297"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="386" x2="386" y1="299.9297" y2="312.9297"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="345" x2="386" y1="312.9297" y2="312.9297"/><polygon fill="#4A4A86" points="355,308.9297,345,312.9297,355,316.9297,351,312.9297" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="351" y="294.8638">update FPI by 'bytes'</text><path d="M494,285.2969 L494,310.2969 L760,310.2969 L760,295.2969 L750,285.2969 L494,285.2969 " fill="#F6ED80" filter="url(#f1lmeo82oajdae)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M750,285.2969 L750,295.2969 L760,295.2969 L750,285.2969 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="500" y="302.3638">'commit' is always true in this scenario</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="344" x2="386" y1="342.0625" y2="342.0625"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="386" x2="386" y1="342.0625" y2="355.0625"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="345" x2="386" y1="355.0625" y2="355.0625"/><polygon fill="#4A4A86" points="355,351.0625,345,355.0625,355,359.0625,351,355.0625" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="351" y="336.9966">wait for next period to be available (w/ short t/o)</text><polygon fill="#4A4A86" points="67,380.1953,57,384.1953,67,388.1953,63,384.1953" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="61" x2="333" y1="384.1953" y2="384.1953"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="73" y="379.1294">callback()</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="56" x2="98" y1="413.3281" y2="413.3281"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="98" x2="98" y1="413.3281" y2="426.3281"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="57" x2="98" y1="426.3281" y2="426.3281"/><polygon fill="#4A4A86" points="67,422.3281,57,426.3281,67,430.3281,63,426.3281" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="63" y="408.2622">comp_update_buffer_produce/consume()</text><polygon fill="#4A4A86" points="322,436.3281,332,440.3281,322,444.3281,326,440.3281" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="51" x2="328" y1="440.3281" y2="440.3281"/><polygon fill="#4A4A86" points="714,465.4609,724,469.4609,714,473.4609,718,469.4609" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="339" x2="720" y1="469.4609" y2="469.4609"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="346" y="464.395">1MS_TIMEOUT (to re-arm the timer)</text><!--MD5=[0c7e46512ef51bf5c3f628ef67c2492b]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
actor client as "dai\ncomponent"
participant hda_dma
participant work_queue

client -> hda_dma : dma_start()
	activate hda_dma
	note right: GEN := 1 -> transfer starts

	hda_dma -> work_queue : work_schedule_default(&hda_work, HDA_LINK_1MS_US)
	hda_dma <- - work_queue
client <- - hda_dma
deactivate hda_dma

... 1 ms elapsed ...

work_queue -> hda_dma : hda_work->cb()
	activate hda_dma

   hda_dma -> hda_dma : update FPI by 'bytes'
   note right: 'commit' is always true in this scenario

	hda_dma -> hda_dma : wait for next period to be available (w/ short t/o)

	hda_dma -> client : callback()
		activate client
		client -> client : comp_update_buffer_produce/consume()
	hda_dma <- - client
	deactivate client

work_queue <- - hda_dma : 1MS_TIMEOUT (to re-arm the timer)
deactivate hda_dma

@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>