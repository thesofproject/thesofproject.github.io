<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1451px" preserveAspectRatio="none" style="width:936px;height:1451px;" version="1.1" viewBox="0 0 936 1451" width="936px" zoomAndPan="magnify"><defs><filter height="300%" id="fpu2klcejphzp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="352" cy="18" fill="#000000" filter="url(#fpu2klcejphzp)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="206" x="249" y="165"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="249" x2="455" y1="191.2969" y2="191.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="300" y="182.9951">KPB_DISABLED</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="254" y="207.4355">Starting state of KPB -</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="186" x="254" y="221.4043">No action has been taken yet</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="264" x="220" y="321"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="220" x2="484" y1="347.2969" y2="347.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="301" y="338.9951">KPB_CREATED</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="244" x="225" y="363.4355">New KPB component has been created</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="263" x="220.5" y="463"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="220.5" x2="483.5" y1="489.2969" y2="489.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="294.5" y="480.9951">KPB_PREPARING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="243" x="225.5" y="505.4355">Prepare Key Phrase Buffer component.</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="190" x="105" y="605"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="105" x2="295" y1="631.2969" y2="631.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="141.5" y="622.9951">KPB_STATE_RUN</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="170" x="110" y="647.4355">KPB is prepared and ready.</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="206" x="225" y="840"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="225" x2="431" y1="866.2969" y2="866.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="186" x="235" y="857.9951">KPB_STATE_INIT_DRAINING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="230" y="882.4355">KPB received detection event</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="217" x="211.5" y="1123"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="211.5" x2="428.5" y1="1149.2969" y2="1149.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="237" y="1140.9951">KPB_STATE_BUFFERING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="193" x="216.5" y="1165.4355">Buffer incoming samples in the</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="216.5" y="1179.4043">internal history buffer</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="255" x="399.5" y="967"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="399.5" x2="654.5" y1="993.2969" y2="993.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="450" y="984.9951">KPB_STATE_DRAINING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="231" x="404.5" y="1009.4355">KPB is draining internal history buffer</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="127" x="404.5" y="1023.4043">to the client's buffer</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="239" x="415.5" y="1279"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="415.5" x2="654.5" y1="1305.2969" y2="1305.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="452" y="1296.9951">KPB_STATE_RESETTING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="219" x="420.5" y="1321.4355">KPB is preparing itself for the reset</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="192" x="606" y="1123"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="606" x2="798" y1="1149.2969" y2="1149.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="172" x="616" y="1140.9951">KPB_STATE_HOST_COPY</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="148" x="611" y="1165.4355">KPB is copying real time</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="161" x="611" y="1179.4043">stream into client's buffer</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="227" x="579.5" y="1390"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="579.5" x2="806.5" y1="1416.2969" y2="1416.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="207" x="589.5" y="1407.9951">KPB_STATE_RESET_FINISHING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="196" x="584.5" y="1432.4355">KPB is finishing reset sequence</text><!--MD5=[a96ad61178f7b2cabd3e386b6819c08d]
link *start to KPB_DISABLED--><path d="M352,28.02 C352,51.87 352,117.61 352,159.43 " fill="none" id="*start-&gt;KPB_DISABLED" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="352,164.66,356,155.66,352,159.66,348,155.66,352,164.66" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="391" y="71.0669">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="402.5" y="86.1997">or</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="379.5" y="101.3325">[IPC] free</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="377.5" y="116.4653">message</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="353" y="131.5981">from either  state</text><!--MD5=[044e16ce5a5ff76d7deff6458927d5e4]
link KPB_DISABLED to KPB_CREATED--><path d="M352,229.17 C352,254.67 352,290.47 352,315.49 " fill="none" id="KPB_DISABLED-&gt;KPB_CREATED" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="352,320.66,356,311.66,352,315.66,348,311.66,352,320.66" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="387" y="272.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="353" y="287.1997">new component</text><!--MD5=[b834d8c16a5a27e806c00976e4b09383]
link KPB_DISABLED to KPB_DISABLED--><path d="M455.21,183 C475.54,184.6 490,189.27 490,197 C490,204.07 477.92,208.57 460.32,210.52 " fill="none" id="KPB_DISABLED-&gt;KPB_DISABLED" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="455.21,211,464.5474,214.1325,460.1877,210.528,463.7922,206.1682,455.21,211" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="496" y="194.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="496.5" y="209.1997">reset</text><!--MD5=[52af3ccfc34184d00955491461cb3f4c]
link KPB_CREATED to KPB_PREPARING--><path d="M352,371.07 C352,395.01 352,431.78 352,457.47 " fill="none" id="KPB_CREATED-&gt;KPB_PREPARING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="352,462.78,356,453.78,352,457.78,348,453.78,352,462.78" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="376.5" y="414.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="353" y="429.1997">pcm params</text><!--MD5=[3b752fd7ec54ca6937fb956cb5f07361]
link KPB_CREATED to KPB_CREATED--><path d="M484.3,333.97 C504.93,335.77 519,339.78 519,346 C519,351.69 507.25,355.52 489.47,357.52 " fill="none" id="KPB_CREATED-&gt;KPB_CREATED" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="484.3,358.03,493.6542,361.112,489.275,357.5311,492.8559,353.1519,484.3,358.03" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="525" y="343.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="525.5" y="358.1997">reset</text><!--MD5=[da49dfad7d01193c3fc3fbbf8319390b]
link KPB_PREPARING to KPB_STATE_RUN--><path d="M261.45,513.06 C246.25,520.55 231.9,530.31 221,543 C207.54,558.67 202.43,581.58 200.6,599.82 " fill="none" id="KPB_PREPARING-&gt;KPB_STATE_RUN" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="200.17,604.83,204.9261,596.2056,200.5982,599.8484,196.9555,595.5205,200.17,604.83" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="222" y="563.5669">Success</text><!--MD5=[42183d866f21e1e4c85eae516064ca23]
link KPB_STATE_RUN to KPB_PREPARING--><path d="M240.28,604.98 C253.52,596.27 267.93,585.88 280,575 C299.2,557.69 317.85,535.21 331.35,517.57 " fill="none" id="KPB_STATE_RUN-&gt;KPB_PREPARING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="334.67,513.2,326.0318,517.931,331.6381,517.1758,332.3932,522.7821,334.67,513.2" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="311" y="556.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="311.5" y="571.1997">reset</text><!--MD5=[b1723bc524c5751ca1c60041e9b9ac33]
link KPB_PREPARING to KPB_PREPARING--><path d="M483.56,481.97 C504.32,482.86 518.5,484.87 518.5,488 C518.5,490.86 506.65,492.78 488.76,493.77 " fill="none" id="KPB_PREPARING-&gt;KPB_PREPARING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="483.56,494.03,492.744,497.5874,488.5541,493.7867,492.3547,489.5969,483.56,494.03" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="524.5" y="492.5669">Failure</text><!--MD5=[b1723bc524c5751ca1c60041e9b9ac33]
link KPB_PREPARING to KPB_PREPARING--><path d="M483.59,474.88 C532.04,474.64 572.5,479.01 572.5,488 C572.5,496.67 534.84,501.05 488.67,501.12 " fill="none" id="KPB_PREPARING-&gt;KPB_PREPARING-1" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="483.59,501.12,492.5785,505.1457,488.59,501.1343,492.6014,497.1457,483.59,501.12" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="578.5" y="485.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="579" y="500.1997">reset</text><!--MD5=[43e61fe3fa960cff5339b212e4ea77e2]
link KPB_STATE_RUN to KPB_STATE_INIT_DRAINING--><path d="M199.52,655.26 C199.96,686.07 204.32,739.92 227,779 C240.53,802.32 262.95,822.15 283.24,836.78 " fill="none" id="KPB_STATE_RUN-&gt;KPB_STATE_INIT_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="287.53,839.83,282.5003,831.3623,283.4507,836.9387,277.8743,837.8891,287.53,839.83" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="265.5" y="760.0669">[EVENT]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="228" y="775.1997">key phrase detected</text><!--MD5=[1ed0152a32d0d54fbde3ed23e7d2bdd1]
link KPB_STATE_RUN to KPB_STATE_BUFFERING--><path d="M170.7,655.32 C145.1,679.46 112,718.98 112,762 C112,762 112,762 112,1000 C112,1058.01 164.9,1096.67 217.34,1120.75 " fill="none" id="KPB_STATE_RUN-&gt;KPB_STATE_BUFFERING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="222.09,1122.9,215.5328,1115.5513,217.5328,1120.8428,212.2413,1122.8429,222.09,1122.9" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="123" y="862.0669">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="113" y="877.1997">buffering</text><!--MD5=[1d54e21577cd2257cfdae3717ae928f9]
link KPB_STATE_BUFFERING to KPB_STATE_RUN--><path d="M211.5,1144.88 C120.74,1130.6 6,1093.96 6,1000 C6,762 6,762 6,762 C6,709.44 55.51,676.55 104.51,656.87 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_RUN" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="109.25,655.01,99.4096,654.6021,104.6008,656.8497,102.3532,662.0409,109.25,655.01" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="7" y="869.5669">Done</text><!--MD5=[3d191e6f8f90b05a668f23906de587dc]
link KPB_STATE_BUFFERING to KPB_STATE_INIT_DRAINING--><path d="M320.86,1122.94 C322.42,1066.93 325.67,949.73 327.19,895.14 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_INIT_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="327.33,890.06,323.0746,898.9421,327.1872,895.058,331.0713,899.1706,327.33,890.06" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="327" y="1003.5669">Done</text><!--MD5=[6d387181e1f1c9221add11212d4f3645]
link KPB_STATE_INIT_DRAINING to KPB_STATE_BUFFERING--><path d="M304.79,890.24 C288.17,909.39 267.17,937.68 258,967 C241.47,1019.86 270.66,1080.66 294.34,1118.21 " fill="none" id="KPB_STATE_INIT_DRAINING-&gt;KPB_STATE_BUFFERING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="297.19,1122.67,295.7029,1112.9341,294.4927,1118.4599,288.9668,1117.2497,297.19,1122.67" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="269" y="996.0669">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="259" y="1011.1997">buffering</text><!--MD5=[beb4316903d21c80264370acaefdc004]
link KPB_STATE_BUFFERING to KPB_STATE_DRAINING--><path d="M332.16,1122.8 C341.33,1102.82 355.64,1077.61 375,1061 C387.71,1050.09 402.62,1040.97 418.04,1033.4 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="422.84,1031.1,412.9949,1031.3713,418.3286,1033.2558,416.4441,1038.5895,422.84,1031.1" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="376" y="1081.5669">Done</text><!--MD5=[4f12acaa4d93a796508a9e19d0b02b6e]
link KPB_STATE_DRAINING to KPB_STATE_BUFFERING--><path d="M487.25,1031.29 C475.48,1040.72 462.63,1051.17 451,1061 C434.65,1074.82 432.06,1080.07 415,1093 C402.79,1102.26 389.18,1111.55 376.17,1119.99 " fill="none" id="KPB_STATE_DRAINING-&gt;KPB_STATE_BUFFERING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="371.78,1122.82,381.51,1121.2945,375.9794,1120.1061,377.1678,1114.5755,371.78,1122.82" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="462" y="1074.0669">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="452" y="1089.1997">buffering</text><!--MD5=[f1324a9450b1f6c410abd131b77de762]
link KPB_STATE_BUFFERING to KPB_STATE_RESETTING--><path d="M365.6,1187.17 C404.09,1213.5 458.65,1250.8 495.36,1275.9 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_RESETTING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="499.75,1278.9,494.5862,1270.5134,495.6252,1276.074,490.0646,1277.1131,499.75,1278.9" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="455" y="1230.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="455.5" y="1245.1997">reset</text><!--MD5=[4b438634278f58e15749aa816f5b0dd3]
link KPB_STATE_INIT_DRAINING to KPB_PREPARING--><path d="M341.27,839.92 C349.63,823.35 359.63,800.52 364,779 C383,685.42 367.3,571.49 357.86,518.6 " fill="none" id="KPB_STATE_INIT_DRAINING-&gt;KPB_PREPARING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="356.91,513.37,354.5698,522.9368,357.7969,518.2907,362.4429,521.5178,356.91,513.37" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="374" y="698.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="374.5" y="713.1997">reset</text><!--MD5=[8890fde5015e216095d91bf0e7f33a49]
link KPB_STATE_INIT_DRAINING to KPB_STATE_DRAINING--><path d="M364.5,890.21 C395.77,910.95 441.14,941.05 476,964.17 " fill="none" id="KPB_STATE_INIT_DRAINING-&gt;KPB_STATE_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="480.19,966.95,474.8874,958.6504,476.0188,964.193,470.4762,965.3244,480.19,966.95" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="435" y="933.0669">Draining task starts</text><!--MD5=[3dd8c2db77a16219417454f287f13692]
link KPB_STATE_DRAINING to KPB_STATE_HOST_COPY--><path d="M562.41,1031.16 C591.47,1056.73 632.58,1092.91 662.66,1119.38 " fill="none" id="KPB_STATE_DRAINING-&gt;KPB_STATE_HOST_COPY" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="666.64,1122.88,662.5346,1113.9276,662.8896,1119.5733,657.2439,1119.9283,666.64,1122.88" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="631" y="1081.5669">Draining done</text><!--MD5=[38744a42fe084230deab8a275c68be48]
link KPB_STATE_DRAINING to KPB_STATE_RESETTING--><path d="M527.82,1031 C529.37,1089.71 532.71,1216.37 534.23,1273.72 " fill="none" id="KPB_STATE_DRAINING-&gt;KPB_STATE_RESETTING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="534.36,1278.72,538.1013,1269.6094,534.2172,1273.722,530.1046,1269.8379,534.36,1278.72" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="532" y="1152.0669">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="532.5" y="1167.1997">reset</text><!--MD5=[86f8ade4edda463563b246265fa6922a]
link KPB_STATE_RESETTING to KPB_STATE_RESET_FINISHING--><path d="M570.07,1329.19 C594.82,1346.27 628,1369.16 653.66,1386.86 " fill="none" id="KPB_STATE_RESETTING-&gt;KPB_STATE_RESET_FINISHING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="658.03,1389.88,652.8995,1381.473,653.9165,1387.0377,648.3518,1388.0546,658.03,1389.88" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[cb0076cfc3bf4c60d180f90ff9ff4ba5]
link KPB_STATE_RESET_FINISHING to KPB_PREPARING--><path d="M775.7,1389.91 C813.93,1373.19 851,1346.32 851,1305 C851,629 851,629 851,629 C851,553.53 636.71,516.85 488.99,500.53 " fill="none" id="KPB_STATE_RESET_FINISHING-&gt;KPB_PREPARING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="483.76,499.96,492.2726,504.9133,488.7305,500.5028,493.141,496.9606,483.76,499.96" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="852" y="933.0669">Reset done</text><!--MD5=[145cd26846ebdf841ae5937ce7eb3c1d]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
[*] - -> KPB_DISABLED:  Start \nor\n [IPC] free \nmessage \nfrom either  state
KPB_DISABLED: Starting state of KPB - \nNo action has been taken yet
KPB_DISABLED- -> KPB_CREATED: [IPC] \nnew component
KPB_DISABLED-[#0000FF]-> KPB_DISABLED: [IPC] \nreset

KPB_CREATED : New KPB component has been created
KPB_CREATED - -> KPB_PREPARING: [IPC] \npcm params
KPB_CREATED -[#0000FF]-> KPB_CREATED : [IPC] \nreset

KPB_PREPARING: Prepare Key Phrase Buffer component.
KPB_PREPARING-> KPB_STATE_RUN: Success
KPB_PREPARING-> KPB_PREPARING: Failure
KPB_PREPARING-[#0000FF]-> KPB_PREPARING: [IPC] \nreset

KPB_STATE_RUN: KPB is prepared and ready.
KPB_STATE_RUN-[#0000FF]-> KPB_PREPARING: [IPC] \nreset
KPB_STATE_RUN- - -> KPB_STATE_INIT_DRAINING: [EVENT] \nkey phrase detected
KPB_STATE_RUN-> KPB_STATE_BUFFERING: Start \nbuffering

KPB_STATE_BUFFERING: Buffer incoming samples in the \ninternal history buffer
KPB_STATE_BUFFERING-> KPB_STATE_RUN: Done
KPB_STATE_BUFFERING-> KPB_STATE_INIT_DRAINING: Done
KPB_STATE_BUFFERING-> KPB_STATE_DRAINING: Done
KPB_STATE_BUFFERING-[#0000FF]-> KPB_STATE_RESETTING: [IPC] \nreset

KPB_STATE_INIT_DRAINING: KPB received detection event
KPB_STATE_INIT_DRAINING-[#0000FF]-> KPB_PREPARING: [IPC] \nreset
KPB_STATE_INIT_DRAINING- -> KPB_STATE_DRAINING: Draining task starts
KPB_STATE_INIT_DRAINING- -> KPB_STATE_BUFFERING: Start \nbuffering

KPB_STATE_DRAINING: KPB is draining internal history buffer \nto the client's buffer
KPB_STATE_DRAINING- ->KPB_STATE_HOST_COPY: Draining done
KPB_STATE_DRAINING-[#0000FF]-> KPB_STATE_RESETTING: [IPC] \nreset
KPB_STATE_DRAINING- -> KPB_STATE_BUFFERING: Start \nbuffering

KPB_STATE_RESETTING: KPB is preparing itself for the reset
KPB_STATE_RESETTING- ->KPB_STATE_RESET_FINISHING

KPB_STATE_RESET_FINISHING: KPB is finishing reset sequence
KPB_STATE_RESET_FINISHING->KPB_PREPARING: Reset done

KPB_STATE_HOST_COPY: KPB is copying real time \nstream into client's buffer
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.14.1+1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>