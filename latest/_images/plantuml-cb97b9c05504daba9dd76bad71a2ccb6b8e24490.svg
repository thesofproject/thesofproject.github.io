<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="475px" preserveAspectRatio="none" style="width:363px;height:475px;" version="1.1" viewBox="0 0 363 475" width="363px" zoomAndPan="magnify"><defs><filter height="300%" id="fvdwwb4almc8b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#33335B" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="258" x="64" y="16.708">Extended manifest build flow</text><!--MD5=[da352c871de30ea3af4336602ad2097c]
cluster rimage--><rect fill="#FFFFFF" filter="url(#fvdwwb4almc8b)" height="176" style="stroke: #000000; stroke-width: 1.5;" width="330" x="22" y="148.9531"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="160" y="163.9482">rimage</text><!--MD5=[a081bb95bf989a9f340eb378b1ba9d90]
class ext_man_write--><rect fill="#FFFFFF" filter="url(#fvdwwb4almc8b)" height="124.8281" id="ext_man_write" style="stroke: #33335B; stroke-width: 1.5;" width="297" x="38.5" y="183.9531"/><ellipse cx="138.75" cy="199.9531" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M141.7188,205.5938 Q141.1406,205.8906 140.5,206.0313 Q139.8594,206.1875 139.1563,206.1875 Q136.6563,206.1875 135.3281,204.5469 Q134.0156,202.8906 134.0156,199.7656 Q134.0156,196.6406 135.3281,194.9844 Q136.6563,193.3281 139.1563,193.3281 Q139.8594,193.3281 140.5,193.4844 Q141.1563,193.6406 141.7188,193.9375 L141.7188,196.6563 Q141.0938,196.0781 140.5,195.8125 Q139.9063,195.5313 139.2813,195.5313 Q137.9375,195.5313 137.25,196.6094 Q136.5625,197.6719 136.5625,199.7656 Q136.5625,201.8594 137.25,202.9375 Q137.9375,204 139.2813,204 Q139.9063,204 140.5,203.7344 Q141.0938,203.4531 141.7188,202.875 L141.7188,205.5938 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="159.25" y="204.1074">ext_man_write</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="334.5" y1="215.9531" y2="215.9531"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="44.5" y="230.1636">1. Create .ri.xman file</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="230" x="44.5" y="242.9683">2. Find elf file with .fw_metadata section</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="44.5" y="255.7729">3. Read .fw_metadata section</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="44.5" y="268.5776">4. Build ext_man_header</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="285" x="44.5" y="281.3823">5. Validate sum of elements size with section size</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="44.5" y="294.187">6. Save output to .ri.xman file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="334.5" y1="300.7813" y2="300.7813"/><!--MD5=[5c970644e5b7143556414cadba97c378]
class firmware_elf_file--><rect fill="#FFFFFF" filter="url(#fvdwwb4almc8b)" height="95.2188" id="firmware_elf_file" style="stroke: #33335B; stroke-width: 1.5;" width="144" x="115" y="28.9531"/><ellipse cx="136.3" cy="44.9531" fill="#DA70D6" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M140.5344,40.7188 L135.2531,40.7188 L135.2531,43.3906 L140.05,43.3906 L140.05,45.5469 L135.2531,45.5469 L135.2531,50.9531 L132.8156,50.9531 L132.8156,38.5625 L140.5344,38.5625 L140.5344,40.7188 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="151.7" y="49.1074">firmware_elf_file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="116" x2="258" y1="60.9531" y2="60.9531"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="121" y="75.1636">suffix:</text><ellipse cx="126" cy="101.5625" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="135" y="104.7729">FW metadata section</text><ellipse cx="126" cy="114.3672" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="135" y="117.5776">other sections</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="116" x2="165" y1="88.1602" y2="88.1602"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="165" y="91.4683">Content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="209" x2="258" y1="88.1602" y2="88.1602"/><!--MD5=[d9fc180130ed2022e7c2981ad5d1b604]
class ext_man_file--><rect fill="#FFFFFF" filter="url(#fvdwwb4almc8b)" height="95.2188" id="ext_man_file" style="stroke: #33335B; stroke-width: 1.5;" width="194" x="90" y="368.9531"/><ellipse cx="144.75" cy="384.9531" fill="#DA70D6" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M148.9844,380.7188 L143.7031,380.7188 L143.7031,383.3906 L148.5,383.3906 L148.5,385.5469 L143.7031,385.5469 L143.7031,390.9531 L141.2656,390.9531 L141.2656,378.5625 L148.9844,378.5625 L148.9844,380.7188 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="165.25" y="389.1074">ext_man_file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="91" x2="283" y1="400.9531" y2="400.9531"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="96" y="415.1636">suffix: .ri.xman</text><ellipse cx="101" cy="441.5625" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="110" y="444.7729">ext_man_header</text><ellipse cx="101" cy="454.3672" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="110" y="457.5776">.fw_metadata section content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="91" x2="165" y1="428.1602" y2="428.1602"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="165" y="431.4683">Content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="209" x2="283" y1="428.1602" y2="428.1602"/><!--MD5=[1f203a67a71b62617c784aa7b434e41e]
link firmware_elf_file to ext_man_write--><path d="M187,124.2531 C187,141.1131 187,160.4831 187,178.7131 " fill="none" id="firmware_elf_file-&gt;ext_man_write" style="stroke: #F05772; stroke-width: 1.0;"/><polygon fill="#F05772" points="187,183.8231,191,174.8231,187,178.8231,183,174.8231,187,183.8231" style="stroke: #F05772; stroke-width: 1.0;"/><!--MD5=[434e5b391b4dbc98a671594c6bc14f89]
link ext_man_write to ext_man_file--><path d="M187,309.0531 C187,326.9631 187,346.3331 187,363.5831 " fill="none" id="ext_man_write-&gt;ext_man_file" style="stroke: #F05772; stroke-width: 1.0;"/><polygon fill="#F05772" points="187,368.8631,191,359.8631,187,363.8631,183,359.8631,187,368.8631" style="stroke: #F05772; stroke-width: 1.0;"/><!--MD5=[0f5283b403e11f8ef9215a11a065f462]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}

skinparam activity {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam activityDiamond {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam arrowColor	#f05772
skinparam maxMessageSize 400
skinparam BoxPadding 4

title Extended manifest build flow

class firmware_elf_file << (F, orchid) >> {
   suffix:
   - - Content - -
   +FW metadata section
   +other sections
}

rectangle rimage {
   class ext_man_write {
      1. Create .ri.xman file
      2. Find elf file with .fw_metadata section
      3. Read .fw_metadata section
      4. Build ext_man_header
      5. Validate sum of elements size with section size
      6. Save output to .ri.xman file
   }
}

class ext_man_file << (F, orchid) >> {
   suffix: .ri.xman
   - - Content - -
   + ext_man_header
   + .fw_metadata section content
}

firmware_elf_file -down-> ext_man_write
ext_man_write -down-> ext_man_file

@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.20.1+1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>