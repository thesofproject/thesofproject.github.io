<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="312px" preserveAspectRatio="none" style="width:726px;height:312px;" version="1.1" viewBox="0 0 726 312" width="726px" zoomAndPan="magnify"><defs><filter height="300%" id="fw60vk8wl0db9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster component-mgmt--><polygon fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" points="22,24,167,24,174,46.2969,455,46.2969,455,206,22,206,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="174" y1="46.2969" y2="46.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="26" y="38.9951">component-mgmt</text><!--class component API--><rect fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" height="130.7656" id="component API" style="stroke: #33335B; stroke-width: 1.5;" width="205" x="37.5" y="59"/><ellipse cx="88.75" cy="77.9688" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M91.7188,83.6094 Q91.1406,83.9063 90.5,84.0469 Q89.8594,84.2031 89.1563,84.2031 Q86.6563,84.2031 85.3281,82.5625 Q84.0156,80.9063 84.0156,77.7813 Q84.0156,74.6563 85.3281,73 Q86.6563,71.3438 89.1563,71.3438 Q89.8594,71.3438 90.5,71.5 Q91.1563,71.6563 91.7188,71.9531 L91.7188,74.6719 Q91.0938,74.0938 90.5,73.8281 Q89.9063,73.5469 89.2813,73.5469 Q87.9375,73.5469 87.25,74.625 Q86.5625,75.6875 86.5625,77.7813 Q86.5625,79.875 87.25,80.9531 Q87.9375,82.0156 89.2813,82.0156 Q89.9063,82.0156 90.5,81.75 Q91.0938,81.4688 91.7188,80.8906 L91.7188,83.6094 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="38" x="137.25" y="75.1387">«unit»</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="109.25" y="89.1074">component API</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="38.5" x2="241.5" y1="96.9375" y2="96.9375"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="43.5" y="111.1479">...</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="38.5" x2="241.5" y1="117.7422" y2="117.7422"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="151" x="43.5" y="131.9526">comp_new(sof_ipc_comp*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="43.5" y="144.7573">comp_register(comp_driver*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="43.5" y="157.562">comp_unregister(comp_driver*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="43.5" y="170.3667">comp_set_state(comp_dev*, cmd)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="43.5" y="183.1714">sys_comp_init(void)</text><!--class comp_data--><rect fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" height="52.8047" id="comp_data" style="stroke: #33335B; stroke-width: 1.5;" width="101" x="337.5" y="98"/><ellipse cx="352.5" cy="114" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M355.4688,119.6406 Q354.8906,119.9375 354.25,120.0781 Q353.6094,120.2344 352.9063,120.2344 Q350.4063,120.2344 349.0781,118.5938 Q347.7656,116.9375 347.7656,113.8125 Q347.7656,110.6875 349.0781,109.0313 Q350.4063,107.375 352.9063,107.375 Q353.6094,107.375 354.25,107.5313 Q354.9063,107.6875 355.4688,107.9844 L355.4688,110.7031 Q354.8438,110.125 354.25,109.8594 Q353.6563,109.5781 353.0313,109.5781 Q351.6875,109.5781 351,110.6563 Q350.3125,111.7188 350.3125,113.8125 Q350.3125,115.9063 351,116.9844 Q351.6875,118.0469 353.0313,118.0469 Q353.6563,118.0469 354.25,117.7813 Q354.8438,117.5 355.4688,116.9219 L355.4688,119.6406 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="366.5" y="118.1543">comp_data</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="338.5" x2="437.5" y1="130" y2="130"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="343.5" y="144.2104">list</text><path d="M474,104.5 L474,120.5 L438.695,124.5 L474,128.5 L474,144.7656 A0,0 0 0 0 474,144.7656 L714,144.7656 A0,0 0 0 0 714,144.7656 L714,114.5 L704,104.5 L474,104.5 A0,0 0 0 0 474,104.5 " fill="#F6ED80" filter="url(#fw60vk8wl0db9)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M704,104.5 L704,114.5 L714,114.5 L704,104.5 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="480" y="121.5669">Singleton allocated in RZONE_SYS</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="480" y="136.6997">by sys_comp_init()</text><!--class comp_driver--><rect fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" height="32" id="comp_driver" style="stroke: #33335B; stroke-width: 1.5;" width="107" x="215.5" y="269"/><ellipse cx="230.5" cy="285" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M233.4688,290.6406 Q232.8906,290.9375 232.25,291.0781 Q231.6094,291.2344 230.9063,291.2344 Q228.4063,291.2344 227.0781,289.5938 Q225.7656,287.9375 225.7656,284.8125 Q225.7656,281.6875 227.0781,280.0313 Q228.4063,278.375 230.9063,278.375 Q231.6094,278.375 232.25,278.5313 Q232.9063,278.6875 233.4688,278.9844 L233.4688,281.7031 Q232.8438,281.125 232.25,280.8594 Q231.6563,280.5781 231.0313,280.5781 Q229.6875,280.5781 229,281.6563 Q228.3125,282.7188 228.3125,284.8125 Q228.3125,286.9063 229,287.9844 Q229.6875,289.0469 231.0313,289.0469 Q231.6563,289.0469 232.25,288.7813 Q232.8438,288.5 233.4688,287.9219 L233.4688,290.6406 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="244.5" y="289.1543">comp_driver</text><!--link component API to comp_data--><path d="M242.661,124.5 C273.268,124.5 305.663,124.5 332.083,124.5 " fill="none" id="component API-comp_data" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="337.285,124.5,328.285,120.5,332.285,124.5,328.285,128.5,337.285,124.5" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="261" y="117.5669">drv_get()</text><!--link component API to comp_driver--><path d="M143.368,195.563 C146.911,211.1527 152.948,226.6863 163,239 C176.212,255.1841 196.3,265.6538 215.45,272.3775 " fill="none" id="component API-comp_driver" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="142.26,190.278,140.1944,199.9078,143.2872,195.1713,148.0237,198.2642,142.26,190.278" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="164" y="235.0669">registers in comp_register()</text><!--link comp_driver to comp_data--><path d="M309.448,268.8545 C323.934,261.7065 339.307,251.8671 350,239 C367.735,217.659 377.308,187.7 382.408,163.92 " fill="none" id="comp_driver-comp_data" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="384.863,151.092,379.8062,156.2329,382.6068,162.878,387.6636,157.7371,384.863,151.092" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
package component-mgmt {
   class "component API" <<unit>> {
   	comp_new(sof_ipc_comp*)
   	comp_register(comp_driver*)
   	comp_unregister(comp_driver*)
   	comp_set_state(comp_dev*, cmd)
   	...
   	sys_comp_init(void)
   }

   class comp_data {
   	list
   }
   hide comp_data methods

   "component API" -right-> comp_data : drv_get()

}
note right of comp_data
   Singleton allocated in RZONE_SYS
   by sys_comp_init()
end note

"component API" <-up- comp_driver : registers in comp_register()

comp_driver -o comp_data

hide comp_driver members
hide comp_driver methods

@enduml

PlantUML version 1.2019.06(Fri May 24 17:10:25 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.2+9
Operating System: Linux
OS Version: 4.15.0-1028-gcp
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>