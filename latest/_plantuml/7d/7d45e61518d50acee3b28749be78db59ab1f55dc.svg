<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="737px" preserveAspectRatio="none" style="width:873px;height:737px;" version="1.1" viewBox="0 0 873 737" width="873px" zoomAndPan="magnify"><defs><filter height="300%" id="f1mb4v2kvb1ga4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="620.5547" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="37" y="96.2969"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="620.5547" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="514" y="96.2969"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="77.4297" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="690" y="426.625"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="114.3984" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="690" y="586.4531"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="68" x="659" y="395.4922"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="666" y="415.4873">DSP FW</text><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="189.7969" style="stroke: #A1A1CA; stroke-width: 2.0;" width="849" x="13" y="519.0547"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="42" x2="42" y1="86.2969" y2="725.8516"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="202" x2="202" y1="86.2969" y2="725.8516"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="318" x2="318" y1="86.2969" y2="725.8516"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="420" x2="420" y1="86.2969" y2="725.8516"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="519" x2="519" y1="86.2969" y2="725.8516"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="695" x2="695" y1="428.1406" y2="725.8516"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="23" y="82.9951">Host</text><ellipse cx="42" cy="13" fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" rx="8" ry="8" style="stroke: #33335B; stroke-width: 2.0;"/><path d="M42,21 L42,48 M29,29 L55,29 M42,48 L29,63 M42,48 L55,63 " fill="none" filter="url(#f1mb4v2kvb1ga4)" style="stroke: #33335B; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="116" x="142" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="149" y="70.9951">CodeLoadDMA</text><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="88" x="272" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="279" y="70.9951">MemWnd0</text><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="89" x="374" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="381" y="70.9951">DSP Core0</text><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="80" x="477" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="484" y="70.9951">DSP ROM</text><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="620.5547" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="37" y="96.2969"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="620.5547" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="514" y="96.2969"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="77.4297" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="690" y="426.625"/><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="114.3984" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="690" y="586.4531"/><polygon fill="#F05772" points="190,113.4297,200,117.4297,190,121.4297,194,117.4297" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="47" x2="196" y1="117.4297" y2="117.4297"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="54" y="112.3638">init_host_side()</text><polygon fill="#F05772" points="213,147.5625,203,151.5625,213,155.5625,209,151.5625" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="207" x2="513" y1="151.5625" y2="151.5625"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="219" y="146.4966">init_dsp_side()</text><path d="M529,130.4297 L529,155.4297 L691,155.4297 L691,140.4297 L681,130.4297 L529,130.4297 " fill="#F6ED80" filter="url(#f1mb4v2kvb1ga4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M681,130.4297 L681,140.4297 L691,140.4297 L681,130.4297 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="535" y="147.4966">Unified cAVS1.5+ flow</text><polygon fill="#F05772" points="306,181.6953,316,185.6953,306,189.6953,310,185.6953" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="47" x2="312" y1="185.6953" y2="185.6953"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="54" y="180.6294">wait for (FSR_ROM_INIT_DONE)</text><polygon fill="#F05772" points="329,210.8281,319,214.8281,329,218.8281,325,214.8281" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="323" x2="513" y1="214.8281" y2="214.8281"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="335" y="209.7622">FSR_ROM_INIT_DONE</text><polygon fill="#F05772" points="58,224.8281,48,228.8281,58,232.8281,54,228.8281" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="52" x2="317" y1="228.8281" y2="228.8281"/><polygon fill="#F05772" points="190,253.9609,200,257.9609,190,261.9609,194,257.9609" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="47" x2="196" y1="257.9609" y2="257.9609"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="54" y="252.895">write(base fw binary)</text><polygon fill="#F05772" points="213,283.0938,203,287.0938,213,291.0938,209,287.0938" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="207" x2="513" y1="287.0938" y2="287.0938"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="219" y="282.0278">read() : base fw manifest</text><line style="stroke: #F05772; stroke-width: 1.0;" x1="524" x2="566" y1="316.2266" y2="316.2266"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="566" x2="566" y1="316.2266" y2="329.2266"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="525" x2="566" y1="329.2266" y2="329.2266"/><polygon fill="#F05772" points="535,325.2266,525,329.2266,535,333.2266,531,329.2266" style="stroke: #F05772; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="531" y="311.1606">veirfy(base fw manifest)</text><polygon fill="#F05772" points="213,354.3594,203,358.3594,213,362.3594,209,358.3594" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="207" x2="513" y1="358.3594" y2="358.3594"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="219" y="353.2935">read() : base fw code</text><polygon fill="#F05772" points="329,383.4922,319,387.4922,329,391.4922,325,387.4922" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="323" x2="513" y1="387.4922" y2="387.4922"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="335" y="382.4263">FSR_ROM_FW_ENTERED</text><polygon fill="#F05772" points="647,412.625,657,416.625,647,420.625,651,416.625" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="524" x2="653" y1="416.625" y2="416.625"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="531" y="411.5591">start()</text><rect fill="#FFFFFF" filter="url(#f1mb4v2kvb1ga4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="68" x="659" y="395.4922"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="666" y="415.4873">DSP FW</text><line style="stroke: #F05772; stroke-width: 1.0;" x1="700" x2="742" y1="461.9219" y2="461.9219"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="742" x2="742" y1="461.9219" y2="474.9219"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="701" x2="742" y1="474.9219" y2="474.9219"/><polygon fill="#F05772" points="711,470.9219,701,474.9219,711,478.9219,707,474.9219" style="stroke: #F05772; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="707" y="456.856">initialization()</text><polygon fill="#F05772" points="58,500.0547,48,504.0547,58,508.0547,54,504.0547" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="52" x2="694" y1="504.0547" y2="504.0547"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="64" y="498.9888">&lt;&lt;IPC Notification&gt;&gt; FW Ready</text><path d="M13,519.0547 L90,519.0547 L90,526.0547 L80,536.0547 L13,536.0547 L13,519.0547 " fill="#EEEEEE" style="stroke: #A1A1CA; stroke-width: 1.0;"/><rect fill="none" height="189.7969" style="stroke: #A1A1CA; stroke-width: 2.0;" width="849" x="13" y="519.0547"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="532.1216">loop</text><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="105" y="531.2651">[libraries loading]</text><polygon fill="#F05772" points="190,553.3203,200,557.3203,190,561.3203,194,557.3203" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="47" x2="196" y1="557.3203" y2="557.3203"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="54" y="552.2544">write(library binary)</text><polygon fill="#F05772" points="678,582.4531,688,586.4531,678,590.4531,682,586.4531" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="47" x2="684" y1="586.4531" y2="586.4531"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="54" y="581.3872">&lt;&lt;IPC&gt;&gt; Load Library</text><polygon fill="#F05772" points="213,611.5859,203,615.5859,213,619.5859,209,615.5859" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="207" x2="689" y1="615.5859" y2="615.5859"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="219" y="610.52">read() : library manifest</text><line style="stroke: #F05772; stroke-width: 1.0;" x1="700" x2="742" y1="644.7188" y2="644.7188"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="742" x2="742" y1="644.7188" y2="657.7188"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="701" x2="742" y1="657.7188" y2="657.7188"/><polygon fill="#F05772" points="711,653.7188,701,657.7188,711,661.7188,707,657.7188" style="stroke: #F05772; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="707" y="639.6528">verify(library manifest)</text><polygon fill="#F05772" points="213,682.8516,203,686.8516,213,690.8516,209,686.8516" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0;" x1="207" x2="689" y1="686.8516" y2="686.8516"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="219" y="681.7856">read() : library code</text><polygon fill="#F05772" points="58,696.8516,48,700.8516,58,704.8516,54,700.8516" style="stroke: #F05772; stroke-width: 1.0;"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="52" x2="694" y1="700.8516" y2="700.8516"/><!--MD5=[3ae7c863040a1d7acd2bad33484b1eac]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}

skinparam activity {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam activityDiamond {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam arrowColor	#f05772
skinparam maxMessageSize 400
skinparam BoxPadding 4
actor host as "Host"
participant cldma as "CodeLoadDMA"
participant mw0 as "MemWnd0"
participant core0 as "DSP Core0"
participant rom as "DSP ROM"
participant fw as "DSP FW"

activate rom
activate host
host -> cldma : init_host_side()

rom -> cldma : init_dsp_side()
note right: Unified cAVS1.5+ flow

host -> mw0 : wait for (FSR_ROM_INIT_DONE)
  mw0 <- rom : FSR_ROM_INIT_DONE
host <- - mw0

host -> cldma : write(base fw binary)
  cldma <- rom : read() : base fw manifest
  rom -> rom : veirfy(base fw manifest)
  cldma <- rom : read() : base fw code
  mw0 <- rom : FSR_ROM_FW_ENTERED

  create fw
  rom -> fw : start()
    activate fw
    fw -> fw : initialization()
    host <- fw : <<IPC Notification>> FW Ready
    deactivate fw

loop libraries loading
  host -> cldma : write(library binary)
  host -> fw : <<IPC>> Load Library
    activate fw
    cldma <- fw : read() : library manifest
    fw -> fw : verify(library manifest)
    cldma <- fw : read() : library code
    host <- - fw
    deactivate fw
end loop

@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.26+4
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>