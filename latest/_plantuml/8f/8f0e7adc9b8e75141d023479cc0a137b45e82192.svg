<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="322px" preserveAspectRatio="none" style="width:669px;height:322px;" version="1.1" viewBox="0 0 669 322" width="669px" zoomAndPan="magnify"><defs><filter height="300%" id="f3iin3uqhzv18" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f1acfe1cbe5dfcfb7814d367240024fe]
cluster component-mgmt--><polygon fill="#FFFFFF" filter="url(#f3iin3uqhzv18)" points="22,24,150,24,157,47.6094,411,47.6094,411,215,22,215,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="157" y1="47.6094" y2="47.6094"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="26" y="40.5332">component-mgmt</text><!--MD5=[8c2987afbd2243247df680adfb5041a3]
class component API--><rect fill="#FFFFFF" filter="url(#f3iin3uqhzv18)" height="139.2031" id="component API" style="stroke: #33335B; stroke-width: 1.5;" width="177" x="38.5" y="60"/><ellipse cx="81.4" cy="80.0938" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M84.1656,75.9688 Q84.3219,75.75 84.5094,75.6406 Q84.6969,75.5313 84.9156,75.5313 Q85.2906,75.5313 85.525,75.7969 Q85.7594,76.0469 85.7594,76.6563 L85.7594,78.1094 Q85.7594,78.7188 85.525,78.9844 Q85.2906,79.25 84.9156,79.25 Q84.5719,79.25 84.3688,79.0469 Q84.1656,78.8594 84.0563,78.3438 Q84.0094,77.9844 83.8219,77.7969 Q83.4938,77.4219 82.8844,77.2031 Q82.275,76.9844 81.65,76.9844 Q80.8844,76.9844 80.2438,77.3125 Q79.6188,77.6406 79.1188,78.3906 Q78.6344,79.1406 78.6344,80.1719 L78.6344,81.2656 Q78.6344,82.5 79.525,83.3281 Q80.4156,84.1406 82.0094,84.1406 Q82.9469,84.1406 83.6031,83.8906 Q83.9938,83.7344 84.4156,83.2969 Q84.6813,83.0313 84.8219,82.9531 Q84.9781,82.875 85.1813,82.875 Q85.5094,82.875 85.7594,83.1406 Q86.025,83.3906 86.025,83.7344 Q86.025,84.0781 85.6813,84.4844 Q85.1813,85.0625 84.3844,85.3906 Q83.3063,85.8438 82.0094,85.8438 Q80.4938,85.8438 79.2906,85.2188 Q78.3063,84.7188 77.6188,83.6563 Q76.9313,82.5781 76.9313,81.2969 L76.9313,80.1406 Q76.9313,78.8125 77.5406,77.6719 Q78.1656,76.5156 79.2594,75.9063 Q80.3531,75.2813 81.5875,75.2813 Q82.3219,75.2813 82.9625,75.4531 Q83.6188,75.6094 84.1656,75.9688 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="34" x="126.1" y="77.457">«unit»</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="101.6" y="92.5508">component API</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="214.5" y1="100.1875" y2="100.1875"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="9" x="44.5" y="115.6064">...</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="214.5" y1="122.0234" y2="122.0234"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="44.5" y="137.4424">comp_new(sof_ipc_comp*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="44.5" y="151.2783">comp_register(comp_driver*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="44.5" y="165.1143">comp_unregister(comp_driver*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="44.5" y="178.9502">comp_set_state(comp_dev*, cmd)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="44.5" y="192.7861">sys_comp_init(void)</text><!--MD5=[9ec976ca96a556f71ff5670325ac6e3f]
class comp_data--><rect fill="#FFFFFF" filter="url(#f3iin3uqhzv18)" height="53.8359" id="comp_data" style="stroke: #33335B; stroke-width: 1.5;" width="94" x="301" y="102.5"/><ellipse cx="316" cy="118.5" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M318.7656,114.375 Q318.9219,114.1563 319.1094,114.0469 Q319.2969,113.9375 319.5156,113.9375 Q319.8906,113.9375 320.125,114.2031 Q320.3594,114.4531 320.3594,115.0625 L320.3594,116.5156 Q320.3594,117.125 320.125,117.3906 Q319.8906,117.6563 319.5156,117.6563 Q319.1719,117.6563 318.9688,117.4531 Q318.7656,117.2656 318.6563,116.75 Q318.6094,116.3906 318.4219,116.2031 Q318.0938,115.8281 317.4844,115.6094 Q316.875,115.3906 316.25,115.3906 Q315.4844,115.3906 314.8438,115.7188 Q314.2188,116.0469 313.7188,116.7969 Q313.2344,117.5469 313.2344,118.5781 L313.2344,119.6719 Q313.2344,120.9063 314.125,121.7344 Q315.0156,122.5469 316.6094,122.5469 Q317.5469,122.5469 318.2031,122.2969 Q318.5938,122.1406 319.0156,121.7031 Q319.2813,121.4375 319.4219,121.3594 Q319.5781,121.2813 319.7813,121.2813 Q320.1094,121.2813 320.3594,121.5469 Q320.625,121.7969 320.625,122.1406 Q320.625,122.4844 320.2813,122.8906 Q319.7813,123.4688 318.9844,123.7969 Q317.9063,124.25 316.6094,124.25 Q315.0938,124.25 313.8906,123.625 Q312.9063,123.125 312.2188,122.0625 Q311.5313,120.9844 311.5313,119.7031 L311.5313,118.5469 Q311.5313,117.2188 312.1406,116.0781 Q312.7656,114.9219 313.8594,114.3125 Q314.9531,113.6875 316.1875,113.6875 Q316.9219,113.6875 317.5625,113.8594 Q318.2188,114.0156 318.7656,114.375 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="62" x="330" y="123.4102">comp_data</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="302" x2="394" y1="134.5" y2="134.5"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="13" x="307" y="149.9189">list</text><path d="M430.5,108 L430.5,125.5 L395.09,129.5 L430.5,133.5 L430.5,150.7031 A0,0 0 0 0 430.5,150.7031 L657.5,150.7031 A0,0 0 0 0 657.5,150.7031 L657.5,118 L647.5,108 L430.5,108 A0,0 0 0 0 430.5,108 " fill="#F6ED80" filter="url(#f3iin3uqhzv18)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M647.5,108 L647.5,118 L657.5,118 L647.5,108 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="436.5" y="126.4951">Singleton allocated in RZONE_SYS</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="436.5" y="142.8467">by sys_comp_init()</text><!--MD5=[8c61665d9a482ae36487effce834807d]
class comp_driver--><rect fill="#FFFFFF" filter="url(#f3iin3uqhzv18)" height="32" id="comp_driver" style="stroke: #33335B; stroke-width: 1.5;" width="100" x="187" y="279"/><ellipse cx="202" cy="295" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M204.7656,290.875 Q204.9219,290.6563 205.1094,290.5469 Q205.2969,290.4375 205.5156,290.4375 Q205.8906,290.4375 206.125,290.7031 Q206.3594,290.9531 206.3594,291.5625 L206.3594,293.0156 Q206.3594,293.625 206.125,293.8906 Q205.8906,294.1563 205.5156,294.1563 Q205.1719,294.1563 204.9688,293.9531 Q204.7656,293.7656 204.6563,293.25 Q204.6094,292.8906 204.4219,292.7031 Q204.0938,292.3281 203.4844,292.1094 Q202.875,291.8906 202.25,291.8906 Q201.4844,291.8906 200.8438,292.2188 Q200.2188,292.5469 199.7188,293.2969 Q199.2344,294.0469 199.2344,295.0781 L199.2344,296.1719 Q199.2344,297.4063 200.125,298.2344 Q201.0156,299.0469 202.6094,299.0469 Q203.5469,299.0469 204.2031,298.7969 Q204.5938,298.6406 205.0156,298.2031 Q205.2813,297.9375 205.4219,297.8594 Q205.5781,297.7813 205.7813,297.7813 Q206.1094,297.7813 206.3594,298.0469 Q206.625,298.2969 206.625,298.6406 Q206.625,298.9844 206.2813,299.3906 Q205.7813,299.9688 204.9844,300.2969 Q203.9063,300.75 202.6094,300.75 Q201.0938,300.75 199.8906,300.125 Q198.9063,299.625 198.2188,298.5625 Q197.5313,297.4844 197.5313,296.2031 L197.5313,295.0469 Q197.5313,293.7188 198.1406,292.5781 Q198.7656,291.4219 199.8594,290.8125 Q200.9531,290.1875 202.1875,290.1875 Q202.9219,290.1875 203.5625,290.3594 Q204.2188,290.5156 204.7656,290.875 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="216" y="299.9102">comp_driver</text><!--MD5=[795bb5bf7752784e59032142a6e0c9fe]
link component API to comp_data--><path d="M215.62,129.5 C242.86,129.5 271.95,129.5 295.9,129.5 " fill="none" id="component API-&gt;comp_data" style="stroke: #F05772; stroke-width: 1.0;"/><polygon fill="#F05772" points="300.94,129.5,291.94,125.5,295.94,129.5,291.94,133.5,300.94,129.5" style="stroke: #F05772; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="233.75" y="122.9951">drv_get()</text><!--MD5=[155639e074ff65daf4fa6a8332482b0a]
reverse link component API to comp_driver--><path d="M132.21,204.03 C136.03,220 142.19,235.99 152,249 C161.95,262.2 176.92,271.92 191.53,278.88 " fill="none" id="component API&lt;-comp_driver" style="stroke: #F05772; stroke-width: 1.0;"/><polygon fill="#F05772" points="131.1,199.07,129.1536,208.7246,132.1877,203.9503,136.962,206.9843,131.1,199.07" style="stroke: #F05772; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="153" y="245.4951">registers in comp_register()</text><!--MD5=[143383bb7191b780bde7f1444e63c227]
link comp_driver to comp_data--><path d="M276.86,278.98 C291.03,271.85 305.96,261.98 316,249 C333.6,226.24 341.54,194.54 345.11,169.64 " fill="none" id="comp_driver-&gt;comp_data" style="stroke: #F05772; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="346.68,156.62,341.9905,162.098,345.2435,168.5337,349.933,163.0557,346.68,156.62" style="stroke: #F05772; stroke-width: 1.0;"/><!--MD5=[e727e0c8f527c573a05451b86a4dd74f]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam queue {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}

skinparam activity {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam activityDiamond {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam arrowColor	#f05772
skinparam maxMessageSize 400
skinparam BoxPadding 4
package component-mgmt {
   class "component API" <<unit>> {
   	comp_new(sof_ipc_comp*)
   	comp_register(comp_driver*)
   	comp_unregister(comp_driver*)
   	comp_set_state(comp_dev*, cmd)
   	...
   	sys_comp_init(void)
   }

   class comp_data {
   	list
   }
   hide comp_data methods

   "component API" -right-> comp_data : drv_get()

}
note right of comp_data
   Singleton allocated in RZONE_SYS
   by sys_comp_init()
end note

"component API" <-up- comp_driver : registers in comp_register()

comp_driver -o comp_data

hide comp_driver members
hide comp_driver methods

@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_302-b08
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>