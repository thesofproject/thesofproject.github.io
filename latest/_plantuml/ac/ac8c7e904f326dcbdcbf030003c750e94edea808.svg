<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1026px" preserveAspectRatio="none" style="width:953px;height:1026px;" version="1.1" viewBox="0 0 953 1026" width="953px" zoomAndPan="magnify"><defs><filter height="300%" id="f3swjaek2r1s4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="403.8125" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="181.9219"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="530.0586"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="345.1641" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="660.4375"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="306.8125" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="698.7891"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="272.7578" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="212.2734"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="262.4609" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="734.1406"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="57.3516" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="346" y="838.1953"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="14" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="242.625"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="179.0547" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="291.9766"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="378.6797"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="218.1094" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="764.4922"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="143.9063" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="802.8438"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="30" x2="30" y1="105.2188" y2="1014.6016"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="199.5" x2="199.5" y1="105.2188" y2="1014.6016"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="346" x2="346" y1="105.2188" y2="1014.6016"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="551.5" x2="551.5" y1="105.2188" y2="1014.6016"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="691" x2="691" y1="105.2188" y2="1014.6016"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="13" y="84.5332">Host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="8" y="102.1426">Driver</text><ellipse cx="30" cy="13" fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" rx="8" ry="8" style="stroke: #33335B; stroke-width: 2.0;"/><path d="M30,21 L30,48 M17,29 L43,29 M30,48 L17,63 M30,48 L43,63 " fill="none" filter="url(#f3swjaek2r1s4)" style="stroke: #33335B; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="31.6094" style="stroke: #33335B; stroke-width: 1.5;" width="63" x="166.5" y="68.6094"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="173.5" y="90.1426">pipeline</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="49.2188" style="stroke: #33335B; stroke-width: 1.5;" width="84" x="302" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="330.5" y="72.5332">host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="309" y="90.1426">component</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="31.6094" style="stroke: #33335B; stroke-width: 1.5;" width="73" x="513.5" y="68.6094"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="520.5" y="90.1426">hda_dma</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="31.6094" style="stroke: #33335B; stroke-width: 1.5;" width="72" x="653" y="68.6094"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="660" y="90.1426">HD/A HW</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="403.8125" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="181.9219"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="530.0586"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="345.1641" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="660.4375"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="306.8125" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="698.7891"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="272.7578" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="212.2734"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="262.4609" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="734.1406"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="57.3516" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="346" y="838.1953"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="14" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="242.625"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="179.0547" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="291.9766"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="378.6797"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="218.1094" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="764.4922"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="143.9063" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="802.8438"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="938" x="3" y="136.3945"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="136.3945" y2="136.3945"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="139.3945" y2="139.3945"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="24.3516" style="stroke: #D6D6DE; stroke-width: 1.0;" width="98" x="423" y="125.2188"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="429" y="142.7139">Start Trigger</text><polygon fill="#4A4A86" points="183,177.9219,193,181.9219,183,185.9219,187,181.9219" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="30" x2="189" y1="181.9219" y2="181.9219"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="37" y="177.0654">&lt;&lt;IPC&gt;&gt; trigger (START)</text><polygon fill="#4A4A86" points="329,208.2734,339,212.2734,329,216.2734,333,212.2734" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="205" x2="335" y1="212.2734" y2="212.2734"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="212" y="207.417">trigger (START)</text><polygon fill="#4A4A86" points="535,238.625,545,242.625,535,246.625,539,242.625" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="351" x2="541" y1="242.625" y2="242.625"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="358" y="237.7686">dma_start()</text><polygon fill="#4A4A86" points="362,252.625,352,256.625,362,260.625,358,256.625" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="551" y1="256.625" y2="256.625"/><polygon fill="#4A4A86" points="535,287.9766,545,291.9766,535,295.9766,539,291.9766" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="351" x2="541" y1="291.9766" y2="291.9766"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="358" y="287.1201">copy(flags = PRELOAD)</text><path d="M562,269.625 L562,295.625 L752,295.625 L752,279.625 L742,269.625 L562,269.625 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M742,269.625 L742,279.625 L752,279.625 L742,269.625 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="568" y="288.1201">Do not expect Buffer Full yet.</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="599" y1="327.3281" y2="327.3281"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="599" x2="599" y1="327.3281" y2="340.3281"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="558" x2="599" y1="340.3281" y2="340.3281"/><polygon fill="#4A4A86" points="568,336.3281,558,340.3281,568,344.3281,564,340.3281" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="564" y="322.4717">state += PRELOAD</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="562" x2="604" y1="370.6797" y2="370.6797"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="604" x2="604" y1="370.6797" y2="383.6797"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="563" x2="604" y1="383.6797" y2="383.6797"/><polygon fill="#4A4A86" points="573,379.6797,563,383.6797,573,387.6797,569,383.6797" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="569" y="365.8232">preload()</text><path d="M631,354.8281 L631,380.8281 L802,380.8281 L802,364.8281 L792,354.8281 L631,354.8281 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M792,354.8281 L792,364.8281 L802,364.8281 L792,354.8281 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="637" y="373.3232">First non-blocking BF test</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="599" y1="444.0313" y2="444.0313"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="599" x2="599" y1="444.0313" y2="457.0313"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="558" x2="599" y1="457.0313" y2="457.0313"/><polygon fill="#4A4A86" points="568,453.0313,558,457.0313,568,461.0313,564,457.0313" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="564" y="439.1748">state += BF_WAIT</text><polygon fill="#4A4A86" points="362,467.0313,352,471.0313,362,475.0313,358,471.0313" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="551" y1="471.0313" y2="471.0313"/><polygon fill="#4A4A86" points="216,481.0313,206,485.0313,216,489.0313,212,485.0313" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="210" x2="345" y1="485.0313" y2="485.0313"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="210" x2="252" y1="522.0586" y2="522.0586"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="252" x2="252" y1="522.0586" y2="535.0586"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="252" y1="535.0586" y2="535.0586"/><polygon fill="#4A4A86" points="221,531.0586,211,535.0586,221,539.0586,217,535.0586" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="217" y="517.2021">schedule_copy_idle()</text><path d="M351,498.0313 L351,540.0313 L582,540.0313 L582,508.0313 L572,498.0313 L351,498.0313 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M572,498.0313 L572,508.0313 L582,508.0313 L572,498.0313 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="357" y="516.5264">Scheduler got a ppl task (pre-loader)</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="361" y="532.8779">to run in idle</text><polygon fill="#4A4A86" points="41,581.7344,31,585.7344,41,589.7344,37,585.7344" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="35" x2="199" y1="585.7344" y2="585.7344"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="938" x="3" y="614.9102"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="614.9102" y2="614.9102"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="617.9102" y2="617.9102"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="24.3516" style="stroke: #D6D6DE; stroke-width: 1.0;" width="72" x="436" y="603.7344"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="442" y="621.2295">Pre-load</text><polygon fill="#4A4A86" points="183,656.4375,193,660.4375,183,664.4375,187,660.4375" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="189" y1="660.4375" y2="660.4375"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="10" y="655.5811">pipeline_task</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="205" x2="252" y1="685.7891" y2="685.7891"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="252" x2="252" y1="685.7891" y2="698.7891"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="252" y1="698.7891" y2="698.7891"/><polygon fill="#4A4A86" points="221,694.7891,211,698.7891,221,702.7891,217,698.7891" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="217" y="680.9326">pipeline_copy</text><polygon fill="#4A4A86" points="329,730.1406,339,734.1406,329,738.1406,333,734.1406" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="210" x2="335" y1="734.1406" y2="734.1406"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="217" y="729.2842">copy()</text><polygon fill="#4A4A86" points="535,760.4922,545,764.4922,535,768.4922,539,764.4922" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="351" x2="541" y1="764.4922" y2="764.4922"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="358" y="759.6357">copy()</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="604" y1="789.8438" y2="789.8438"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="604" x2="604" y1="789.8438" y2="802.8438"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="563" x2="604" y1="802.8438" y2="802.8438"/><polygon fill="#4A4A86" points="573,798.8438,563,802.8438,573,806.8438,569,802.8438" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="569" y="784.9873">preload()</text><path d="M631,778.9922 L631,804.9922 L804,804.9922 L804,788.9922 L794,778.9922 L631,778.9922 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M794,778.9922 L794,788.9922 L804,788.9922 L794,778.9922 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="637" y="797.4873">Blocking BF wait this time</text><polygon fill="#4A4A86" points="367,834.1953,357,838.1953,367,842.1953,363,838.1953" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="361" x2="551" y1="838.1953" y2="838.1953"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="373" y="833.3389">callback() /for each period/</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="356" x2="398" y1="868.5469" y2="868.5469"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="398" x2="398" y1="868.5469" y2="881.5469"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="357" x2="398" y1="881.5469" y2="881.5469"/><polygon fill="#4A4A86" points="367,877.5469,357,881.5469,367,885.5469,363,881.5469" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="363" y="863.6904">comp_update_buffer_produce()</text><polygon fill="#4A4A86" points="540,891.5469,550,895.5469,540,899.5469,544,895.5469" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="351" x2="546" y1="895.5469" y2="895.5469"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="562" x2="604" y1="945.75" y2="945.75"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="604" x2="604" y1="945.75" y2="958.75"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="604" y1="958.75" y2="958.75"/><polygon fill="#4A4A86" points="567,954.75,557,958.75,567,962.75,563,958.75" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="569" y="940.8936">clear state flags</text><path d="M673,908.5469 L673,967.5469 L917,967.5469 L917,918.5469 L907,908.5469 L673,908.5469 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M907,908.5469 L907,918.5469 L917,918.5469 L907,908.5469 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="679" y="927.042">Switching to normal on demand mode.</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="679" y="943.3936">Rptr (FPI) advanced on the next copy()</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="679" y="959.7451">Once the first period is processed.</text><polygon fill="#4A4A86" points="362,978.6016,352,982.6016,362,986.6016,358,982.6016" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="551" y1="982.6016" y2="982.6016"/><polygon fill="#4A4A86" points="221,992.6016,211,996.6016,221,1000.6016,217,996.6016" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="215" x2="345" y1="996.6016" y2="996.6016"/><!--MD5=[70e3c98db453c3e0d5b1224f4e224fae]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
actor drv as "Host\nDriver"
participant ppl as "pipeline"
participant host as "host\ncomponent"
participant hda_dma
participant hda_hw as "HD/A HW"

== Start Trigger ==

drv -> ppl : <<IPC>> trigger (START)
   activate ppl

   ppl -> host : trigger (START)
      activate host

      host -> hda_dma : dma_start()
         activate hda_dma
      host <- - hda_dma
      deactivate hda_dma

      host -> hda_dma : copy(flags = PRELOAD)
         activate hda_dma
         note right: Do not expect Buffer Full yet.
         hda_dma -> hda_dma : state += PRELOAD
         hda_dma -> hda_dma : preload()
            activate hda_dma
            note right : First non-blocking BF test
         deactivate hda_dma
         hda_dma -> hda_dma : state += BF_WAIT
      host <- - hda_dma
      deactivate hda_dma
   ppl <- - host
   deactivate host

   ppl -> ppl : schedule_copy_idle()
      activate ppl
      note right: Scheduler got a ppl task (pre-loader)\n to run in idle
   deactivate ppl
drv <- - ppl
deactivate ppl

== Pre-load ==

-> ppl : pipeline_task
   activate ppl
   ppl -> ppl : pipeline_copy
      activate ppl
      ppl -> host : copy()
         activate host
         host -> hda_dma : copy()
            activate hda_dma
            hda_dma -> hda_dma : preload()
               activate hda_dma
               note right : Blocking BF wait this time
               host <- hda_dma : callback() /for each period/
                  activate host
                  host -> host : comp_update_buffer_produce()
               host - -> hda_dma
               deactivate host
               hda_dma -> hda_dma : clear state flags
note right: Switching to normal on demand mode.\nRptr (FPI) advanced on the next copy()\nOnce the first period is processed.
            deactivate hda_dma
         host <- - hda_dma
         deactivate hda_dma
      ppl <- - host
      deactivate host

@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_302-b08
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>