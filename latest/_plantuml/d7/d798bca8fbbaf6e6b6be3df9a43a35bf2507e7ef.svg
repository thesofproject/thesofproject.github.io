<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="998px" preserveAspectRatio="none" style="width:1042px;height:998px;" version="1.1" viewBox="0 0 1042 998" width="1042px" zoomAndPan="magnify"><defs><filter height="300%" id="f3swjaek2r1s4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="394.0625" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="214" y="176.8594"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="219" y="515.8555"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="334.1953" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="214" y="643.1875"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="297.0625" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="219" y="680.3203"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="266.6641" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="371" y="205.9922"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="253.9297" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="371" y="714.4531"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="56.1328" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="376" y="814.8516"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="14" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="601" y="235.125"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="175.3984" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="601" y="283.2578"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="606" y="367.5234"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="210.7969" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="601" y="743.5859"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="139.0313" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="606" y="780.7188"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="31" x2="31" y1="102.5938" y2="986.3828"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="219" x2="219" y1="102.5938" y2="986.3828"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="376" x2="376" y1="102.5938" y2="986.3828"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="605.5" x2="605.5" y1="102.5938" y2="986.3828"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="753" x2="753" y1="102.5938" y2="986.3828"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="12" y="82.9951">Host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="8" y="99.292">Driver</text><ellipse cx="31" cy="13" fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" rx="8" ry="8" style="stroke: #33335B; stroke-width: 2.0;"/><path d="M31,21 L31,48 M18,29 L44,29 M31,48 L18,63 M31,48 L44,63 " fill="none" filter="url(#f3swjaek2r1s4)" style="stroke: #33335B; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="68" x="183" y="67.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="190" y="87.292">pipeline</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="46.5938" style="stroke: #33335B; stroke-width: 1.5;" width="94" x="327" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="358.5" y="70.9951">host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="334" y="87.292">component</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="77" x="565.5" y="67.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="572.5" y="87.292">hda_dma</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="30.2969" style="stroke: #33335B; stroke-width: 1.5;" width="76" x="713" y="67.2969"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="720" y="87.292">HD/A HW</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="394.0625" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="214" y="176.8594"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="219" y="515.8555"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="334.1953" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="214" y="643.1875"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="297.0625" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="219" y="680.3203"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="266.6641" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="371" y="205.9922"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="253.9297" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="371" y="714.4531"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="56.1328" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="376" y="814.8516"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="14" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="601" y="235.125"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="175.3984" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="601" y="283.2578"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="606" y="367.5234"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="210.7969" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="601" y="743.5859"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="139.0313" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="606" y="780.7188"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1027" x="3" y="133.1602"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="1030" y1="133.1602" y2="133.1602"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="1030" y1="136.1602" y2="136.1602"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="23.1328" style="stroke: #D6D6DE; stroke-width: 1.0;" width="113" x="460" y="122.5938"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="466" y="138.6606">Start Trigger</text><polygon fill="#4A4A86" points="202,172.8594,212,176.8594,202,180.8594,206,176.8594" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="31" x2="208" y1="176.8594" y2="176.8594"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="38" y="171.7935">&lt;&lt;IPC&gt;&gt; trigger (START)</text><polygon fill="#4A4A86" points="359,201.9922,369,205.9922,359,209.9922,363,205.9922" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="224" x2="365" y1="205.9922" y2="205.9922"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="231" y="200.9263">trigger (START)</text><polygon fill="#4A4A86" points="589,231.125,599,235.125,589,239.125,593,235.125" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="381" x2="595" y1="235.125" y2="235.125"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="388" y="230.0591">dma_start()</text><polygon fill="#4A4A86" points="392,245.125,382,249.125,392,253.125,388,249.125" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="386" x2="605" y1="249.125" y2="249.125"/><polygon fill="#4A4A86" points="589,279.2578,599,283.2578,589,287.2578,593,283.2578" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="381" x2="595" y1="283.2578" y2="283.2578"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="388" y="278.1919">copy(flags = PRELOAD)</text><path d="M616,262.125 L616,287.125 L822,287.125 L822,272.125 L812,262.125 L616,262.125 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M812,262.125 L812,272.125 L822,272.125 L812,262.125 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="622" y="279.1919">Do not expect Buffer Full yet.</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="611" x2="653" y1="317.3906" y2="317.3906"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="653" x2="653" y1="317.3906" y2="330.3906"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="612" x2="653" y1="330.3906" y2="330.3906"/><polygon fill="#4A4A86" points="622,326.3906,612,330.3906,622,334.3906,618,330.3906" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="618" y="312.3247">state += PRELOAD</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="616" x2="658" y1="359.5234" y2="359.5234"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="658" x2="658" y1="359.5234" y2="372.5234"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="617" x2="658" y1="372.5234" y2="372.5234"/><polygon fill="#4A4A86" points="627,368.5234,617,372.5234,627,376.5234,623,372.5234" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="623" y="354.4575">preload()</text><path d="M693,344.8906 L693,369.8906 L875,369.8906 L875,354.8906 L865,344.8906 L693,344.8906 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M865,344.8906 L865,354.8906 L875,354.8906 L865,344.8906 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="699" y="361.9575">First non-blocking BF test</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="611" x2="653" y1="431.6563" y2="431.6563"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="653" x2="653" y1="431.6563" y2="444.6563"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="612" x2="653" y1="444.6563" y2="444.6563"/><polygon fill="#4A4A86" points="622,440.6563,612,444.6563,622,448.6563,618,444.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="618" y="426.5903">state += BF_WAIT</text><polygon fill="#4A4A86" points="392,454.6563,382,458.6563,392,462.6563,388,458.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="386" x2="605" y1="458.6563" y2="458.6563"/><polygon fill="#4A4A86" points="235,468.6563,225,472.6563,235,476.6563,231,472.6563" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229" x2="375" y1="472.6563" y2="472.6563"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="229" x2="271" y1="507.8555" y2="507.8555"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="271" x2="271" y1="507.8555" y2="520.8555"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="230" x2="271" y1="520.8555" y2="520.8555"/><polygon fill="#4A4A86" points="240,516.8555,230,520.8555,240,524.8555,236,520.8555" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="236" y="502.7896">schedule_copy_idle()</text><path d="M381,485.6563 L381,525.6563 L637,525.6563 L637,495.6563 L627,485.6563 L381,485.6563 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M627,485.6563 L627,495.6563 L637,495.6563 L627,485.6563 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="387" y="502.7231">Scheduler got a ppl task (pre-loader)</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="391" y="517.856">to run in idle</text><polygon fill="#4A4A86" points="42,566.9219,32,570.9219,42,574.9219,38,570.9219" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36" x2="218" y1="570.9219" y2="570.9219"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1027" x="3" y="599.4883"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="1030" y1="599.4883" y2="599.4883"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="1030" y1="602.4883" y2="602.4883"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="23.1328" style="stroke: #D6D6DE; stroke-width: 1.0;" width="81" x="476" y="588.9219"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="482" y="604.9888">Pre-load</text><polygon fill="#4A4A86" points="202,639.1875,212,643.1875,202,647.1875,206,643.1875" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="208" y1="643.1875" y2="643.1875"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="10" y="638.1216">pipeline_task</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="224" x2="271" y1="667.3203" y2="667.3203"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="271" x2="271" y1="667.3203" y2="680.3203"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="230" x2="271" y1="680.3203" y2="680.3203"/><polygon fill="#4A4A86" points="240,676.3203,230,680.3203,240,684.3203,236,680.3203" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="236" y="662.2544">pipeline_copy</text><polygon fill="#4A4A86" points="359,710.4531,369,714.4531,359,718.4531,363,714.4531" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="229" x2="365" y1="714.4531" y2="714.4531"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="236" y="709.3872">copy()</text><polygon fill="#4A4A86" points="589,739.5859,599,743.5859,589,747.5859,593,743.5859" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="381" x2="595" y1="743.5859" y2="743.5859"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="388" y="738.52">copy()</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="611" x2="658" y1="767.7188" y2="767.7188"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="658" x2="658" y1="767.7188" y2="780.7188"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="617" x2="658" y1="780.7188" y2="780.7188"/><polygon fill="#4A4A86" points="627,776.7188,617,780.7188,627,784.7188,623,780.7188" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="623" y="762.6528">preload()</text><path d="M693,758.0859 L693,783.0859 L876,783.0859 L876,768.0859 L866,758.0859 L693,758.0859 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M866,758.0859 L866,768.0859 L876,768.0859 L866,758.0859 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="699" y="775.1528">Blocking BF wait this time</text><polygon fill="#4A4A86" points="397,810.8516,387,814.8516,397,818.8516,393,814.8516" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="391" x2="605" y1="814.8516" y2="814.8516"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="403" y="809.7856">callback() /for each period/</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="386" x2="428" y1="843.9844" y2="843.9844"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="428" x2="428" y1="843.9844" y2="856.9844"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="387" x2="428" y1="856.9844" y2="856.9844"/><polygon fill="#4A4A86" points="397,852.9844,387,856.9844,397,860.9844,393,856.9844" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="393" y="838.9185">comp_update_buffer_produce()</text><polygon fill="#4A4A86" points="594,866.9844,604,870.9844,594,874.9844,598,870.9844" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="381" x2="600" y1="870.9844" y2="870.9844"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="616" x2="658" y1="918.75" y2="918.75"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="658" x2="658" y1="918.75" y2="931.75"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="611" x2="658" y1="931.75" y2="931.75"/><polygon fill="#4A4A86" points="621,927.75,611,931.75,621,935.75,617,931.75" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="623" y="913.6841">clear state flags</text><path d="M737,883.9844 L737,938.9844 L1006,938.9844 L1006,893.9844 L996,883.9844 L737,883.9844 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M996,883.9844 L996,893.9844 L1006,893.9844 L996,883.9844 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="743" y="901.0513">Switching to normal on demand mode.</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="743" y="916.1841">Rptr (FPI) advanced on the next copy()</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="743" y="931.3169">Once the first period is processed.</text><polygon fill="#4A4A86" points="392,950.3828,382,954.3828,392,958.3828,388,954.3828" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="386" x2="605" y1="954.3828" y2="954.3828"/><polygon fill="#4A4A86" points="240,964.3828,230,968.3828,240,972.3828,236,968.3828" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234" x2="375" y1="968.3828" y2="968.3828"/><!--MD5=[e58df75e2d9b3b9e3b6ff78a0f9476a0]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
actor drv as "Host\nDriver"
participant ppl as "pipeline"
participant host as "host\ncomponent"
participant hda_dma
participant hda_hw as "HD/A HW"

== Start Trigger ==

drv -> ppl : <<IPC>> trigger (START)
   activate ppl

   ppl -> host : trigger (START)
      activate host

      host -> hda_dma : dma_start()
         activate hda_dma
      host <- - hda_dma
      deactivate hda_dma

      host -> hda_dma : copy(flags = PRELOAD)
         activate hda_dma
         note right: Do not expect Buffer Full yet.
         hda_dma -> hda_dma : state += PRELOAD
         hda_dma -> hda_dma : preload()
            activate hda_dma
            note right : First non-blocking BF test
         deactivate hda_dma
         hda_dma -> hda_dma : state += BF_WAIT
      host <- - hda_dma
      deactivate hda_dma
   ppl <- - host
   deactivate host

   ppl -> ppl : schedule_copy_idle()
      activate ppl
      note right: Scheduler got a ppl task (pre-loader)\n to run in idle
   deactivate ppl
drv <- - ppl
deactivate ppl

== Pre-load ==

-> ppl : pipeline_task
   activate ppl
   ppl -> ppl : pipeline_copy
      activate ppl
      ppl -> host : copy()
         activate host
         host -> hda_dma : copy()
            activate hda_dma
            hda_dma -> hda_dma : preload()
               activate hda_dma
               note right : Blocking BF wait this time
               host <- hda_dma : callback() /for each period/
                  activate host
                  host -> host : comp_update_buffer_produce()
               host - -> hda_dma
               deactivate host
               hda_dma -> hda_dma : clear state flags
note right: Switching to normal on demand mode.\nRptr (FPI) advanced on the next copy()\nOnce the first period is processed.
            deactivate hda_dma
         host <- - hda_dma
         deactivate hda_dma
      ppl <- - host
      deactivate host

@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>