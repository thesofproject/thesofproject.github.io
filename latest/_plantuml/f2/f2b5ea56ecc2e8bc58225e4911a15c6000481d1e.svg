<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="490px" preserveAspectRatio="none" style="width:319px;height:490px;" version="1.1" viewBox="0 0 319 490" width="319px" zoomAndPan="magnify"><defs><filter height="300%" id="f705jy69x5ca2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#33335B" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="227" x="57.5" y="18.6855">Extended manifest build flow</text><!--MD5=[da352c871de30ea3af4336602ad2097c]
cluster rimage--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="183" style="stroke: #000000; stroke-width: 1.5;" width="286" x="22" y="153.6406"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="141" y="170.1738">rimage</text><!--MD5=[a081bb95bf989a9f340eb378b1ba9d90]
class ext_man_write--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="131.0156" id="ext_man_write" style="stroke: #33335B; stroke-width: 1.5;" width="253" x="38.5" y="189.6406"/><ellipse cx="120.75" cy="205.6406" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M123.5156,201.5156 Q123.6719,201.2969 123.8594,201.1875 Q124.0469,201.0781 124.2656,201.0781 Q124.6406,201.0781 124.875,201.3438 Q125.1094,201.5938 125.1094,202.2031 L125.1094,203.6563 Q125.1094,204.2656 124.875,204.5313 Q124.6406,204.7969 124.2656,204.7969 Q123.9219,204.7969 123.7188,204.5938 Q123.5156,204.4063 123.4063,203.8906 Q123.3594,203.5313 123.1719,203.3438 Q122.8438,202.9688 122.2344,202.75 Q121.625,202.5313 121,202.5313 Q120.2344,202.5313 119.5938,202.8594 Q118.9688,203.1875 118.4688,203.9375 Q117.9844,204.6875 117.9844,205.7188 L117.9844,206.8125 Q117.9844,208.0469 118.875,208.875 Q119.7656,209.6875 121.3594,209.6875 Q122.2969,209.6875 122.9531,209.4375 Q123.3438,209.2813 123.7656,208.8438 Q124.0313,208.5781 124.1719,208.5 Q124.3281,208.4219 124.5313,208.4219 Q124.8594,208.4219 125.1094,208.6875 Q125.375,208.9375 125.375,209.2813 Q125.375,209.625 125.0313,210.0313 Q124.5313,210.6094 123.7344,210.9375 Q122.6563,211.3906 121.3594,211.3906 Q119.8438,211.3906 118.6406,210.7656 Q117.6563,210.2656 116.9688,209.2031 Q116.2813,208.125 116.2813,206.8438 L116.2813,205.6875 Q116.2813,204.3594 116.8906,203.2188 Q117.5156,202.0625 118.6094,201.4531 Q119.7031,200.8281 120.9375,200.8281 Q121.6719,200.8281 122.3125,201 Q122.9688,201.1563 123.5156,201.5156 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="141.25" y="210.5508">ext_man_write</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="290.5" y1="221.6406" y2="221.6406"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="44.5" y="237.0596">1. Create .ri.xman file</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="44.5" y="250.8955">2. Find elf file with .fw_metadata section</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="44.5" y="264.7314">3. Read .fw_metadata section</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="44.5" y="278.5674">4. Build ext_man_header</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="241" x="44.5" y="292.4033">5. Validate sum of elements size with section size</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="44.5" y="306.2393">6. Save output to .ri.xman file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="290.5" y1="312.6563" y2="312.6563"/><!--MD5=[5c970644e5b7143556414cadba97c378]
class firmware_elf_file--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="99.3438" id="firmware_elf_file" style="stroke: #33335B; stroke-width: 1.5;" width="127" x="101.5" y="30.6406"/><ellipse cx="118.3" cy="46.6406" fill="#DA70D6" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M117.7375,47.4531 L117.7375,49.9375 L119.4719,49.9375 Q120.0969,49.9375 120.3469,50.1719 Q120.6125,50.4063 120.6125,50.7969 Q120.6125,51.1719 120.3469,51.4063 Q120.0969,51.6406 119.4719,51.6406 L115.7688,51.6406 Q115.1594,51.6406 114.8938,51.4063 Q114.6281,51.1719 114.6281,50.7813 Q114.6281,50.4063 114.8938,50.1719 Q115.1594,49.9375 115.7688,49.9375 L116.0344,49.9375 L116.0344,43.2813 L115.7688,43.2813 Q115.1594,43.2813 114.8938,43.0469 Q114.6281,42.8125 114.6281,42.4219 Q114.6281,42.0469 114.8938,41.8125 Q115.1594,41.5781 115.7688,41.5781 L123.7844,41.5781 L123.7844,44.1719 Q123.7844,44.7813 123.5344,45.0469 Q123.3,45.3125 122.925,45.3125 Q122.55,45.3125 122.3156,45.0625 Q122.0813,44.7969 122.0813,44.1719 L122.0813,43.2813 L117.7375,43.2813 L117.7375,45.75 L119.2219,45.75 Q119.2219,45.0781 119.3469,44.8906 Q119.6125,44.4844 120.0813,44.4844 Q120.4563,44.4844 120.6906,44.75 Q120.925,45.0156 120.925,45.625 L120.925,47.5781 Q120.925,48.2031 120.6906,48.4688 Q120.4563,48.7188 120.0813,48.7188 Q119.6125,48.7188 119.3469,48.3125 Q119.2219,48.125 119.2219,47.4531 L117.7375,47.4531 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="132.7" y="51.5508">firmware_elf_file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="102.5" x2="227.5" y1="62.6406" y2="62.6406"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="107.5" y="78.0596">suffix:</text><ellipse cx="112.5" cy="105.3125" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="121.5" y="109.7314">FW metadata section</text><ellipse cx="112.5" cy="119.1484" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="121.5" y="123.5674">other sections</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="102.5" x2="146.5" y1="91.3945" y2="91.3945"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="146.5" y="95.3955">Content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="183.5" x2="227.5" y1="91.3945" y2="91.3945"/><!--MD5=[d9fc180130ed2022e7c2981ad5d1b604]
class ext_man_file--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="99.3438" id="ext_man_file" style="stroke: #33335B; stroke-width: 1.5;" width="170" x="80" y="380.6406"/><ellipse cx="125.75" cy="396.6406" fill="#DA70D6" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M125.1875,397.4531 L125.1875,399.9375 L126.9219,399.9375 Q127.5469,399.9375 127.7969,400.1719 Q128.0625,400.4063 128.0625,400.7969 Q128.0625,401.1719 127.7969,401.4063 Q127.5469,401.6406 126.9219,401.6406 L123.2188,401.6406 Q122.6094,401.6406 122.3438,401.4063 Q122.0781,401.1719 122.0781,400.7813 Q122.0781,400.4063 122.3438,400.1719 Q122.6094,399.9375 123.2188,399.9375 L123.4844,399.9375 L123.4844,393.2813 L123.2188,393.2813 Q122.6094,393.2813 122.3438,393.0469 Q122.0781,392.8125 122.0781,392.4219 Q122.0781,392.0469 122.3438,391.8125 Q122.6094,391.5781 123.2188,391.5781 L131.2344,391.5781 L131.2344,394.1719 Q131.2344,394.7813 130.9844,395.0469 Q130.75,395.3125 130.375,395.3125 Q130,395.3125 129.7656,395.0625 Q129.5313,394.7969 129.5313,394.1719 L129.5313,393.2813 L125.1875,393.2813 L125.1875,395.75 L126.6719,395.75 Q126.6719,395.0781 126.7969,394.8906 Q127.0625,394.4844 127.5313,394.4844 Q127.9063,394.4844 128.1406,394.75 Q128.375,395.0156 128.375,395.625 L128.375,397.5781 Q128.375,398.2031 128.1406,398.4688 Q127.9063,398.7188 127.5313,398.7188 Q127.0625,398.7188 126.7969,398.3125 Q126.6719,398.125 126.6719,397.4531 L125.1875,397.4531 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="146.25" y="401.5508">ext_man_file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="81" x2="249" y1="412.6406" y2="412.6406"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="86" y="428.0596">suffix: .ri.xman</text><ellipse cx="91" cy="455.3125" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="100" y="459.7314">ext_man_header</text><ellipse cx="91" cy="469.1484" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="100" y="473.5674">.fw_metadata section content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="81" x2="146.5" y1="441.3945" y2="441.3945"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="146.5" y="445.3955">Content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="183.5" x2="249" y1="441.3945" y2="441.3945"/><!--MD5=[1f203a67a71b62617c784aa7b434e41e]
link firmware_elf_file to ext_man_write--><path d="M165,129.7906 C165,146.6906 165,165.9906 165,184.2606 " fill="none" id="firmware_elf_file-&gt;ext_man_write" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="165,189.3906,169,180.3906,165,184.3906,161,180.3906,165,189.3906" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[434e5b391b4dbc98a671594c6bc14f89]
link ext_man_write to ext_man_file--><path d="M165,321.0506 C165,338.9506 165,358.1706 165,375.3606 " fill="none" id="ext_man_write-&gt;ext_man_file" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="165,380.6306,169,371.6306,165,375.6306,161,371.6306,165,380.6306" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[13c78b0ef8882375cf928dd470d323f5]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}

title Extended manifest build flow

class firmware_elf_file << (F, orchid) >> {
   suffix:
   - - Content - -
   +FW metadata section
   +other sections
}

rectangle rimage {
   class ext_man_write {
      1. Create .ri.xman file
      2. Find elf file with .fw_metadata section
      3. Read .fw_metadata section
      4. Build ext_man_header
      5. Validate sum of elements size with section size
      6. Save output to .ri.xman file
   }
}

class ext_man_file << (F, orchid) >> {
   suffix: .ri.xman
   - - Content - -
   + ext_man_header
   + .fw_metadata section content
}

firmware_elf_file -down-> ext_man_write
ext_man_write -down-> ext_man_file

@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_302-b08
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>