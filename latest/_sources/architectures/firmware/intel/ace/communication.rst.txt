.. _intel-ace-communication:

Communication
#############

Memory Windows
**************

Various SW/FW interfaces require exchange of relatively large portions of data
and use shared memory mechanism for this. Parts of DSP internal memory are
exposed to the host with either Read or Read/Write access through so called
memory windows.

Number of memory windows is specified by the platform configuration.

+-----------+-------------------------------+
| Platform  | Host memory window count      |
|           |                               |
+===========+===============================+
| MTP       | 6                             |
+-----------+-------------------------------+

IPC
***

IPC to Host CPU
===============

Commands are processed by the DSP FW synchronously meaning that downlink
communication channel is busy until processing is complete and response is sent
back via uplink communication channel.

Uplink communication channel is also used by DSP FW to send notifications to the
host. There may be only one message in the uplink communication channel, either
a response to the command or a notification therefore outstanding notifications
are queued by the FW and sent once the channel is free.

Downlink and uplink mailboxes are used to transfer command, response, and
notification payload while message headers are exchanged using IPC HW registers.
A mailbox is a buffer in the DSP local SRAM exposed via HW memory window.

IPC to CSE
==========

DSP FW elements (ROM ext) with Converged Security Engine using command/response
(IPC) interface in order to verify integrity of the FW image.

Reference:

-  `[Intel internal] ACE1.x MTL FW Load and Authentication FAS <https://docs.intel.com/documents/iparch/ace/ACE%20FAS/ACE%20FW/Integration%20Specs/MTP/MTP_ACE_Load_And_Auth_Integration_FAS.html>`__

IPC to PMC
==========

DSP FW reports the power state of the DSP subsystem to PMC in order to
participate in the platform power management logic.

Reference:

-  `[Intel internal] PMC FW Mailbox HAS <https://docs.intel.com/documents/pch_doc/PMC/FW/FW_Mailbox_HAS.html>`__
-  `[Intel internal] MTL PMC IOE SOC <https://docs.intel.com/documents/pch_doc/MTP/Feature%20HAS/MTL_PMC_PMC_IOE_SOC.html>`__
