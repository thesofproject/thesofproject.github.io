<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MPP Scheduling &mdash; SOF Project 2.5.0 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/sof-custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/sof-favicon-16x16.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Asynchronous Messaging Service" href="async_messaging.html" />
    <link rel="prev" title="Media Processing Pipelines Overview" href="mpp_overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            SOF Project
              <img src="../../../../_static/logo_sof_white_200w.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://sofproject.org">SOF project website</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/index.html">Introduction to the SOF Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../introduction/index.html#sdk-introduction-and-overview">SDK Introduction and Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../introduction/index.html#sof-source-code-tools-and-topologies">SOF source code, tools, and topologies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../introduction/index.html#host-os-drivers">Host OS Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../introduction/index.html#firmware-toolchain">Firmware Toolchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../introduction/index.html#dsp-emulator">DSP Emulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../introduction/index.html#general-faq">General FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../introduction/index.html#toolchain-faq">Toolchain FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/index.html">Getting Started Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index.html#build-sof">Build SOF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/build-guide/build-from-scratch.html">Build toolchains and SOF from sources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-from-scratch.html#step-1-set-up-the-workspace-directory">Step 1. Set up the workspace directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-from-scratch.html#step-2-set-up-build-environment">Step 2. Set up build environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-from-scratch.html#step-3-build-toolchains-from-source">Step 3. Build toolchains from source</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-from-scratch.html#step-4-build-and-sign-firmware-binaries">Step 4. Build and sign firmware binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-from-scratch.html#step-5-build-topology-and-tools">Step 5. Build topology and tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-from-scratch.html#step-6-build-linux-kernel">Step 6. Build Linux kernel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-docker.html">Build SOF with Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-docker.html#set-up-the-workspace-directory">Set up the workspace directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-docker.html#set-up-docker">Set up Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-docker.html#build-firmware-binaries-with-docker">Build firmware binaries with Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-docker.html#build-topology-and-tools-with-docker">Build topology and tools with Docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/build-guide/build-3rd-party-toolchain.html">Build SOF with a 3rd Party Toolchain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-3rd-party-toolchain.html#cadence-tensilica-xtensa-c-c-compiler-xcc">Cadence® Tensilica® Xtensa® C/C++ Compiler (XCC)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-zephyr.html">Build SOF with Zephyr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-zephyr.html#prepare">Prepare</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-zephyr.html#clone-and-initialize-sof-project">Clone and initialize SOF project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-zephyr.html#check-out-and-build-using-python-convenience-script">Check out and build using Python convenience script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-zephyr.html#check-out-and-build-using-west-tool-directly">Check out and build using west tool directly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-zephyr.html#run">Run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/build-guide/build-with-zephyr.html#troubleshoot">Troubleshoot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index.html#set-up-sof-on-a-linux-machine">Set up SOF on a Linux machine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/setup_linux/prepare_build_environment.html">Set up a Development Environment to Build the Kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/setup_linux/install_locally.html">Install the Kernel Locally</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/install_locally.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/install_locally.html#build-and-install-the-kernel">Build and install the kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/install_locally.html#update-and-rebuild">Update and rebuild</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/install_locally.html#remove-the-kernel">Remove the kernel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/setup_linux/setup_ktest_environment.html">Set up a Ktest-based Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/setup_ktest_environment.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/setup_ktest_environment.html#set-up-a-target">Set up a target</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/setup_ktest_environment.html#configure-ssh-without-password">Configure SSH without password</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_linux/setup_ktest_environment.html#build-and-install-the-kernel-with-ktest">Build and install the kernel with ktest</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index.html#set-up-sof-on-a-special-device">Set up SOF on a special device</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/setup_special_device/setup_minnowboard_turbot.html">Set up SOF on MinnowBoard Turbot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_special_device/setup_minnowboard_turbot.html#minnowboard-resources">MinnowBoard resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_special_device/setup_minnowboard_turbot.html#development">Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/setup_special_device/setup_up_2_board.html">Set up SOF on Up Squared board with Hifiberry DAC+ (STD)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_special_device/setup_up_2_board.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/setup_special_device/setup_up_2_board.html#setup-instructions">Setup Instructions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index.html#debug-audio-issues-on-intel-platforms">Debug Audio issues on Intel platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/intel_debug/introduction.html">Overview of Intel hardware platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/introduction.html#acpi-platforms-introduced-before-and-up-to-2015">ACPI platforms (introduced before and up to 2015)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/introduction.html#pci-devices-introduced-after-2016">PCI devices (introduced after 2016)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/introduction.html#user-space-and-filesystem-requirements">User space and filesystem requirements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html">Suggestions before filing an SOF bug</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#run-alsa-info">Run alsa-info</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#disable-sof-on-pci-hdaudio-devices-to-test-audio-playback">Disable SOF on PCI/HDaudio devices to test audio playback</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#try-booting-into-windows-first-then-reboot-into-linux">Try booting into Windows first, then reboot into Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#reverse-engineer-the-windows-audio-driver">Reverse-engineer the Windows audio driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#make-sure-the-me-is-enabled">Make sure the ME is enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#test-at-the-alsa-hw-device-level">Test at the ALSA ‘hw’ device level</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#verify-mixer-settings">Verify mixer settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#enable-dynamic-debug">Enable dynamic debug</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#install-sof-logger">Install sof-logger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#digital-mic-issues">Digital mic issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/intel_debug/suggestions.html#es8336-support">ES8336 support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index.html#sof-on-nxp-platforms">SOF on NXP platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/nxp/sof_imx_user_guide.html">SOF User Guide on NXP i.MX8 platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/nxp/sof_imx_user_guide.html#supported-nxp-platforms">Supported NXP platforms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/nxp/sof_imx_user_guide.html#toolchain">Toolchain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/nxp/sof_imx_user_guide.html#quick-run-with-sof-from-i-mx8-board-support-package">Quick run with SOF from i.MX8 Board Support Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/nxp/sof_imx_user_guide.html#build-sof-binaries-from-sources">Build SOF binaries from sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/nxp/sof_imx_user_guide.html#audio-scenarios">Audio scenarios</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index.html#building-loadable-modules-using-lmdk">Building loadable modules using LMDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../getting_started/loadable_modules/lmdk_user_guide.html">Loadable modules build guide using LMDK</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/loadable_modules/lmdk_user_guide.html#what-is-lmdk">What is LMDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../getting_started/loadable_modules/lmdk_user_guide.html#how-to-build">How to build</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../host/index.html">Host Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html">SOF Linux Driver Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#driver-probe">Driver Probe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#sof-platform-driver">SOF Platform Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#ipc-processing">IPC Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#pcm-driver">PCM Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#power-management">Power Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#intel-drivers">Intel Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#support-for-high-definition-audio-hd-audio">Support for High Definition Audio (HD-Audio)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#kernel-configuration-kconfig">Kernel Configuration/Kconfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../host/linux_driver/architecture/sof_driver_arch.html#debug-options">Debug Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Firmware Architecture</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../sof-common/index.html">SOF Common Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sof-common/components/index.html">Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sof-xtos/index.html">SOF with XTOS Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sof-xtos/overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sof-xtos/mem-mgmt.html">Memory Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sof-xtos/pm-runtime/index.html">Power Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sof-xtos/schedulers.html">Schedulers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sof-xtos/drivers/index.html">Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sof-xtos/pipelines/index.html">Pipelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sof-xtos/kd_integration/index.html">Keyword detection</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">SOF with Zephyr Architecture</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app_layer/index.html">Application Layer</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Media Processing Pipelines Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rtos_layer/index.html">RTOS Layer Infrastructure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../zephyr_api_integration.html">Zephyr API Integration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../intel/index.html">Vendor-Specific Architecture Information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../intel/cavs/index.html">Intel cAVS Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/ace/index.html">Intel ACE Architecture</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../platforms/index.html">Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../platforms/index.html#supported-platforms">Supported Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../platforms/index.html#minimum-platform-requirements">Minimum Platform Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../platforms/index.html#footprint">Footprint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../platforms/index.html#dsp-clock-speed">DSP Clock Speed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../platforms/index.html#toolchain">Toolchain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../platforms/index.html#platform-specific-information">Platform Specific Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../platforms/intel-legacy/index.html">Intel Hifi2-EP Platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-legacy/merrifield/index.html">Intel Merrifield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-legacy/baytrail/index.html">Intel Bay Trail / Cherry Trail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-legacy/broadwell/index.html">Intel Broadwell</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../platforms/intel-cavs/index.html">Intel CAVS Platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-cavs/commons/index.html">CAVS Commons</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-cavs/apollolake/index.html">Intel Apollo Lake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-cavs/cannonlake/index.html">Intel Cannon Lake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-cavs/icelake/index.html">Intel Ice Lake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../platforms/intel-cavs/tigerlake/index.html">Intel Tiger Lake</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../algos/index.html">Algorithms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../algos/index.html#supplied-processing-algorithms">Supplied Processing Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../algos/index.html#algorithm-specific-information">Algorithm Specific Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../algos/demux/demux.html">Multiplexer/Demultiplexer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/demux/demux.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html">Equalizers, IIR and FIR</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#preparations">Preparations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#frequency-response-measurement">Frequency response measurement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#equalizer-design">Equalizer design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#fir-equalizer">FIR equalizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#iir-equalizer">IIR equalizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#combined-iir-and-fir">Combined IIR and FIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#exporting-coefficients-to-sof">Exporting coefficients to SOF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#testing-the-response-with-sof-ctl">Testing the response with sof-ctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#using-the-eq-settings-in-topology">Using the EQ settings in topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/eq/equalizers_tuning.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../algos/src/sample_rate_conversion.html">Sample Rate Conversion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/src/sample_rate_conversion.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/src/sample_rate_conversion.html#use-of-src-generator-tool">Use of SRC generator tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/src/sample_rate_conversion.html#test-the-src-component">Test the SRC component</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/src/sample_rate_conversion.html#polyphase-decomposition">Polyphase decomposition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/src/sample_rate_conversion.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../algos/tdfb/time_domain_fixed_beamformer.html">Time Domain Fixed Beamformer (TDFB)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/tdfb/time_domain_fixed_beamformer.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/tdfb/time_domain_fixed_beamformer.html#beamformer-types">Beamformer types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/tdfb/time_domain_fixed_beamformer.html#microphone-array-geometries">Microphone array geometries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/tdfb/time_domain_fixed_beamformer.html#filter-bank-design-procedure">Filter bank design procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/tdfb/time_domain_fixed_beamformer.html#design-examples">Design examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../algos/tdfb/time_domain_fixed_beamformer.html#simulation">Simulation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_guides/index.html">Developer Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/introduction.html">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/introduction.html#sof-core-concepts">SOF Core Concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/firmware/index.html">Firmware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/firmware/component-tutorial/tut-intro.html">Hello World Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/component-tutorial/tut-i-basic-fw-code.html">Part I - Adding a Component Code to FW</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/component-tutorial/tut-ii-topology.html">Part II - Modifying the Topology &amp; Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/component-tutorial/tut-iii-runtime-params.html">Part III - Adding Run-time Parameter Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/component-tutorial/tut-iv-exceptions.html">Part IV - Working with Exception Reports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/firmware/porting.html">Porting Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/porting.html#architecture-porting-guide">Architecture Porting Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/porting.html#platform-porting-guide">Platform Porting Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/firmware/cmake.html">CMake Arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/cmake.html#firmware-unit-tests">Firmware &amp; Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/cmake.html#firmware">Firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/cmake.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/cmake.html#host-testbench">Host Testbench</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html">Async Messaging Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#message-type-ids">Message Type IDs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#message-handling">Message Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#processing-in-a-consumer-callback">Processing in a consumer callback</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#message-filtering-mechanism">Message Filtering Mechanism</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#passing-pointers-in-asynchronous-messages">Passing Pointers In Asynchronous Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#one-way-messages">One-way Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#two-way-messages-example-1">Two-way Messages - Example #1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#two-way-messages-example-2">Two-way Messages - Example #2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#max-message-size">Max message size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/firmware/async_messaging_best_practices.html#queue-is-full">Queue is Full</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/unit_tests.html">Unit Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/unit_tests.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/unit_tests.html#configuring-for-unit-tests">Configuring for unit tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/unit_tests.html#example-running-tests-for-apl">Example: Running tests for APL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/unit_tests.html#compiling-unit-tests-without-a-cross-compilation-toolchain">Compiling unit tests without a cross-compilation toolchain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/unit_tests.html#wrapping-objects-for-unit-tests">Wrapping objects for unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/unit_tests.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/xtrun/index.html">Xtensa Simulator (xt-run)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/xtrun/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/xtrun/index.html#standalone-programs">Standalone programs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/xtrun/index.html#unit-tests">Unit tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/topology/topology.html">SOF Topology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#topology-ingredients">1. Topology Ingredients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#widgets">1.1 Widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#tokens-vendor-tuples">1.2 Tokens/Vendor Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#kcontrols">1.3 Kcontrols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#pipelines">1.4 Pipelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#backend-dai">1.5 Backend DAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#backend-dai-link-config">1.6 Backend DAI link Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#dsp-core-index">1.7 DSP Core Index</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#create-a-new-topology">2. Create a new topology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#example-topology-with-single-pipeline">2.1 Example topology with single pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#example-topology-with-multiple-pipelines">2.2 Example topology with multiple pipelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#debug-topology">3. Debug topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology/topology.html#acronyms">4. Acronyms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html">Topology 2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#ingredients">Ingredients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#objects">Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#arguments-in-top-level-configuration-files">Arguments in top-level configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#includes">Includes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#simple-machine-topology">Simple machine topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#conditional-includes">Conditional includes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#building-2-0-configuration-files">Building 2.0 configuration files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#topology-reminders">Topology reminders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/topology2/topology2.html#alsaconf-reminders">Alsaconf reminders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/uuid/index.html">UUID Usage in SOF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/uuid/index.html#why-uuids">Why UUIDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/uuid/index.html#uuid-allocation">UUID allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/uuid/index.html#uuid-in-topology">UUID in topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/uuid/index.html#linux-topology-driver">Linux topology driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/uuid/index.html#uuid-arrays-stored-section">UUID arrays stored section</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/uuid/index.html#uuid-to-component-driver-mapping">UUID to component driver mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/uuid/index.html#abi-alignment-for-uuid-support">ABI alignment for UUID support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/debugability/index.html">Debugability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/debugability/traces/index.html">Traces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/traces/index.html#building-processing-traces">Building &amp; Processing Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/traces/index.html#enabling-traces">Enabling Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/traces/index.html#adding-traces">Adding Traces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/debugability/logger/index.html">Logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/logger/index.html#logger-usage">Logger usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/logger/index.html#trace-filtering">Trace filtering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/debugability/coredump-reader/index.html">Coredump-reader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/coredump-reader/index.html#coredump-reader-usage">Coredump-reader usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/coredump-reader/index.html#usage-with-linux-sof-driver">Usage with Linux SOF Driver</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/debugability/probes/index.html">Probes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/probes/index.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/probes/index.html#enabling-probes">Enabling Probes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/probes/index.html#data-extraction">Data extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/probes/index.html#data-parsing">Data parsing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/probes/index.html#simple-logging-case">Simple logging case</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/debugability/ri-info/index.html">sof-ri-info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/ri-info/index.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/debugability/perf-counters/index.html">Performance Counters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/perf-counters/index.html#performance-counters-usage">Performance Counters usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/debugability/perf-counters/index.html#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/tuning/sof-ctl.html">Runtime Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/tuning/sof-ctl.html#find-out-effect-numids">Find out effect numids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/tuning/sof-ctl.html#example-equalizer-settings">Example equalizer settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/tuning/sof-ctl.html#help">Help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/rimage/index.html">Rimage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/rimage/extended_manifest.html">Extended Manifest</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/rimage/extended_manifest.html#build-flow">Build flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/rimage/extended_manifest.html#add-a-new-element">Add a new element</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/rimage/index.html#build-flow">Build flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/linux_driver/index.html">SOF Linux Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/linux_driver/third_party/index.html">Third Party Features User Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/linux_driver/third_party/keyword_detect/keyword_detect.html">Keyword Detection Driver Implementation and User Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html">SOF VirtIO design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#general-information">General information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#id1">SOF VirtIO design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#communication-channels">Communication channels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#topology">Topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#dpcm-audio-routing">DPCM audio routing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#implementation">Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#initialization">Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#streaming">Streaming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/virtualization/virtualization.html#deactivation">Deactivation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/virtualization/running.html">Run SOF VirtIO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/running.html#general-information">General information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/running.html#create-a-vm-image">1. Create a VM image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/running.html#build-the-linux-kernel">2. Build the Linux kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/running.html#build-qemu">3. Build QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/running.html#build-the-sof-firmware">4. Build the SOF firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/virtualization/running.html#run-qemu">5. Run QEMU</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/fuzzing/index.html">Fuzzing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/fuzzing/fuzzing_in_docker.html">Fuzzing in Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/fuzzing/fuzzing_in_docker.html#instructions">Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/fuzzing/fuzzing_in_docker.html#important-notes">Important notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/fuzzing/testbench_afl_fuzzing.html">Build a Fuzzing Testbench with AFL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/fuzzing/testbench_afl_fuzzing.html#install-afl">Install AFL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/fuzzing/testbench_afl_fuzzing.html#build-a-testbench-with-afl-instrumentation">Build a testbench with AFL instrumentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/fuzzing/testbench_afl_fuzzing.html#run-afl">Run AFL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/fuzzing/testbench_afl_fuzzing.html#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/testbench/index.html">Testbench</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/testbench/build_testbench.html">Build and Run Testbench</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/testbench/build_testbench.html#host-testbench-sh">host-testbench.sh</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/testbench/debug_in_testbench.html">Debug Component in Testbench</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/testbench/debug_in_testbench.html#gdb-and-ddd">GDB and DDD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/testbench/debug_in_testbench.html#valgrind">Valgrind</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/testbench/debug_in_testbench.html#gprof">Gprof</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/testbench/prepare_new_component.html">Prepare a New Component for Testbench</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/testbench/test_audio_quality.html">Test Audio Quality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/add_new_arch.html">Adding a new DSP architecture to SOF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/add_new_arch.html#method-1-new-hal">Method 1 - New HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/add_new_arch.html#method-2-use-existing-rtos">Method 2 - Use existing RTOS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../developer_guides/index.html#technical-notes">Technical Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/tech/build-cmocka.html">Build Cmocka for Xtensa</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/tech/build-cmocka.html#cmocka-fork">Cmocka fork</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/tech/build-cmocka.html#simple-build-on-linux">Simple build on Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/tech/build-cmocka.html#cross-platform-build">Cross-platform build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../developer_guides/tech/compile_wsl.html">Build on Windows 10 with WSL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/tech/compile_wsl.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/tech/compile_wsl.html#enable-32-bit-binaries">Enable 32-bit binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/tech/compile_wsl.html#fix-stat-in-32-bit-binaries">Fix stat in 32-bit binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../developer_guides/tech/compile_wsl.html#compile">Compile</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release.html">Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../release.html#firmware-and-tools">Firmware and Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../release.html#git">Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../release.html#source-and-binary-releases">Source and Binary Releases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../release.html#linux-driver">Linux Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/index.html">Contributing to the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../contribute/contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/contribute_guidelines.html#dco-sign-off-methods">DCO Sign-Off Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/contribute_guidelines.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contribute/doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#headings">Headings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#multi-column-lists">Multi-column lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#file-names-and-commands">File names and Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/doc_guidelines.html#tabs-spaces-and-indenting">Tabs, spaces, and indenting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contribute/dox-source-code.html">Documenting the Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/dox-source-code.html#basic-rules">Basic Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/dox-source-code.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html">Bug Tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#life-cycle-of-a-bug">Life Cycle of a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#labels">Labels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#solution-labels">Solution Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#priority-labels">Priority Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#plaform-and-branch-labels">Plaform and Branch Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#other-optional-labels">Other optional Labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#how-to-report-a-bug">How to Report a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/bug-tracking.html#how-to-close-a-bug">How to Close a Bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contribute/process/docbuild.html">SOF Documentation Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#documentation-overview">Documentation overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#set-up-documentation-working-folders">Set up documentation working folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#install-documentation-tools">Install documentation tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#documentation-presentation-theme">Documentation presentation theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#run-documentation-processors">Run documentation processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#publish-content">Publish content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#installation-troubleshooting">Installation troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#windows-troubleshooting">Windows troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/docbuild.html#diagram-compilation-troubleshooting">Diagram compilation troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contribute/process/abiprocess.html">SOF ABI Change Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/abiprocess.html#sof-abi-definitions">SOF ABI definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/abiprocess.html#change-process">Change process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/abiprocess.html#document-modified-fields">Document modified fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/process/abiprocess.html#abi-change-approvers">ABI change approvers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/process/abiprocess.html#tsc">TSC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/process/abiprocess.html#sof-driver">SOF driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contribute/linux/development_tree.html">Linux SOF drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#instructions-for-sof-developers">Instructions for SOF developers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#abi-changes">ABI changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#development-branch">Development branch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#rebasing-tree">Rebasing tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#upstream-merges">Upstream merges</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#development-flow">Development flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#sof-linux-maintainers">SOF Linux maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#sof-maintainers-process">SOF maintainers process</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../contribute/linux/development_tree.html#development-summary">Development summary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tsc/index.html">Technical Steering Committee (TSC)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tsc/representatives.html">TSC Representatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tsc/meetings.html">TSC Meetings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../maintainers/index.html">SOF admin, maintainers and code owners</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../maintainers/admin.html">SOF admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../maintainers/merge_rights.html">Merge rights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../maintainers/code_owners.html">SOF code owners</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/index.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/uuid-api.html">UUID API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/dma-drivers-api.html">DMA Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/dai-drivers-api.html">DAI Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/pm-runtime-api.html">PM Runtime API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/platform-api.html">Platform API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/memory-alloc-api.html">Memory Allocation API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/audio-stream-api.html">Audio Stream API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/component-api.html">Component API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/component-ext-api.html">Component API Ext</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/uapi.html">uAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../presentations/index.html">Presentations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../presentations/index.html#sof-mentions">SOF Mentions</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">SOF Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Architecture</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Firmware Architecture</a></li>
          <li class="breadcrumb-item"><a href="../index.html">SOF with Zephyr Architecture</a></li>
          <li class="breadcrumb-item"><a href="index.html">Media Processing Pipelines Layer</a></li>
      <li class="breadcrumb-item active">MPP Scheduling</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mpp-scheduling">
<span id="sof-zephyr-mpp-scheduling"></span><h1>MPP Scheduling<a class="headerlink" href="#mpp-scheduling" title="Permalink to this headline">¶</a></h1>
<p>This section describes MPP scheduling flows, task types and their usage in SOF
based on Zephyr API.</p>
<p>MPP Scheduling defines four task categories:</p>
<ul class="simple">
<li><p>Low Latency audio data processing tasks (LL) - high priority,</p></li>
<li><p>Tasks with Budget (TwB) - medium priority,</p></li>
<li><p>audio Data Processing tasks (DP) - low priority,</p></li>
<li><p>background (idle) priority tasks</p></li>
</ul>
<p><strong>NOTE:</strong> As of today, only LL tasks has been integrated with Zephyr. TwB, DP
and idle tasks are work in progress (WIP).</p>
<p>The role of MPP Scheduling is limited to task threads definition, configuration
and state management. The thread scheduling itself is handled by Zephyr.</p>
<p>MPP Scheduling is designed to:</p>
<ul class="simple">
<li><p>address strict real-time requirements,</p>
<ul>
<li><p>i.e. to avoid under/overflows on isochronous interfaces such as
I2S,</p></li>
</ul>
</li>
<li><p>provide predictable latency,</p></li>
<li><p>reduce amount of buffering needed,</p></li>
</ul>
<p>MPP Scheduling defines two tasks categories:</p>
<p>Task categories characteristic:</p>
<ul class="simple">
<li><p>LL tasks for latency sensitive audio data processing,</p>
<ul>
<li><p>LL tasks are organized in queues shared between component instances,</p></li>
<li><p>there is one non-preemptive high priority LL Thread assigned to exactly
one core. For example, for HW configuration with 4 cores there will be 4
LL Threads,</p></li>
<li><p>each queue is statically linked to one LL Thread and all queue tasks will
be processed on a core that LL Thread is assigned to,</p></li>
<li><p>there are multiple queues per LL Thread which represent a priority and
guarantee tasks execution order,</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>TwB for medium priority processing (e.g., IPC/IDC message handling),</p>
<ul>
<li><p>each TwB is scheduled as a separate preemptive thread,</p></li>
<li><p>TwB has assigned budget for processing that is refreshed in each sys tick
(<a class="reference external" href="https://docs.zephyrproject.org/latest/kernel/services/threads/index.html">Zephyr Thread time slicing</a>),</p></li>
<li><p>TwB priority is dropped to low when budget is consumed,</p></li>
</ul>
</li>
<li><p>DP tasks for low priority audio processing,</p>
<ul>
<li><p>DP tasks are scheduled based on earliest deadline first (EDF) algorithm,</p></li>
<li><p>each DP task is scheduled as a separate preemptive thread,</p></li>
<li><p>DP tasks can be assigned to one of the available cores,</p></li>
</ul>
</li>
<li><p>idle tasks for background processing,</p>
<ul>
<li><p>idle tasks are scheduled as separate preemptive threads,</p></li>
<li><p>they have the lowest priority and are scheduled when all other tasks
completed their processing,</p></li>
<li><p>they are used in Fast Mode. For example, in data draining from firmware to
host.</p></li>
</ul>
</li>
</ul>
<p><strong>NOTE:</strong> Each task is assigned by MPP Scheduling to one core. Tasks are
executed by the assigned core till termination.</p>
<p><strong>NOTE:</strong> For Earliest Deadline First (EDF) algorithm description, please refer
to link:
<a class="reference external" href="https://en.wikipedia.org/wiki/Earliest_deadline_first_scheduling">Wikipedia</a>.</p>
<p><strong>NOTE:</strong> For Zephyr Scheduling description, please refer to link:
<a class="reference external" href="https://docs.zephyrproject.org/latest/kernel/services/scheduling/index.html">Zephyr
Scheduling</a>.</p>
<figure class="align-default" id="id1">
<p class="plantuml">
<object data="../../../../_images/plantuml-602fdf677d82b9497c8b892ebf956008cd360b64.svg" type="image/svg+xml" style="width:1094px;height:810px;">
<img src="../../../../_images/plantuml-602fdf677d82b9497c8b892ebf956008cd360b64.png" alt="&#64;startuml
allowmixing

scale max 1280 width

package “RTOS layer” {

	package &quot;SOF kernel extension&quot; as KERNEL_EXTENSION {
		package &quot;MPP Scheduling&quot; as MPP_SCHEDULING {
			component &quot;LL Tasks&quot; as LL_TASKS
			component &quot;DP Tasks&quot; as DP_TASKS
			component &quot;Tasks with Budget&quot; as TWB
			component &quot;Idle Tasks&quot; as IDLE_TASKS

			LL_TASKS -[hidden]right- DP_TASKS
			DP_TASKS -[hidden]right- TWB
			TWB -[hidden]right- IDLE_TASKS
		}
	}

	package &quot;Zephyr&quot; as ZEPHYR_LAYER {
		package &quot;Services&quot; as SERVICES {
			component &quot;Timing&quot; as TIMING
			component &quot;Interrupts&quot; as INTERRUPTS
		}

		package &quot;Scheduling&quot; as SCHEDULING {
			component &quot;Threads&quot; as THREADS
			component &quot;EDF Scheduler&quot; as EDF
			component &quot;Time-Slice Scheduler&quot; as TIME_SLICE_SCHEDULING

			THREADS -[hidden]right- EDF
			EDF -[hidden]right- TIME_SLICE_SCHEDULING
		}

		package &quot;Drivers&quot; as DRIVERS {
			component &quot;Timer&quot; as TIMER_DRV
			component &quot;Watchdog&quot; as WATCHDOG_DRV
		}

		package “SoC HAL” as SOC_HAL {
			component &quot;OEM SoC 1&quot; as OEM_SOC_1
			component &quot;OEM SoC 2&quot; as OEM_SOC_2
			component &quot;Other SoCs&quot; as OTHER_SOCS
		}

		component &quot;XTHAL&quot; as XTHAL

		SERVICES -[hidden]right- SCHEDULING
		SERVICES -[hidden]down- XTHAL
		SCHEDULING -[hidden]down- SOC_HAL
		SCHEDULING -[hidden]down- DRIVERS
		DRIVERS -[hidden]right- SOC_HAL
		DRIVERS -[hidden]right- XTHAL
	}

	KERNEL_EXTENSION -[hidden]down- ZEPHYR_LAYER
}

&#64;enduml
"/>

</object></p>
<figcaption>
<p><span class="caption-number">Figure 45 </span><span class="caption-text">SOF MPP Scheduling based on Zephyr</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="ll-tasks">
<h2>LL Tasks<a class="headerlink" href="#ll-tasks" title="Permalink to this headline">¶</a></h2>
<p>Low Latency Tasks are executed within one of the non-preemptive high priority LL
Threads that runs all ready-to-run tasks till completion during a single cycle.
There is one LL Thread scheduled per core with its own queues and LL tasks to
execute.</p>
<p>MPP Scheduling adds ready tasks to LL queues at the beginning of each scheduling
period. There are a number of queues to add tasks to. LL Thread iterates over
the queues, and runs all tasks from one queue before moving to the next queue.
Therefore, it is possible to guarantee that some tasks are always run before
others during a cycle.</p>
<p>There are also two special queues: pre-run queue and post-run queue. Tasks from
pre-run queue are run at the beginning of each cycle (may consider them to have
the highest priority).</p>
<p>Tasks from post-run queue are run at the end of each cycle (may consider them to
have the lowest priority).</p>
<p>Example of a pre-run task may be a task registered by the sink driver that
starts the sink at the very beginning of the cycle if data was supplied during
the previous cycles and link has been stopped.</p>
</section>
<section id="dp-tasks">
<h2>DP Tasks<a class="headerlink" href="#dp-tasks" title="Permalink to this headline">¶</a></h2>
<p>The data processing components are represented as a DP tasks that are scheduled as
separate preemptive threads. DP threads scheduling is done according to EDF
(Earliest Deadline First) algorithm that is part of Zephyr.</p>
<p>To meet real-time processing criteria algorithm operates by choosing component task
that is closest to its deadline (time when output data is required).</p>
<p>For playback case algorithm starts from sink and going backward calculates
deadline for data delivery:</p>
<blockquote>
<div><ul class="simple">
<li><p>Time required by component to process data depend on processing period and compute.</p></li>
<li><p>Goal is to process data through chain before real-time sink deadline</p></li>
</ul>
</div></blockquote>
<p>EDF scheduling example</p>
<div class="align-default"><img height="840" src="../../../../_images/blockdiag-18f2e84c3427daab00db1cdbc14b37e0aeb00678.png" width="1634" /></div>
<p>The capture pipelines operate in the same way.</p>
<p>It is important to consider that EDF assumes preemptive scheduling of the DP
Tasks and lack of dependency between them.</p>
</section>
<section id="task-with-budget">
<h2>Task With Budget<a class="headerlink" href="#task-with-budget" title="Permalink to this headline">¶</a></h2>
<p>This is a specialized version of DP task that has pre-allocated MCPS budget
renewed with every system tick. When the task is ready to run, then depending on
the budget left in the current system tick, either MEDIUM_PRIORITY or
LOW_PRIORITY is assigned to task thread. The latter allows for opportunistic
execution if there is no other ready task with a higher priority while the
budget is already spent.</p>
<p>Examples of tasks with budget: Ipc Task, Idc Task.</p>
<p>Task with Budget (TWB) has two key parameters assigned:</p>
<ul class="simple">
<li><p><em>cycles granted</em>: the budget per system tick,</p></li>
<li><p><em>cycles consumed</em>: number of cycles consumed in a given system_tick
for task execution</p></li>
</ul>
<p>The number of cycles consumed is being reset to 0 at the beginning of each
system_tick, renewing TWB budget. When the number of cycles consumed exceed
cycles granted, the task is switched from MEDIUM to LOW priority. When the task
with budget thread is created the MPP Scheduling is responsible to set thread
time slice equal to task budget along with setting callback on time slice
timeout. Thread time slicing guarantee that Zephyr scheduler will interrupt
execution when the budget is spent, so MPP Scheduling timeout callback can
re-evaluate task priority.</p>
<p>If there is a budget left in some system tick (task spent less time or started
executing close to the system tick that preempts execution), it is reset and not
carried over to the next tick.</p>
<p><strong>NOTE</strong> The Zephyr Scheduler track time slice budget of the TWB when preempted
and log warning if the budget is significantly exceeded (some long critical
section inside the task’s code might be responsible for this).</p>
<p><strong>NOTE</strong> The MPP Scheduling must be notified by TWB on processing complete and
update cycles consumed in the current system tick. This allows to schedule TWB
more than once (if necessary) in the single system tick with MEDIUM_PRIORITY.
The second TWB schedule should be done with modified time slice value, equal to
delta between budget and cycles consumed.</p>
</section>
<section id="scheduling-flows">
<h2>Scheduling flows<a class="headerlink" href="#scheduling-flows" title="Permalink to this headline">¶</a></h2>
<section id="zephyr-scheduling">
<h3>Zephyr scheduling<a class="headerlink" href="#zephyr-scheduling" title="Permalink to this headline">¶</a></h3>
<p>The presented Zephyr scheduling flow takes place on each core that has
MPP tasks scheduled.</p>
<figure class="align-default" id="id2">
<p class="plantuml">
<object data="../../../../_images/plantuml-ceb4b5b8bd8e63c7d232e6ab81221b122fb069ea.svg" type="image/svg+xml" style="width:1237px;height:1463px;">
<img src="../../../../_images/plantuml-ceb4b5b8bd8e63c7d232e6ab81221b122fb069ea.png" alt="&#64;startuml

scale max 1280 width

skinparam maxMessageSize 400
skinparam BoxPadding 4

box &quot;SOF&quot; #LightBlue
	participant &quot;MPP Scheduling&quot;
	participant &quot;Zephyr Scheduler&quot;
	participant &quot;Zephyr Thread&quot;
	participant &quot;Timer&quot;
end box

&quot;Timer&quot; -&gt; &quot;MPP Scheduling&quot;: sys_tick callback
activate &quot;MPP Scheduling&quot;
	loop for each core
		&quot;MPP Scheduling&quot;-&gt; &quot;Zephyr Scheduler&quot;: resume LL Zephyr Thread\n(k_sem_give)
		activate &quot;Zephyr Scheduler&quot;
	end

	&quot;MPP Scheduling&quot;-&gt; &quot;MPP Scheduling&quot;: DP and Task with Budget\nZephyr Threads update

&quot;Zephyr Scheduler&quot;-&gt; &quot;Zephyr Thread&quot;: schedule LL Zephyr Thread\n(context switch)
 deactivate &quot;MPP Scheduling&quot;
	activate &quot;Zephyr Thread&quot;
	&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: zephyr_ll_run
	activate &quot;Zephyr Thread&quot;

		loop for each LL pending task
		note left: LL pending tasks are scheduled operations\nthat are waiting for certain circumstances\n(like data arrival) to start processing
			opt if task is ready for processing
				&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: move task \nto LL run queue
			end
		end

		loop for each task in LL queues
			&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: run LL task callback
		end
	return

	&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: suspend LL Zephyr Thread\n(k_sem_take)
	return

loop for each Task With Budget (TwB) Zephyr Thread
	&quot;Zephyr Scheduler&quot;-&gt; &quot;Zephyr Thread&quot;: schedule TwB Zephyr Thread\n(context switch)
		activate &quot;Zephyr Thread&quot;
		&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: run

		alt if time_slice (budget) timeout
			&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Scheduler&quot;: time_slice timeout
				&quot;Zephyr Scheduler&quot;-&gt; &quot;MPP Scheduling&quot;: time_slice callback(thread)
				activate &quot;MPP Scheduling&quot;
					&quot;MPP Scheduling&quot;-&gt; &quot;Zephyr Thread&quot;: k_thread_priority_set(thread, LOW_PRIO)
					note right: when budget is consumed\nreset time_slice to default\nand lower priority
					&quot;MPP Scheduling&quot;-&gt; &quot;Zephyr Thread&quot;: k_thread_time_slice_set(thread, slice_ticks = budget)
				deactivate &quot;MPP Scheduling&quot;

		else if processing complete (no time_slice timeout)
			&quot;Zephyr Thread&quot;-&gt; &quot;MPP Scheduling&quot;: on processing complete (thread)
			activate &quot;MPP Scheduling&quot;
				&quot;MPP Scheduling&quot;-&gt; &quot;Zephyr Thread&quot;: k_thread_runtime_stats_get(thread)
				activate &quot;Zephyr Thread&quot;
					return return thread_cycles - absolute number of cycles consumed by thread
				&quot;MPP Scheduling&quot;-&gt;&quot;MPP Scheduling&quot;: update thread\ncycles_consumed_in_sys_tick += (thread_cycles - thread_ref_cycles)
				note right: thread_ref_cycles is a reference number of cycles consumed by thread\nupdated on each sys_tick start and processing complete
				&quot;MPP Scheduling&quot;-&gt;&quot;MPP Scheduling&quot;: update thread_ref_cycles = thread_cycles
				return
			deactivate &quot;MPP Scheduling&quot;

			&quot;Zephyr Thread&quot; -&gt; &quot;Zephyr Thread&quot;: suspend TwB Zephyr Thread\n(k_sem_take)
			note left: TwB Threads are expected to be resumed when there is new data for processing\nfor example IPC TwB Thread will be resumed on IPC interrupt
			&quot;Zephyr Thread&quot; --&gt; &quot;Zephyr Scheduler&quot;
			deactivate &quot;Zephyr Thread&quot;
		end
end

loop for each DP Zephyr Thread
	&quot;Zephyr Scheduler&quot;-&gt; &quot;Zephyr Thread&quot;: schedule DP Zephyr Thread with earlieast deadline\n(context switch)
	note right: TwB Threads with low priority are treated\nas threads with max deadline and will be\nscheduled after DP threads complete processing
	activate &quot;Zephyr Thread&quot;
		&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: run
		note right: DP thread runs till completion\nor till earlier deadline or\nhigher priority thread is available
		return
	deactivate &quot;Zephyr Thread&quot;
end

&#64;enduml
"/>

</object></p>
<figcaption>
<p><span class="caption-number">Figure 46 </span><span class="caption-text">Zephyr scheduling of MPP threads flow</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="mpp-data-processing-and-task-with-budget-threads-periodic-update">
<h3>MPP Data Processing and Task with Budget threads periodic update<a class="headerlink" href="#mpp-data-processing-and-task-with-budget-threads-periodic-update" title="Permalink to this headline">¶</a></h3>
<p>Zoom in to Data Processing (Earliest Deadline First) and Task with Budget
Threads periodic update operations on each system tick start.</p>
<figure class="align-default" id="id3">
<p class="plantuml">
<object data="../../../../_images/plantuml-9014ad51ed676a1d608e80616b7b66f3492de033.svg" type="image/svg+xml" style="width:731px;height:554px;">
<img src="../../../../_images/plantuml-9014ad51ed676a1d608e80616b7b66f3492de033.png" alt="&#64;startuml

scale max 1280 width

skinparam maxMessageSize 400
skinparam BoxPadding 4

box &quot;SOF Firmware&quot; #LightBlue
	participant &quot;MPP Scheduling&quot;
	participant &quot;Zephyr Thread&quot;
	participant &quot;Timer&quot;
end box

&quot;Timer&quot; -&gt; &quot;MPP Scheduling&quot;: sys_tick callback
activate &quot;MPP Scheduling&quot;

loop for each Task with Budget
	&quot;MPP Scheduling&quot;-&gt; &quot;MPP Scheduling&quot;: reset task with budget\ncycles_consumed_in_sys_tick
	&quot;MPP Scheduling&quot; -&gt; &quot;Zephyr Thread&quot;: k_thread_priority_set(thread, MEDIUM_PRIO)
	&quot;MPP Scheduling&quot; -&gt; &quot;Zephyr Thread&quot;: k_thread_time_slice_set(thread, slice_ticks = budget)
	note right: Reset priority and budget\nto default value
	&quot;MPP Scheduling&quot;-&gt; &quot;Zephyr Thread&quot;: k_thread_runtime_stats_get(thread)
	activate &quot;Zephyr Thread&quot;
		return return thread_cycles - absolute number of cycles consumed
	&quot;MPP Scheduling&quot;-&gt; &quot;MPP Scheduling&quot;: save thread_ref_cycles = thread_cycles as a reference
end

loop for each DP task
	opt if DP task is ready for processing
		&quot;MPP Scheduling&quot;-&gt; &quot;MPP Scheduling&quot;: re-calculate task deadline
		&quot;MPP Scheduling&quot; -&gt; &quot;Zephyr Thread&quot;: k_thread_deadline_set(thread, deadline)
		&quot;MPP Scheduling&quot; -&gt; &quot;Zephyr Thread&quot;: resume thread
	end
end

deactivate &quot;MPP Scheduling&quot;

&#64;enduml
"/>

</object></p>
<figcaption>
<p><span class="caption-number">Figure 47 </span><span class="caption-text">DP and TWB threads sys tick update flow</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="task-with-budget-scheduling">
<h3>Task with budget scheduling<a class="headerlink" href="#task-with-budget-scheduling" title="Permalink to this headline">¶</a></h3>
<figure class="align-default" id="id4">
<p class="plantuml">
<object data="../../../../_images/plantuml-6119eef3ff065d8ecf8ca607027e923d4165219c.svg" type="image/svg+xml" style="width:1011px;height:737px;">
<img src="../../../../_images/plantuml-6119eef3ff065d8ecf8ca607027e923d4165219c.png" alt="&#64;startuml

skinparam maxMessageSize 400
skinparam BoxPadding 4

box &quot;SOF Firmware&quot; #LightBlue
	participant &quot;Firmware Manager&quot;
	participant &quot;MPP Scheduling&quot;
	participant &quot;Zephyr Scheduler&quot;
	participant &quot;Zephyr Thread&quot;
end box

activate &quot;Zephyr Scheduler&quot;

&quot;Zephyr Scheduler&quot;-&gt; &quot;Zephyr Thread&quot;: schedule IPC Task with Budget (TWB) thread\n(MEDIUM_PRIO)
activate &quot;Zephyr Thread&quot;

	&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: run
	&quot;Zephyr Thread&quot;-&gt; &quot;MPP Scheduling&quot;: on processing complete
	activate &quot;MPP Scheduling&quot;
		&quot;MPP Scheduling&quot;-&gt; &quot;Zephyr Thread&quot;: k_thread_runtime_stats_get
		activate &quot;Zephyr Thread&quot;
		return
		&quot;MPP Scheduling&quot;-&gt; &quot;MPP Scheduling&quot;: update IPC Task with budget\ncycles_consumed_in_sys_tick
	return
	&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: suspend TWB Zephyr Thread\n(k_sem_take)
return

&quot;Zephyr Scheduler&quot;-&gt; &quot;Zephyr Thread&quot;: schedule EDF thread\n(LOW_PRIO)
activate &quot;Zephyr Thread&quot;
	&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: run

	activate &quot;Firmware Manager&quot;
	&quot;Firmware Manager&quot;-&gt; &quot;Firmware Manager&quot;: Host IPC message received
		&quot;Firmware Manager&quot;-&gt; &quot;MPP Scheduling&quot;: request IPC processing
		activate &quot;MPP Scheduling&quot;
		&quot;MPP Scheduling&quot;-&gt; &quot;Zephyr Thread&quot;: resume IPC TWB Zephyr Thread\n(k_sem_give)
		&quot;MPP Scheduling&quot; --&gt; &quot;Firmware Manager&quot;
		deactivate &quot;MPP Scheduling&quot;
	deactivate &quot;Firmware Manager&quot;

&quot;Zephyr Thread&quot; --&gt; &quot;Zephyr Scheduler&quot;: EDF thread gets preempted
deactivate &quot;Zephyr Thread&quot;

&quot;Zephyr Scheduler&quot;-&gt; &quot;Zephyr Thread&quot;: schedule IPC task with budget thread\n(MEDIUM_PRIO)
	activate &quot;Zephyr Thread&quot;
		&quot;Zephyr Thread&quot;-&gt; &quot;Zephyr Thread&quot;: run
	return

&#64;enduml
"/>

</object></p>
<figcaption>
<p><span class="caption-number">Figure 48 </span><span class="caption-text">Task with budget example scheduling flow</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="example-timeline-of-mpp-scheduling-on-a-dsp-core">
<h3>Example timeline of MPP Scheduling on a DSP core<a class="headerlink" href="#example-timeline-of-mpp-scheduling-on-a-dsp-core" title="Permalink to this headline">¶</a></h3>
<p>The below diagram shows how scheduling looks like on a DSP core. At the timer
interrupt, LL scheduler runs as the first one and then DP scheduler is executed.</p>
<figure class="align-default" id="id5">
<p class="plantuml">
<object data="../../../../_images/plantuml-57328f3f6e4913360e4075f3067547717642c71f.svg" type="image/svg+xml" style="width:979px;height:438px;">
<img src="../../../../_images/plantuml-57328f3f6e4913360e4075f3067547717642c71f.png" alt="&#64;startuml

Title Task scheduling on DSP core

legend
Assumptions:
1) 1ms scheduling
2) 0.1ms takes LL task execution
3) 0.5ms takes execution of all DP tasks
end legend

scale 1 as 200 pixels

concise &quot;DP Tasks Processing&quot; as DP_Processing
concise &quot;LL Tasks Processing&quot; as LL_Processing
robust &quot;DSP&quot; as DSP
concise &quot;Timer Interrupt&quot; as Interrupt

DSP is Idle

&#64;DSP
&#64;1.2 &lt;-&gt; &#64;2: Time available for\nDP tasks execution
&#64;2.2 &lt;-&gt; &#64;2.7: Actual execution time\nof DP tasks
&#64;3 &lt;-&gt; &#64;3.2: Actual execution time\nof LL tasks

&#64;Interrupt
&#64;0 &lt;-&gt; &#64;1 : Schedule period

&#64;0
Interrupt -&gt; DSP
DSP -&gt; LL_Processing
DSP is &quot;Scheduling tasks&quot;
LL_Processing is Busy
DP_Processing is {-}

&#64;+0.2
DSP -&gt; DP_Processing
LL_Processing is {-}
DP_Processing is Busy

&#64;+0.5
DP_Processing -&gt; DSP
DP_Processing is {-}
DSP is Idle

&#64;1
Interrupt -&gt; DSP
DSP -&gt; LL_Processing
DSP is &quot;Scheduling tasks&quot;
LL_Processing is Busy

&#64;+0.2
DSP -&gt; DP_Processing
LL_Processing is {-}
DP_Processing is Busy

&#64;+0.5
DP_Processing -&gt; DSP
DP_Processing is {-}
DSP is Idle

&#64;2
Interrupt -&gt; DSP
DSP -&gt; LL_Processing
DSP is &quot;Scheduling tasks&quot;
LL_Processing is Busy

&#64;+0.2
DSP -&gt; DP_Processing
LL_Processing is {-}
DP_Processing is Busy

&#64;+0.5
DP_Processing -&gt; DSP
DP_Processing is {-}
DSP is Idle

&#64;3
Interrupt -&gt; DSP
DSP -&gt; LL_Processing
DSP is &quot;Scheduling tasks&quot;
LL_Processing is Busy

&#64;+0.2
DSP -&gt; DP_Processing

LL_Processing is {-}
DP_Processing is Busy

&#64;+0.5
DP_Processing -&gt; DSP
DP_Processing is {-}
DSP is Idle

&#64;enduml
"/>

</object></p>
<figcaption>
<p><span class="caption-number">Figure 49 </span><span class="caption-text">Example timeline of MPP Scheduling on DSP core with LL and DP tasks scheduling</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="example-timeline-of-dp-tasks-scheduling-on-secondary-dsp-core">
<h3>Example timeline of DP tasks scheduling on secondary DSP core<a class="headerlink" href="#example-timeline-of-dp-tasks-scheduling-on-secondary-dsp-core" title="Permalink to this headline">¶</a></h3>
<p>The below diagram shows a detailed example of how DP tasks are scheduled
on the secondary DSP core.</p>
<figure class="align-default" id="id6">
<p class="plantuml">
<object data="../../../../_images/plantuml-1f3f2da7c33e6c2f0474eae8453c6888b6de8736.svg" type="image/svg+xml" style="width:1604px;height:565px;">
<img src="../../../../_images/plantuml-1f3f2da7c33e6c2f0474eae8453c6888b6de8736.png" alt="&#64;startuml

Title DP tasks scheduling on secondary DSP core

legend
Assumptions:
1) 1ms scheduling
2) No LL tasks assigned to example secondary DSP core
3) DP Task B do not depend on Task A completion
(otherwise, Task B would start on next timer interrupt after A
completion)
end legend

scale 1 as 150 pixels

concise &quot;Task B&quot; as Task_B
concise &quot;Task A&quot; as Task_A

concise &quot;DP task processing&quot; as DP_Processing
robust &quot;DSP&quot; as DSP
concise &quot;Timer interrupt&quot; as Interrupt


&#64;Task_A
0 is Busy
1.5 is {-}

4 is Busy
5.5 is {-}

8 is Busy
9.5 is {-}

&#64;0 &lt;-&gt; &#64;4: Task A schedule period (4ms)
&#64;4 &lt;-&gt; &#64;5.5: Task A execution time (1.5ms)

DP_Processing&#64;0 -[#Orange]&gt; Task_A&#64;0
DP_Processing&#64;1 -[#Orange]&gt; Task_A&#64;1
DP_Processing&#64;1.5 -[#Orange]&gt; Task_A&#64;1.5


&#64;Task_B
0 is Busy
2 is {-}

6 is Busy
8 is {-}

&#64;0 &lt;-&gt; &#64;6: Task B schedule period (6ms)
&#64;6 &lt;-&gt; &#64;8: Task B execution time (2ms)

DP_Processing&#64;1.5 -[#Brown]&gt; Task_B&#64;0
DP_Processing&#64;2 -[#Brown]&gt; Task_B&#64;0.5
DP_Processing&#64;3 -[#Brown]&gt; Task_B&#64;1.5
DP_Processing&#64;3.5 -[#Brown]&gt; Task_B&#64;2

DSP is Idle
DP_Processing is {-}

&#64;0
DP_Processing is &quot;A&quot;

&#64;0
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DSP is &quot;Scheduling&quot;
DP_Processing is &quot;A&quot;

&#64;1
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;A&quot;

&#64;1.5
DP_Processing -&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;B&quot;

&#64;2
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;B&quot;

&#64;3
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;B&quot;

&#64;3.5
DP_Processing -&gt; DSP
DSP is Idle
DP_Processing is {-}

&#64;4
Interrupt -[#DarkViolet]&gt; DSP
DSP is &quot;Scheduling&quot;
DSP -&gt; DP_Processing
DP_Processing is &quot;A&quot;

&#64;5
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;A&quot;

&#64;5.5
DP_Processing -&gt; DSP
DSP is Idle
DP_Processing is {-}

&#64;6.001
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DSP is &quot;Scheduling&quot;
DP_Processing is &quot;B&quot;

&#64;7.001
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;B&quot;

&#64;8.001
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;A&quot;

&#64;9.001
Interrupt -[#DarkViolet]&gt; DSP
DSP -&gt; DP_Processing
DP_Processing is &quot;A&quot;

&#64;9.5
DP_Processing -&gt; DSP
DSP is Idle
DP_Processing is {-}

&#64;enduml
"/>

</object></p>
<figcaption>
<p><span class="caption-number">Figure 50 </span><span class="caption-text">Example of DP tasks scheduling on secondary DSP core</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="example-timeline-of-mpp-scheduling-on-multiple-dsp-cores">
<h3>Example timeline of MPP scheduling on multiple DSP cores<a class="headerlink" href="#example-timeline-of-mpp-scheduling-on-multiple-dsp-cores" title="Permalink to this headline">¶</a></h3>
<p>The below diagram shows how scheduling looks like on many DSP cores. The DP task
deadlines are reevaluated on each core in Timer sys tick callback.</p>
<figure class="align-default" id="id7">
<p class="plantuml">
<object data="../../../../_images/plantuml-c072e4c178a79381850dc4af2869865ddc9d57b6.svg" type="image/svg+xml" style="width:1837px;height:566px;">
<img src="../../../../_images/plantuml-c072e4c178a79381850dc4af2869865ddc9d57b6.png" alt="&#64;startuml

Title Tasks scheduling on multiple DSP cores

legend
Assumptions:
1) 1ms system tick

Notes:
2) Core #0 has only LL tasks assigned schedule in 1ms period
3) Core #1 has one DP task assigned that is dependent on Core #0 LL tasks data, scheduled in 1ms period
(e.g. multicore pipeline with DP module scheduled on separate core)
4) Core #2 has LL tasks scheduled in 1ms period and DP task scheduled in 2ms period
(e.g. pipeline processing with LL and DP components components where DP component has 2ms scheduling period)
end legend

scale 1 as 300 pixels

concise &quot;DSP #2&quot; as DSP_2
concise &quot;DSP #1&quot; as DSP_1
concise &quot;DSP #0&quot; as DSP_0

concise &quot;Timer interrupt&quot; as Interrupt

&#64;DSP_0
0 is &quot;LL proc.&quot;
0.5 is {-}

1 is &quot;LL proc.&quot;
1.5 is {-}

2 is &quot;LL proc.&quot;
2.5 is {-}

3 is &quot;LL proc.&quot;
3.5 is {-}

4 is &quot;LL proc.&quot;
4.5 is {-}

&#64;0 &lt;-&gt; &#64;1: DSP#0 LL schedule period (1ms)

&#64;DSP_1
0 is {-}

1 is &quot;DP proc.&quot;
1.6 is {-}

2 is &quot;DP proc.&quot;
2.6 is {-}

3 is &quot;DP proc.&quot;
3.6 is {-}

4 is &quot;DP proc.&quot;
4.6 is {-}
5 is {-}

&#64;0 &lt;-&gt; &#64;1: delay one period (waiting for first DSP#0 LL data)
&#64;1 &lt;-&gt; &#64;2: DSP#1 DP schedule period (1ms)

&#64;DSP_2

0 is &quot;LL proc.&quot;
0.3 is {-}

1 is &quot;LL proc.&quot;
1.3 is {-}

2 is &quot;LL proc.&quot;
2.3 is &quot;DP proc.&quot;

3 is &quot;LL proc.&quot;
3.3 is &quot;DP proc.&quot;
3.7 is {-}

4 is &quot;LL proc.&quot;
4.3 is &quot;DP proc.&quot;

&#64;0 &lt;-&gt; &#64;1: DSP#2 LL schedule period (1ms)
&#64;2.3 &lt;-&gt; &#64;4.3: DSP#2 DP schedule period (2ms)

&#64;0
Interrupt -[#DarkViolet]&gt; DSP_0
Interrupt -[#DarkViolet]&gt; DSP_1
Interrupt -[#DarkViolet]&gt; DSP_2

&#64;1
Interrupt -[#DarkViolet]&gt; DSP_0
Interrupt -[#DarkViolet]&gt; DSP_1
Interrupt -[#DarkViolet]&gt; DSP_2

&#64;2
Interrupt -[#DarkViolet]&gt; DSP_0
Interrupt -[#DarkViolet]&gt; DSP_1
Interrupt -[#DarkViolet]&gt; DSP_2

&#64;3
Interrupt -[#DarkViolet]&gt; DSP_0
Interrupt -[#DarkViolet]&gt; DSP_1
Interrupt -[#DarkViolet]&gt; DSP_2

&#64;4
Interrupt -[#DarkViolet]&gt; DSP_0
Interrupt -[#DarkViolet]&gt; DSP_1
Interrupt -[#DarkViolet]&gt; DSP_2

&#64;enduml
"/>

</object></p>
<figcaption>
<p><span class="caption-number">Figure 51 </span><span class="caption-text">Example of MPP Scheduling on many cores - LL and DP tasks scheduling</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="fast-mode">
<h2>Fast Mode<a class="headerlink" href="#fast-mode" title="Permalink to this headline">¶</a></h2>
<p>The Fast Mode is used to process data faster than real time. The processing
faster than real time is only needed for a short time period and it happens i.e.
when firmware performs low power Wake on Voice. In such case SOF firmware is
working in low power mode, performing i.e. key phrase detection algorithm,
accumulating last few seconds of audio samples in history buffer. When a key
phrase detection happens, there is a need to stream the accumulated history to
Host as quickly as possible with optional additional processing on DSP. It is
only possible when a sink interface to Host transfer burst of data from DSP.</p>
<p>The Fast Mode is an idle low priority task. The task is only executed when other
DP tasks with deadlines has completed their processing and there is still enough
DSP cycles before a next system tick.</p>
<p>When the Fast Mode task is created by i.e. History Buffer, the component
instance (i.e. History Buffer) needs to provide a list of LL component instances
that will be executed within a Fast Mode thread, similar as it is done with LL
tasks queues and LL Thread. When the Fast Mode thread is executed it will
trigger processing of LL components in similar way as LL Thread does. The Fast
Mode task is executed in the critical section. It will check if there is data
available in an input queue and there is enough space in an output queue. Only
then it will execute a LL component. What is important to note is that the Fast
Mode task does not call processing on the DP components directly.</p>
<p>As described in the previous sections, the processing on DP components is called
according to EDF algorithm. A periodicity of a component processing is
determined by time needed to fill an input queue using real time source of data.
When an input queue has sufficient amount of data, the processing on DP
component can be called. The input queues for DP components that are on the Fast
Mode task path will be filling much faster than real time as the side effect of
the Fast Mode task execution - LL components will move data to DP component
input queue and out of DP component output queue. As the result, DP component
can be executed much earlier than real time - a DSP task reports “ready to run”
as soon as it has sufficient amount of data in input queue and output queue has
enough space for produced frame. That can lead to starvation of other tasks and
to prevent it a Fast Mode tasks must be scheduled as idle tasks in background.</p>
</section>
<section id="watchdog-timer">
<h2>Watchdog timer<a class="headerlink" href="#watchdog-timer" title="Permalink to this headline">¶</a></h2>
<p>Depending on HW configuration there can be a single watchdog timer, watchdog
available for each DSP core or none.</p>
<p>All DSP cores shall enable watchdog when they are active to monitor health of
subsystem. When one of watchdogs will expire, the entire subsystem will be reset
by Host.</p>
<p>Watchdog shall be enabled when:</p>
<ul class="simple">
<li><p>DSP core is enabled,</p></li>
<li><p>tasks are assigned to DSP core,</p></li>
</ul>
<p>Watchdog shall be disabled when:</p>
<ul class="simple">
<li><p>DSP core is disabled,</p></li>
<li><p>no tasks are assigned to DSP core,</p></li>
<li><p>DSP core goes to low power state,</p></li>
</ul>
<p>Watchdog timer shall be programmed to value of a few scheduling periods.</p>
<p>Watchdog timer when enabled shall be updated at every system tick. In case of
primary DSP core, it should be after running LL tasks. In case of secondary HP
DSP cores, it should be on system tick end.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, SOF Project.
      <span class="lastupdated">Last updated on Sep 27, 2023.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M4BL5NF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'GTM-M4BL5NF', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>