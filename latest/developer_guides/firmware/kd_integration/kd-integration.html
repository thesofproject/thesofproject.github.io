

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Keyword Detection integration &mdash; SOF Project 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/sof-favicon-16x16.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sof-custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="CMake Arguments" href="../cmake.html" />
    <link rel="prev" title="Keyword detection" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> SOF Project
          

          
            
            <img src="../../../_static/logo_sof_white_200w.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://sofproject.org">SOF project website</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction to the SOF Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../introduction/index.html#sdk-introduction-and-overview">SDK Introduction and Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/index.html#sof-source-code-tools-and-topologies">SOF source code, tools and topologies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/index.html#host-os-drivers">Host OS Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/index.html#firmware-toolchain">Firmware Toolchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/index.html#dsp-emulator">DSP Emulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../introduction/index.html#general-faq">General FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/index.html#building-sof">Building SOF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started/build-guide/build-from-scratch.html">Build SOF from scratch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/build-guide/build-from-scratch.html#build-sof-binaries">Build SOF binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/build-guide/build-from-scratch.html#build-linux-kernel">Build Linux kernel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started/build-guide/build-with-docker.html">Build SOF with Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/build-guide/build-with-docker.html#set-up-docker">Set up Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/build-guide/build-with-docker.html#id1">Build with Docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started/build-guide/build-3rd-party-toolchain.html">Build SOF with a 3rd Party Toolchain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/build-guide/build-3rd-party-toolchain.html#cadence-tensilica-xtensa-c-c-compiler-xcc">Cadence® Tensilica® Xtensa® C/C++ Compiler (XCC)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/index.html#setting-up-sof-on-hardware">Setting up SOF on hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started/setup/setup_minnowboard_turbot.html">Set up SOF on MinnowBoard Turbot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_minnowboard_turbot.html#minnowboard-resources">MinnowBoard resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_minnowboard_turbot.html#development">Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started/setup/setup_up_2_board.html">Set up SOF on Up Squared board with Hifiberry DAC+ (STD)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_up_2_board.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_up_2_board.html#setup-instructions">Setup Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started/setup/setup_ktest_environment.html">Set up a Ktest-based environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_ktest_environment.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_ktest_environment.html#prerequisites-on-the-target-device">Prerequisites on the target device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_ktest_environment.html#configure-ssh-without-password">Configure SSH without password</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../getting_started/setup/setup_ktest_environment.html#create-a-linux-development-environment">Create a linux development environment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../architectures/index.html">Supported Architectures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../architectures/host/index.html">Host Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architectures/host/index.html#sof-driver-architecture">SOF Driver Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../architectures/host/index.html#linux-driver">Linux Driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architectures/dsp/index.html">DSP Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architectures/dsp/index.html#adding-a-new-dsp-architecture-to-sof">Adding a new DSP architecture to SOF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../architectures/dsp/index.html#method-1-new-hal">Method 1 - New HAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../architectures/dsp/index.html#method-2-use-existing-rtos">Method 2 - Use existing RTOS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../architectures/dsp/index.html#vendor-specific-architecture-information">Vendor Specific Architecture Information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../architectures/dsp/index.html#intel">Intel</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Supported Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../platforms/intel-legacy/index.html">Intel Hifi2-EP Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/intel-legacy/merrifield/index.html">Intel Merrifield</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/intel-legacy/baytrail/index.html">Intel Baytrail/CherryTrail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/intel-legacy/broadwell/index.html">Intel Broadwell</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../platforms/intel-cavs/index.html">Intel CAVS Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/intel-cavs/commons/index.html">CAVS Commons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/intel-cavs/commons/work-queue.html">Work Queues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/intel-cavs/commons/multicore-processing.html">Multicore Processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/intel-cavs/apollolake/index.html">Intel Apollo Lake</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/intel-cavs/apollolake/apl-memory.html">APL Memory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/intel-cavs/cannonlake/index.html">Intel Cannon Lake</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/intel-cavs/cannonlake/cnl-memory.html">CNL Memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/intel-cavs/cannonlake/cnl-config.html">CNL Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/intel-cavs/icelake/index.html">Intel Ice Lake</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#sof-core-concepts">SOF Core Concepts</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Firmware</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../component-tutorial/tut-intro.html">Hello World Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../component-tutorial/tut-i-basic-fw-code.html">Part I - Adding a Component Code to FW</a></li>
<li class="toctree-l4"><a class="reference internal" href="../component-tutorial/tut-ii-topology.html">Part II - Modifying the Topology &amp; Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../component-tutorial/tut-iii-runtime-params.html">Part III - Adding Run-time Parameter Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../component-tutorial/tut-iv-exceptions.html">Part IV - Working with Exception Reports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mem-mgmt.html">Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mem-mgmt.html#heap-memory-zones">Heap Memory Zones</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mem-mgmt.html#system-zone">System Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mem-mgmt.html#runtime-zone">Runtime Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mem-mgmt.html#buffer-zone">Buffer Zone</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../work-queue.html">Work Queue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../work-queue.html#basic-work-queue-flow">Basic Work Queue Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../work-queue.html#extensions-for-smp-architectures">Extensions for SMP Architectures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../drivers/index.html">Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../drivers/index.html#registering-the-devices">Registering the Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../drivers/index.html#probing-on-demand">Probing on Demand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../drivers/index.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../components/index.html">Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../components/component-overview.html">Components Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../components/component-api.html">Component API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../components/component-mgmt-api.html">Managing the Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pipelines/index.html">Pipelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pipelines/index.html#creating-a-pipeline">Creating a Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipelines/index.html#executing-an-operation">Executing an Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipelines/index.html#resetting-pipeline">Resetting Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipelines/index.html#configuring-audio-parameters-preparing-for-use">Configuring Audio Parameters &amp; Preparing for Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipelines/index.html#scheduling">Scheduling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipelines/index.html#processing">Processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting.html">Porting Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting.html#architecture-porting-guide">Architecture Porting Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting.html#platform-porting-guide">Platform Porting Guide</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Keyword detection</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Keyword Detection integration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cmake.html">CMake Arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cmake.html#firmware-unit-tests">Firmware &amp; Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cmake.html#firmware">Firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cmake.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cmake.html#host-testbench">Host Testbench</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../unit_tests.html">Unit Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../unit_tests.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../unit_tests.html#configuring-for-unit-tests">Configuring for unit tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../unit_tests.html#example-running-tests-for-apl">Example: Running tests for APL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../unit_tests.html#wrapping-objects-for-unit-tests">Wrapping objects for unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../unit_tests.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../topology/topology.html">SOF Topology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../topology/topology.html#topology-ingredients">1. Topology Ingredients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#widgets">1.1 Widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#tokens-vendor-tuples">1.2 Tokens/Vendor Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#kcontrols">1.3 Kcontrols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#pipelines">1.4 Pipelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#backend-dai">1.5 Backend DAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#backend-dai-link-config">1.6 Backend DAI link Config</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../topology/topology.html#how-to-create-a-new-topology">2. How to create a new topology?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#example-topology-with-single-pipeline">2.1 Example topology with single pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../topology/topology.html#example-topology-with-multiple-pipelines">2.2 Example topology with multiple pipelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../topology/topology.html#debugging-topology">3. Debugging topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../topology/topology.html#acronyms">4. Acronyms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../debugability/index.html">Debugability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../debugability/traces/index.html">Traces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../debugability/traces/index.html#building-processing-traces">Building &amp; Processing Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../debugability/traces/index.html#enabling-traces">Enabling Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../debugability/traces/index.html#adding-traces">Adding Traces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../debugability/logger/index.html">Logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../debugability/logger/index.html#logger-usage">Logger usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../debugability/coredump-reader/index.html">Coredump-reader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../debugability/coredump-reader/index.html#coredump-reader-usage">Coredump-reader usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tuning/sof-ctl.html">Runtime Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tuning/sof-ctl.html#find-out-effect-numids">Find out effect numids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tuning/sof-ctl.html#example-equalizer-settings">Example equalizer settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tuning/sof-ctl.html#help">Help</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html#technical-notes">Technical Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tech/build-cmocka.html">Build Cmocka for Xtensa</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tech/build-cmocka.html#cmocka-fork">Cmocka fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tech/build-cmocka.html#simple-build-on-linux">Simple build on Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tech/build-cmocka.html#cross-platform-build">Cross-platform build</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tech/compile_wsl.html">Build on Windows 10 with WSL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tech/compile_wsl.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tech/compile_wsl.html#enable-32-bit-binaries">Enable 32-bit binaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tech/compile_wsl.html#fix-stat-in-32-bit-binaries">Fix stat in 32-bit binaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tech/compile_wsl.html#compile">Compile</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release.html">Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../release.html#firmware-and-tools">Firmware and Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../release.html#git">Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../release.html#source-and-binary-releases">Source and Binary Releases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../release.html#linux-driver">Linux Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contributing to the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#dco-sign-off-methods">DCO Sign-Off Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#headings">Headings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#multi-column-lists">Multi-column lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#file-names-and-commands">File names and Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#tabs-spaces-and-indenting">Tabs, spaces, and indenting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/dox-source-code.html">Documenting the Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/dox-source-code.html#basic-rules">Basic Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/dox-source-code.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/process/bug-tracking.html">Bug Tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#life-cycle-of-a-bug">Life Cycle of a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#labels">Labels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#solution-labels">Solution Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#priority-labels">Priority Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#plaform-and-branch-labels">Plaform and Branch Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#other-optional-labels">Other optional Labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#how-to-report-a-bug">How to Report a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/bug-tracking.html#how-to-close-a-bug">How to Close a Bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/process/docbuild.html">SOF Documentation Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#documentation-overview">Documentation overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#set-up-documentation-working-folders">Set up documentation working folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#install-documentation-tools">Install documentation tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#documentation-presentation-theme">Documentation presentation theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#run-documentation-processors">Run documentation processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#publish-content">Publish content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#installation-troubleshooting">Installation troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/process/docbuild.html#diagram-compilation-troubleshooting">Diagram compilation troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api/dma-drivers-api.html">DMA Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/dai-drivers-api.html">DAI Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/platform-api.html">Platform API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/component-api.html">Component API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/uapi.html">uAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../presentations/index.html">Presentations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../presentations/index.html#sof-mentions">SOF Mentions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">SOF Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Developer Guides</a> &raquo;</li>
        
          <li><a href="../index.html">Firmware</a> &raquo;</li>
        
          <li><a href="index.html">Keyword detection</a> &raquo;</li>
        
      <li>Keyword Detection integration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="keyword-detection-integration">
<span id="kd-integration"></span><h1>Keyword Detection integration<a class="headerlink" href="#keyword-detection-integration" title="Permalink to this headline">¶</a></h1>
<p>Keyword Detection (KD) a.k.a Voice Activation a.k.a Sound Trigger is a feature
that allows triggering activity of speech recognition engine depending on
successful detection of a predefined keyphrase(keyword). The Primary
motivation of offloading the keyphrase detection algorithm to the embedded
processing environment (i.e. dedicated DSP) is the reduction of system power
consumption while listening for an utterance.</p>
<p>The terms “Voice Activation” and “Keyphrase Detection” are often used
interchangeably to describe end to end system level use cases that include:</p>
<ul class="simple">
<li>Keyphrase detection algorithm</li>
<li>Keyphrase enrollment (parametrization of keyphrase detection algorithm)</li>
<li>Management of an audio stream that is used to transport utterances</li>
<li>Steps made to reduce system level power consumption</li>
<li>System wake up on keyphrase detection</li>
</ul>
<p>The term “Keyphrase Detector” component typically is used to identify a
firmware processing component that implements an algorithm for detection of a
keyphrase in an audio stream.</p>
<p>The speech audio stream is used to indicate that the stream is primarily used
to deliver data to automatic speech recognition (ASR) algorithm. The voice
audio stream typically indicates that the recipent of audio data is a human.</p>
<p>Depending on system level requirements for the keyphrase detection algorithm
and the speech recognition engine, different policies for keyphrase buffering
and voice data streaming may be applied. This document covers the reference
implementation available in SOF. The following sections cover functional scope.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently SOF implements the Keyphrase Detector component with a
reference trigger function that allows testing of E2E flow by detecting
a rapid volume change.</p>
</div>
<div class="section" id="timing-sequence">
<h2>Timing sequence<a class="headerlink" href="#timing-sequence" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id1">
<p class="plantuml">
<object data="../../../_images/plantuml-204a4d9ebf4930387cbf34211767122fb56b8046.svg" type="image/svg+xml" style="width:1005px;height:218px;">
<img src="../../../_images/plantuml-204a4d9ebf4930387cbf34211767122fb56b8046.png" alt="&#64;startuml
footer: timeline not to scale 
robust &quot;Speech Application&quot; as App
concise &quot;Audio Stream&quot; as Audio

App is idle
Audio is &quot;Preceeding&quot;

&#64;App
0 is idle
+225 is &quot;Processing&quot;

&#64;Audio
0 is Keyphrase
&#64;180 &lt;-&gt; &#64;+40 : {detection &amp; burst transmission lag}
Audio&#64;+25 -&gt; App&#64;+25 : notification
200 is Command
+200 is Following
&#64;enduml
"/>

</object></p>
<p class="caption"><span class="caption-number">Figure 39 </span><span class="caption-text">Basic diagram for a timing sequence</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>A keyphrase is preceeded by a period of silence and is followed by a user
command. In order to balance power savings and user experience the host system
(CPU) shall be activated only if a keyphrase is detected. To reduce the number
of false triggers for user commands, the keyphrase can be sent to the host for
additional (2nd stage) verification. This requires the FW to buffer the
keyphrase in a memory. Keyphrase transmission to the host shall be as fast as
possible (faster than real-time) to reduce latency for system response.</p>
</div>
<div class="section" id="end-2-end-flows">
<h2>End-2-End flows<a class="headerlink" href="#end-2-end-flows" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id2">
<p class="plantuml">
<object data="../../../_images/plantuml-3dda4ccbbedcad3d1f6418faceab6b5923a9e14e.svg" type="image/svg+xml" style="width:1526px;height:1577px;">
<img src="../../../_images/plantuml-3dda4ccbbedcad3d1f6418faceab6b5923a9e14e.png" alt="&#64;startuml
participant &quot;Userspace component&quot; as usr
participant &quot;Audio driver&quot; as drv
participant &quot;FW infrastructure&quot; as fw
participant &quot;Data transfer to Host&quot; as dma
participant &quot;Keyword detection algorithm&quot; as kda
participant &quot;Data transfer to DSP&quot; as gpdma

box &quot;Linux User/Kernel space&quot; #LavenderBlush
	participant usr
	participant drv
end box

box &quot;DSP&quot; #LightBlue
	participant fw
	participant dma
	participant kda
	participant gpdma
end box

activate fw

drv -&gt; fw : Setup audio topology \n (Speech Capture &amp; Keyword Detection pipes)
usr -&gt; drv : Prepare &amp; Open PCM capture \n(snd_pcm_open/snd_pcm_hw_params)
drv -&gt; fw : Stream Open &amp; Preparation
drv -&gt; fw : HW Params
group optional (depends on keyword detection algorithm implementation)
 usr -&gt; drv : Send keyword detection algorithm parameters \n (snd_ctl_elem_tlv_write)
 drv -&gt; fw : Send keyword detection algorithm parameters
 fw -&gt; kda : Send keyword detection algorithm parameters
end

drv -&gt;drv : DAPM power up event
drv -&gt; fw : HW Params for Keyphrase Detection Pipeline
usr -&gt; drv : Trigger start (alsamixer)
drv -&gt; fw : Keyword detection algorithm &amp; buffer manager triggered

fw -&gt; fw : Keyphrase Buffer Manager \nin acquisition mode
fw -&gt; gpdma 

activate gpdma

fw -&gt; kda : keypharse detection enabled

activate kda

usr -&gt; drv : Trigger start (snd_pcm_read)

note over usr
Speech application indefinitely 
waits for data.
end note 

ref over usr, drv, fw , gpdma, kda, dma  
Speech Capture pipeline is not transmitting data to Host system
Host system may enter the low power state
end ref

loop keyword detection algorithm \nexecuted on DSP
 kda &lt;- gpdma 
end

hnote over kda : keyword is detected

fw &lt;-- kda : FW event on keyword detection
fw -&gt; kda : keyword detection disabled

deactivate kda 

fw -&gt; fw : Keyphrase Buffer Manager \nin drain mode
drv &lt;-- fw : notification on keyword detection
'drv -&gt; fw : enable data transission to Host \n(Capture[Speech] pipeline to Host is running)
usr &lt;-- drv : notification on keyword detection (optional)
gpdma -&gt; dma 

activate dma

ref over dma 
Sending a burst of historic data (approx.2s) 
with detected keyword for
second stage verification on host.
end ref

gpdma &lt;-- dma 

deactivate dma

usr &lt;-- drv : snd_pcm_read completed 

fw -&gt; fw : Keyphrase Buffer Manager \nin passthrough mode 

loop Realtime capture
 usr -&gt; drv : snd_pcm_read
 gpdma -&gt; dma 
 activate dma
 gpdma &lt;-- dma 

 deactivate dma
 usr &lt;-- drv : snd_pcm_read completed 
end 

ref over usr 
User space optionally performs second stage keyword verification.
end ref

usr -&gt; drv : Trigger stop (alsamixer)
drv -&gt;drv : DAPM power down event
drv -&gt; fw : Stop Keyphrase Detection algorithm pipeline
usr -&gt; drv : Trigger stop (snd_pcm_drop / snd_pcm_free)
drv -&gt; fw : Close Speech capture stream
fw -&gt; gpdma 

deactivate gpdma

ref over usr, drv, fw , gpdma, kda, dma  
The flow can be repeated for next user command starting from snd_pcm_open()
end ref

deactivate fw
&#64;enduml"/>

</object></p>
<p class="caption"><span class="caption-number">Figure 40 </span><span class="caption-text">E2E flow for SW/FW components</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The fundamental assumption for the flow is that the keyphrase detection
sequence is controlled by the user space component (application) opening and
closing speech audio stream. The audio topology setup needs to happen before
the speech stream is opened. There is an optional sequence to customize the
keyword detection algorithm by behavior by sending run-time parameters. The
stream open and preparation phase covers sending HW parameters to DAI and
passing configuration parameters from the topology to FW components. The DAPM
events handlers are used to control a Keypharse Detector node of the FW
topology graph by the audio driver. Once the keyphrase is detected a
notification is sent to the driver. At the same time an internal event in FW
triggers draining buffered audio data in burst mode to the host. Once the
buffer is drained the speech capture pipeline starts to work as a passthrough
capture until it is closed by user space application.</p>
</div>
<div class="section" id="fw-topology">
<h2>FW topology<a class="headerlink" href="#fw-topology" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id3">
<p class="plantuml">
<object data="../../../_images/plantuml-df90f14784776ec19c8845a6bcf5ca40cf51dd0a.svg" type="image/svg+xml" style="width:1006px;height:401px;">
<img src="../../../_images/plantuml-df90f14784776ec19c8845a6bcf5ca40cf51dd0a.png" alt="&#64;startuml

'scale max 800 height

skinparam rectangle {
   backgroundColor&lt;&lt;dai&gt;&gt; #6fccdd
   backgroundColor&lt;&lt;dma&gt;&gt; #f6ed80
   backgroundColor&lt;&lt;stream&gt;&gt; #d6d6de
   borderColor&lt;&lt;stream&gt;&gt; #d6d6de
   borderColor&lt;&lt;ppl&gt;&gt; #a1a1ca

   backgroundColor&lt;&lt;event&gt;&gt; #f05772
   stereotypeFontColor&lt;&lt;event&gt;&gt; #ffffff
   fontColor&lt;&lt;event&gt;&gt; #ffffff

   backgroundColor&lt;&lt;cpu&gt;&gt; #f0f0f0
}


together {
rectangle &quot;MIC HW&quot; as dmic #DDDDDD

rectangle &quot;Speech Capture Pipeline&quot; as ppl_1 &lt;&lt;FW pipeline &gt;&gt;{
 rectangle &quot;MIC DAI&quot; as dai_1 &lt;&lt;dai&gt;&gt;
 rectangle &quot;Keyphrase Buffer Manager&quot; as kpb
 dai_1 -&gt; kpb : 2ch/16kHz/16bit
 rectangle &quot;Host&quot; as host
 }

}

rectangle &quot;Keyphrase Detector Pipeline&quot; as ppl_2 &lt;&lt;FW pipeline &gt;&gt;{
 rectangle &quot;Channel selector&quot; as sel
 rectangle &quot;Keyphrase detection algorithm&quot; as wov
 sel -&gt; wov : 1ch/16kHz/16bit
}

rectangle &quot;Host System&quot; as hsys {
 rectangle &quot;Host Memory&quot; as hmem #DDDDDD
}

dmic -&gt; dai_1
kpb -&gt; host
kpb -&gt; sel : 2ch/16kHz/16bit
host -&gt; hmem : 2ch/16kHz/16bit
wov ..&gt; kpb : FW events
wov ..&gt; hsys : FW notifications
&#64;enduml"/>

</object></p>
<p class="caption"><span class="caption-number">Figure 41 </span><span class="caption-text">Basic diagram for FW components topology</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The diagram provides an overview of FW and HW components that play a role in
keyphrase detection flows. The components are organized in pipelines:</p>
<ol class="arabic simple">
<li>Speech capture pipeline<ol class="loweralpha">
<li>DMIC DAI configures hw interface to capture data from microphones.</li>
<li>The Keyphrase Buffer Managrer is responsible for managing the data
captured by microphones. This includes control of an internal buffer for
incoming data and routing of incoming audio samples. The
audio buffer with historic audio data is implemented as a cyclic buffer.
While listeining to a keyphrase the component stores incoming data in an
internal buffer and copies it to a sink that leads toward the keyword
detector component. On successful detection of a keyphrase the buffer is
drained during a burst transmission to a host. Once the buffer is
drained it starts to work as a passthrough component on a capture
pipeline.</li>
<li>The host component configures transport (over DMA) to the host system.
The component is responsible for transmitting from local memory
(FW accessible) to remote (host CPU accessible) memory.</li>
</ol>
</li>
<li>Keyphrase detector pipeline<ol class="loweralpha">
<li>The channel selector is responsible for providing a single channel on
input to the keyphrase detection algorithm. The decision of which channel
to select is made by the platform integrator. The component can accept
parameters from a topology file.</li>
<li>The keyphrase detection algorithm accepts audio frames and returns
information if a keyphrase is detected. Note that the FW infrastructure
can allow a FW event to be sent to the Keyphrase Buffer Manager
component if keyphrase is detected. The component also sends a
notification to the audio driver and implements large parameters support.</li>
</ol>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, SOF Project
      <span class="lastupdated">
        Last updated on Aug 16, 2019.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>