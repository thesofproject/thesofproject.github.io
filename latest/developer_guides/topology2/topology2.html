<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Topology 2.0 &mdash; SOF Project 2.2 documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sof-custom.css" type="text/css" /><link rel="shortcut icon" href="../../_static/sof-favicon-16x16.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="UUID Usage in SOF" href="../uuid/index.html" />
    <link rel="prev" title="SOF Topology" href="../topology/topology.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> SOF Project<img src="../../_static/logo_sof_white_200w.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://sofproject.org">SOF project website</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction to the SOF Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#sdk-introduction-and-overview">SDK Introduction and Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#sof-source-code-tools-and-topologies">SOF source code, tools, and topologies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#host-os-drivers">Host OS Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#firmware-toolchain">Firmware Toolchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#dsp-emulator">DSP Emulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#general-faq">General FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#toolchain-faq">Toolchain FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html#build-sof">Build SOF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/build-guide/build-from-scratch.html">Build toolchains and SOF from sources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-from-scratch.html#step-1-set-up-the-workspace-directory">Step 1. Set up the workspace directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-from-scratch.html#step-2-set-up-build-environment">Step 2. Set up build environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-from-scratch.html#step-3-build-toolchains-from-source">Step 3. Build toolchains from source</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-from-scratch.html#step-4-build-and-sign-firmware-binaries">Step 4. Build and sign firmware binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-from-scratch.html#step-5-build-topology-and-tools">Step 5. Build topology and tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-from-scratch.html#step-6-build-linux-kernel">Step 6. Build Linux kernel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/build-guide/build-with-docker.html">Build SOF with Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-with-docker.html#set-up-the-workspace-directory">Set up the workspace directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-with-docker.html#set-up-docker">Set up Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-with-docker.html#build-firmware-binaries-with-docker">Build firmware binaries with Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-with-docker.html#build-topology-and-tools-with-docker">Build topology and tools with Docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/build-guide/build-3rd-party-toolchain.html">Build SOF with a 3rd Party Toolchain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-3rd-party-toolchain.html#cadence-tensilica-xtensa-c-c-compiler-xcc">Cadence® Tensilica® Xtensa® C/C++ Compiler (XCC)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/build-guide/build-with-zephyr.html">Build SOF with Zephyr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-with-zephyr.html#prepare">Prepare</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-with-zephyr.html#check-out-and-build">Check out and build</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/build-guide/build-with-zephyr.html#run">Run</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html#set-up-sof-on-a-linux-machine">Set up SOF on a Linux machine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/setup_linux/prepare_build_environment.html">Set up a Development Environment to Build the Kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/setup_linux/install_locally.html">Install the Kernel Locally</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/install_locally.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/install_locally.html#build-and-install-the-kernel">Build and install the kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/install_locally.html#update-and-rebuild">Update and rebuild</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/install_locally.html#remove-the-kernel">Remove the kernel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/setup_linux/setup_ktest_environment.html">Set up a Ktest-based Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/setup_ktest_environment.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/setup_ktest_environment.html#set-up-a-target">Set up a target</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/setup_ktest_environment.html#configure-ssh-without-password">Configure SSH without password</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_linux/setup_ktest_environment.html#build-and-install-the-kernel-with-ktest">Build and install the kernel with ktest</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html#set-up-sof-on-a-special-device">Set up SOF on a special device</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/setup_special_device/setup_minnowboard_turbot.html">Set up SOF on MinnowBoard Turbot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_special_device/setup_minnowboard_turbot.html#minnowboard-resources">MinnowBoard resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_special_device/setup_minnowboard_turbot.html#development">Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/setup_special_device/setup_up_2_board.html">Set up SOF on Up Squared board with Hifiberry DAC+ (STD)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_special_device/setup_up_2_board.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/setup_special_device/setup_up_2_board.html#setup-instructions">Setup Instructions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html#debug-audio-issues-on-intel-platforms">Debug Audio issues on Intel platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/intel_debug/introduction.html">Overview of Intel hardware platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/introduction.html#acpi-platforms-introduced-before-and-up-to-2015">ACPI platforms (introduced before and up to 2015)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/introduction.html#pci-devices-introduced-after-2016">PCI devices (introduced after 2016)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/introduction.html#user-space-and-filesystem-requirements">User space and filesystem requirements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html">Suggestions before filing an SOF bug</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#run-alsa-info">Run alsa-info</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#disable-sof-on-pci-hdaudio-devices-to-test-audio-playback">Disable SOF on PCI/HDaudio devices to test audio playback</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#try-booting-into-windows-first-then-reboot-into-linux">Try booting into Windows first, then reboot into Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#make-sure-the-me-is-enabled">Make sure the ME is enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#test-at-the-alsa-hw-device-level">Test at the ALSA ‘hw’ device level</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#verify-mixer-settings">Verify mixer settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#enable-dynamic-debug">Enable dynamic debug</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/intel_debug/suggestions.html#install-sof-logger">Install sof-logger</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html#sof-on-nxp-platforms">SOF on NXP platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/nxp/sof_imx_user_guide.html">SOF User Guide on NXP i.MX8 platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/nxp/sof_imx_user_guide.html#supported-nxp-platforms">Supported NXP platforms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/nxp/sof_imx_user_guide.html#toolchain">Toolchain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/nxp/sof_imx_user_guide.html#quick-run-with-sof-from-i-mx8-board-support-package">Quick run with SOF from i.MX8 Board Support Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/nxp/sof_imx_user_guide.html#build-sof-binaries-from-sources">Build SOF binaries from sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/nxp/sof_imx_user_guide.html#audio-scenarios">Audio scenarios</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../architectures/index.html">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architectures/host/index.html">Host Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html">SOF Linux Driver Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#driver-probe">Driver Probe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#sof-platform-driver">SOF Platform Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#ipc-processing">IPC Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#pcm-driver">PCM Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#power-management">Power Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#intel-drivers">Intel Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#support-for-high-definition-audio-hd-audio">Support for High Definition Audio (HD-Audio)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#kernel-configuration-kconfig">Kernel Configuration/Kconfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/linux_driver/architecture/sof_driver_arch.html#debug-options">Debug Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../architectures/firmware/index.html">Firmware Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/mem-mgmt.html">Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/mem-mgmt.html#heap-memory-zones">Heap Memory Zones</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/mem-mgmt.html#system-zone">System Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/mem-mgmt.html#runtime-zone">Runtime Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/mem-mgmt.html#buffer-zone">Buffer Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/mem-mgmt.html#shared-data">Shared Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/pm-runtime/index.html">Power Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pm-runtime/pm-dsp-core.html">Power Management for DSP Cores</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pm-runtime/intel/pm-dsp-core-cavs.html">cAVS pm-runtime for DSP core 0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pm-runtime/index.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/schedulers.html">Schedulers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/schedulers.html#scheduler-registration">Scheduler Registration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/schedulers.html#low-latency-scheduler">Low Latency Scheduler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/schedulers.html#edf-scheduler">EDF Scheduler</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/drivers/index.html">Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/drivers/index.html#registering-the-devices">Registering the Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/drivers/index.html#probing-on-demand">Probing on Demand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/drivers/index.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/components/index.html">Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/components/component-overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/components/component-mgmt-api.html">Managing the Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/pipelines/index.html">Pipelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pipelines/index.html#creating-a-pipeline">Creating a Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pipelines/index.html#executing-an-operation">Executing an Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pipelines/index.html#resetting-pipeline">Resetting Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pipelines/index.html#configuring-audio-parameters-preparing-for-use">Configuring Audio Parameters &amp; Preparing for Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pipelines/index.html#scheduling">Scheduling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/pipelines/index.html#processing">Processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/kd_integration/index.html">Keyword detection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/kd_integration/kd-integration.html">Keyword Detection integration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/firmware/index.html#vendor-specific-architecture-information">Vendor Specific Architecture Information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/firmware/index.html#intel">Intel</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/index.html#supported-platforms">Supported Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/index.html#minimum-platform-requirements">Minimum Platform Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/index.html#footprint">Footprint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/index.html#dsp-clock-speed">DSP Clock Speed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/index.html#toolchain">Toolchain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/index.html#platform-specific-information">Platform Specific Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-legacy/index.html">Intel Hifi2-EP Platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-legacy/merrifield/index.html">Intel Merrifield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-legacy/baytrail/index.html">Intel Bay Trail / Cherry Trail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-legacy/broadwell/index.html">Intel Broadwell</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-cavs/index.html">Intel CAVS Platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/commons/index.html">CAVS Commons</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/apollolake/index.html">Intel Apollo Lake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/cannonlake/index.html">Intel Cannon Lake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/icelake/index.html">Intel Ice Lake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/tigerlake/index.html">Intel Tiger Lake</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../algos/index.html">Algorithms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../algos/index.html#supplied-processing-algorithms">Supplied Processing Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../algos/index.html#algorithm-specific-information">Algorithm Specific Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../algos/src/sample_rate_conversion.html">Sample Rate Conversion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../algos/src/sample_rate_conversion.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/src/sample_rate_conversion.html#use-of-src-generator-tool">Use of SRC generator tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/src/sample_rate_conversion.html#test-the-src-component">Test the SRC component</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/src/sample_rate_conversion.html#polyphase-decomposition">Polyphase decomposition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/src/sample_rate_conversion.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../algos/demux/demux.html">Multiplexer/Demultiplexer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../algos/demux/demux.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../algos/tdfb/time_domain_fixed_beamformer.html">Time Domain Fixed Beamformer (TDFB)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../algos/tdfb/time_domain_fixed_beamformer.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/tdfb/time_domain_fixed_beamformer.html#beamformer-types">Beamformer types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/tdfb/time_domain_fixed_beamformer.html#microphone-array-geometries">Microphone array geometries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/tdfb/time_domain_fixed_beamformer.html#filter-bank-design-procedure">Filter bank design procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/tdfb/time_domain_fixed_beamformer.html#design-examples">Design examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../algos/tdfb/time_domain_fixed_beamformer.html#simulation">Simulation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#sof-core-concepts">SOF Core Concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Firmware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../firmware/component-tutorial/tut-intro.html">Hello World Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../firmware/component-tutorial/tut-i-basic-fw-code.html">Part I - Adding a Component Code to FW</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firmware/component-tutorial/tut-ii-topology.html">Part II - Modifying the Topology &amp; Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firmware/component-tutorial/tut-iii-runtime-params.html">Part III - Adding Run-time Parameter Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firmware/component-tutorial/tut-iv-exceptions.html">Part IV - Working with Exception Reports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../firmware/porting.html">Porting Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../firmware/porting.html#architecture-porting-guide">Architecture Porting Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firmware/porting.html#platform-porting-guide">Platform Porting Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../firmware/cmake.html">CMake Arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../firmware/cmake.html#firmware-unit-tests">Firmware &amp; Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firmware/cmake.html#firmware">Firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firmware/cmake.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firmware/cmake.html#host-testbench">Host Testbench</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../unit_tests.html">Unit Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../unit_tests.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../unit_tests.html#configuring-for-unit-tests">Configuring for unit tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../unit_tests.html#example-running-tests-for-apl">Example: Running tests for APL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../unit_tests.html#compiling-unit-tests-without-a-cross-compilation-toolchain">Compiling unit tests without a cross-compilation toolchain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../unit_tests.html#wrapping-objects-for-unit-tests">Wrapping objects for unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../unit_tests.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../xtrun/index.html">Xtensa Simulator (xt-run)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../xtrun/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xtrun/index.html#standalone-programs">Standalone programs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xtrun/index.html#unit-tests">Unit tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topology/topology.html">SOF Topology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topology/topology.html#topology-ingredients">1. Topology Ingredients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#widgets">1.1 Widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#tokens-vendor-tuples">1.2 Tokens/Vendor Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#kcontrols">1.3 Kcontrols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#pipelines">1.4 Pipelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#backend-dai">1.5 Backend DAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#backend-dai-link-config">1.6 Backend DAI link Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#dsp-core-index">1.7 DSP Core Index</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../topology/topology.html#create-a-new-topology">2. Create a new topology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#example-topology-with-single-pipeline">2.1 Example topology with single pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topology/topology.html#example-topology-with-multiple-pipelines">2.2 Example topology with multiple pipelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../topology/topology.html#debug-topology">3. Debug topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topology/topology.html#acronyms">4. Acronyms</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Topology 2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ingredients">Ingredients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#objects">Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arguments-in-top-level-configuration-files">Arguments in top-level configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#includes">Includes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#simple-machine-topology">Simple machine topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conditional-includes">Conditional includes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-2-0-configuration-files">Building 2.0 configuration files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#topology-reminders">Topology reminders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alsaconf-reminders">Alsaconf reminders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../uuid/index.html">UUID Usage in SOF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../uuid/index.html#why-uuids">Why UUIDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid/index.html#uuid-allocation">UUID allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid/index.html#uuid-in-topology">UUID in topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid/index.html#linux-topology-driver">Linux topology driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid/index.html#uuid-arrays-stored-section">UUID arrays stored section</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid/index.html#uuid-to-component-driver-mapping">UUID to component driver mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid/index.html#abi-alignment-for-uuid-support">ABI alignment for UUID support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../debugability/index.html">Debugability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../debugability/traces/index.html">Traces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugability/traces/index.html#building-processing-traces">Building &amp; Processing Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/traces/index.html#enabling-traces">Enabling Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/traces/index.html#adding-traces">Adding Traces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugability/logger/index.html">Logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugability/logger/index.html#logger-usage">Logger usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/logger/index.html#trace-filtering">Trace filtering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugability/coredump-reader/index.html">Coredump-reader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugability/coredump-reader/index.html#coredump-reader-usage">Coredump-reader usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/coredump-reader/index.html#usage-with-linux-sof-driver">Usage with Linux SOF Driver</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugability/probes/index.html">Probes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugability/probes/index.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/probes/index.html#enabling-probes">Enabling Probes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/probes/index.html#data-extraction">Data extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/probes/index.html#data-parsing">Data parsing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugability/ri-info/index.html">sof-ri-info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugability/ri-info/index.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugability/perf-counters/index.html">Performance Counters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugability/perf-counters/index.html#performance-counters-usage">Performance Counters usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugability/perf-counters/index.html#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tuning/sof-ctl.html">Runtime Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tuning/sof-ctl.html#find-out-effect-numids">Find out effect numids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tuning/sof-ctl.html#example-equalizer-settings">Example equalizer settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tuning/sof-ctl.html#help">Help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rimage/index.html">Rimage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rimage/extended_manifest.html">Extended Manifest</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rimage/extended_manifest.html#build-flow">Build flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rimage/extended_manifest.html#add-a-new-element">Add a new element</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rimage/index.html#build-flow">Build flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../linux_driver/index.html">SOF Linux Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../linux_driver/third_party/index.html">Third Party Features User Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../linux_driver/third_party/keyword_detect/keyword_detect.html">Keyword Detection Driver Implementation and User Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../virtualization/virtualization.html">SOF VirtIO design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/virtualization.html#general-information">General information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/virtualization.html#id1">SOF VirtIO design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../virtualization/virtualization.html#communication-channels">Communication channels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../virtualization/virtualization.html#topology">Topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../virtualization/virtualization.html#dpcm-audio-routing">DPCM audio routing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/virtualization.html#implementation">Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../virtualization/virtualization.html#initialization">Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../virtualization/virtualization.html#streaming">Streaming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../virtualization/virtualization.html#deactivation">Deactivation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../virtualization/running.html">Run SOF VirtIO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/running.html#general-information">General information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/running.html#create-a-vm-image">1. Create a VM image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/running.html#build-the-linux-kernel">2. Build the Linux kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/running.html#build-qemu">3. Build QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/running.html#build-the-sof-firmware">4. Build the SOF firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virtualization/running.html#run-qemu">5. Run QEMU</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../fuzzing/index.html">Fuzzing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fuzzing/fuzzing_in_docker.html">Fuzzing in Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../fuzzing/fuzzing_in_docker.html#instructions">Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fuzzing/fuzzing_in_docker.html#important-notes">Important notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../fuzzing/testbench_afl_fuzzing.html">Build a Fuzzing Testbench with AFL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../fuzzing/testbench_afl_fuzzing.html#install-afl">Install AFL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fuzzing/testbench_afl_fuzzing.html#build-a-testbench-with-afl-instrumentation">Build a testbench with AFL instrumentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fuzzing/testbench_afl_fuzzing.html#run-afl">Run AFL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fuzzing/testbench_afl_fuzzing.html#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../testbench/index.html">Testbench</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../testbench/build_testbench.html">Build and Run Testbench</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../testbench/build_testbench.html#host-testbench-sh">host-testbench.sh</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../testbench/debug_in_testbench.html">Debug Component in Testbench</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../testbench/debug_in_testbench.html#gdb-and-ddd">GDB and DDD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../testbench/debug_in_testbench.html#valgrind">Valgrind</a></li>
<li class="toctree-l4"><a class="reference internal" href="../testbench/debug_in_testbench.html#gprof">Gprof</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../testbench/prepare_new_component.html">Prepare a New Component for Testbench</a></li>
<li class="toctree-l3"><a class="reference internal" href="../testbench/test_audio_quality.html">Test Audio Quality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../add_new_arch.html">Adding a new DSP architecture to SOF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../add_new_arch.html#method-1-new-hal">Method 1 - New HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add_new_arch.html#method-2-use-existing-rtos">Method 2 - Use existing RTOS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#technical-notes">Technical Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tech/build-cmocka.html">Build Cmocka for Xtensa</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tech/build-cmocka.html#cmocka-fork">Cmocka fork</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tech/build-cmocka.html#simple-build-on-linux">Simple build on Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tech/build-cmocka.html#cross-platform-build">Cross-platform build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tech/compile_wsl.html">Build on Windows 10 with WSL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tech/compile_wsl.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tech/compile_wsl.html#enable-32-bit-binaries">Enable 32-bit binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tech/compile_wsl.html#fix-stat-in-32-bit-binaries">Fix stat in 32-bit binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tech/compile_wsl.html#compile">Compile</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../release.html#firmware-and-tools">Firmware and Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release.html#git">Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release.html#source-and-binary-releases">Source and Binary Releases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release.html#linux-driver">Linux Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributing to the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/contribute_guidelines.html#dco-sign-off-methods">DCO Sign-Off Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/contribute_guidelines.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#headings">Headings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#multi-column-lists">Multi-column lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#file-names-and-commands">File names and Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#tabs-spaces-and-indenting">Tabs, spaces, and indenting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/dox-source-code.html">Documenting the Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/dox-source-code.html#basic-rules">Basic Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/dox-source-code.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/process/bug-tracking.html">Bug Tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#life-cycle-of-a-bug">Life Cycle of a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#labels">Labels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#solution-labels">Solution Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#priority-labels">Priority Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#plaform-and-branch-labels">Plaform and Branch Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#other-optional-labels">Other optional Labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#how-to-report-a-bug">How to Report a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#how-to-close-a-bug">How to Close a Bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/process/docbuild.html">SOF Documentation Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#documentation-overview">Documentation overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#set-up-documentation-working-folders">Set up documentation working folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#install-documentation-tools">Install documentation tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#documentation-presentation-theme">Documentation presentation theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#run-documentation-processors">Run documentation processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#publish-content">Publish content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#installation-troubleshooting">Installation troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#windows-troubleshooting">Windows troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#diagram-compilation-troubleshooting">Diagram compilation troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/process/abiprocess.html">SOF ABI Change Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/abiprocess.html#sof-abi-definitions">SOF ABI definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/abiprocess.html#change-process">Change process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/abiprocess.html#document-modified-fields">Document modified fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/abiprocess.html#abi-change-approvers">ABI change approvers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/abiprocess.html#tsc">TSC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/abiprocess.html#sof-driver">SOF driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/linux/development_tree.html">Linux SOF drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/linux/development_tree.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/linux/development_tree.html#instructions-for-sof-developers">Instructions for SOF developers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/linux/development_tree.html#abi-changes">ABI changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/linux/development_tree.html#development-branch">Development branch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/linux/development_tree.html#rebasing-tree">Rebasing tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/linux/development_tree.html#upstream-merges">Upstream merges</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/linux/development_tree.html#development-flow">Development flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/linux/development_tree.html#sof-linux-maintainers">SOF Linux maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/linux/development_tree.html#sof-maintainers-process">SOF maintainers process</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/linux/development_tree.html#development-summary">Development summary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tsc/index.html">Technical Steering Committee (TSC)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tsc/representatives.html">TSC Representatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tsc/meetings.html">TSC Meetings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainers/index.html">SOF admin, maintainers and code owners</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../maintainers/admin.html">SOF admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../maintainers/merge_rights.html">Merge rights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../maintainers/code_owners.html">SOF code owners</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/uuid-api.html">UUID API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/dma-drivers-api.html">DMA Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/dai-drivers-api.html">DAI Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/pm-runtime-api.html">PM Runtime API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/platform-api.html">Platform API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/memory-alloc-api.html">Memory Allocation API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/audio-stream-api.html">Audio Stream API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/component-api.html">Component API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/component-ext-api.html">Component API Ext</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/uapi.html">uAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../presentations/index.html">Presentations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../presentations/index.html#sof-mentions">SOF Mentions</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SOF Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Developer Guides</a> &raquo;</li>
      <li>Topology 2.0</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="topology-2-0">
<span id="topology2"></span><h1><a class="toc-backref" href="#id3">Topology 2.0</a><a class="headerlink" href="#topology-2-0" title="Permalink to this headline">¶</a></h1>
<p>This is a high-level keyword extension on top of the existing ALSA conf topology format designed
to:</p>
<ul class="simple">
<li><p>Simplify the ALSA conf topology definitions by providing high level “classes”. In this way, topology
designers can write less configurations for commonly defined objects.</p></li>
<li><p>Allow simple reuse of objects. Define once and reuse (like M4) with the ability to alter object
configuration attributes from defaults.</p></li>
<li><p>Allow data type and value verification. This is not done today and frequently crops up in FW bug
reports.</p></li>
</ul>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#topology-2-0" id="id3">Topology 2.0</a></p>
<ul>
<li><p><a class="reference internal" href="#ingredients" id="id4">Ingredients</a></p>
<ul>
<li><p><a class="reference internal" href="#classes" id="id5">Classes</a></p>
<ul>
<li><p><a class="reference internal" href="#class-ingredients" id="id6">Class Ingredients</a></p></li>
<li><p><a class="reference internal" href="#a-simple-class" id="id7">A Simple Class</a></p></li>
<li><p><a class="reference internal" href="#attribute-default-values" id="id8">Attribute default values</a></p></li>
<li><p><a class="reference internal" href="#advanced-attribute-qualifiers" id="id9">Advanced attribute qualifiers</a></p></li>
<li><p><a class="reference internal" href="#automatic-attributes" id="id10">Automatic attributes</a></p></li>
<li><p><a class="reference internal" href="#attribute-constraints" id="id11">Attribute Constraints</a></p></li>
<li><p><a class="reference internal" href="#attributes-with-token-references" id="id12">Attributes with token references</a></p></li>
<li><p><a class="reference internal" href="#a-complete-class-definition" id="id13">A complete class definition</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#objects" id="id14">Objects</a></p>
<ul>
<li><p><a class="reference internal" href="#modifying-default-attributes" id="id15">Modifying default attributes</a></p></li>
<li><p><a class="reference internal" href="#objects-within-classes" id="id16">Objects within classes</a></p></li>
<li><p><a class="reference internal" href="#object-attribute-inheritance" id="id17">Object attribute inheritance</a></p></li>
<li><p><a class="reference internal" href="#setting-child-object-attributes" id="id18">Setting child object attributes</a></p></li>
<li><p><a class="reference internal" href="#nested-objects" id="id19">Nested Objects</a></p></li>
<li><p><a class="reference internal" href="#recursive-object-attribute-inheritance" id="id20">Recursive object attribute inheritance</a></p></li>
<li><p><a class="reference internal" href="#setting-child-object-attributes-deep-down-in-the-parent-object-tree" id="id21">Setting child object attributes deep down in the parent object tree</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#arguments-in-top-level-configuration-files" id="id22">Arguments in top-level configuration files</a></p></li>
<li><p><a class="reference internal" href="#includes" id="id23">Includes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#simple-machine-topology" id="id24">Simple machine topology</a></p></li>
<li><p><a class="reference internal" href="#conditional-includes" id="id25">Conditional includes</a></p></li>
<li><p><a class="reference internal" href="#building-2-0-configuration-files" id="id26">Building 2.0 configuration files</a></p></li>
<li><p><a class="reference internal" href="#topology-reminders" id="id27">Topology reminders</a></p></li>
<li><p><a class="reference internal" href="#alsaconf-reminders" id="id28">Alsaconf reminders</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="ingredients">
<h2><a class="toc-backref" href="#id4">Ingredients</a><a class="headerlink" href="#ingredients" title="Permalink to this headline">¶</a></h2>
<p>A typical 2.0 configuration file consists of the following components:</p>
<ul class="simple">
<li><p>Classes</p></li>
<li><p>Objects</p></li>
<li><p>Arguments</p></li>
<li><p>Conditional includes</p></li>
</ul>
<div class="section" id="classes">
<h3><a class="toc-backref" href="#id5">Classes</a><a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>Topology today has some common definitions that are often reused with slightly altered
configurations, such as widgets (components), pipelines, dais, pcm, and controls. Topology 2.0
introduces the concept of reusable class-like definitions that you can use to create commonly
used topology objects. Classes are defined with a new keyword <code class="docutils literal notranslate"><span class="pre">Class</span></code>.</p>
<p>A class definition always starts with the <code class="docutils literal notranslate"><span class="pre">Class</span></code> keyword followed by two nodes. The first node contains
the class group, and the second node contains the class name. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Base.data <span class="o">{}</span>
</pre></div>
</div>
<p>Note that ‘.’ is the node separator in the alsaconf syntax. In the above line, <code class="docutils literal notranslate"><span class="pre">Base</span></code> is the class
group and <code class="docutils literal notranslate"><span class="pre">data</span></code> is the class name. Currently, the alsatplg compiler supports the following class groups:
widget, pipeline, DAI, control and base. Most of the commonly used topology objects can be classified into
one of these groups. If a new class group is required, the alsatplg compiler should be updated to add
support for it.</p>
<div class="section" id="class-ingredients">
<h4><a class="toc-backref" href="#id6">Class Ingredients</a><a class="headerlink" href="#class-ingredients" title="Permalink to this headline">¶</a></h4>
<p>A minimalistic class definition should consist of the following:</p>
<ul>
<li><p>One or more attributes declared with the keyword <code class="docutils literal notranslate"><span class="pre">DefineAttribute</span></code>. Attributes are parameters that
are used to describe the object. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>DefineAttribute.<span class="s2">&quot;name&quot;</span> <span class="o">{</span>
        <span class="nb">type</span> <span class="s2">&quot;string&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>“name” is an attribute of type string.</p>
</li>
<li><p>Basic attribute qualifiers with the constructor array and unique attribute name. Attribute qualifiers
should be declared within the <code class="docutils literal notranslate"><span class="pre">attributes</span> <span class="pre">{}</span></code> node in the class definition.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># attribute qualifiers</span>
attributes <span class="o">{</span>
        <span class="c1">#</span>
        <span class="c1"># This tells the compiler how to construct the object&#39;s name. For example, if the</span>
        <span class="c1"># name attribute is set to &quot;EQIIR-Coefficients&quot;, the object name will be</span>
        <span class="c1"># constructed as &quot;class_name.EQIIR-Coefficients&quot;</span>
        <span class="c1">#</span>
        !constructor <span class="o">[</span>
                <span class="s2">&quot;name&quot;</span>
        <span class="o">]</span>
        <span class="c1">#</span>
        <span class="c1"># objects of the same class instantiated within the same alsaconf node have unique</span>
        <span class="c1"># name attribute</span>
        <span class="c1">#</span>
        unique  <span class="s2">&quot;name&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="a-simple-class">
<h4><a class="toc-backref" href="#id7">A Simple Class</a><a class="headerlink" href="#a-simple-class" title="Permalink to this headline">¶</a></h4>
<p>The following example demonstrates a simple class definition with two attributes and qualifiers:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Base.<span class="s2">&quot;data&quot;</span> <span class="o">{</span>

        <span class="c1"># name for the data object</span>
        DefineAttribute.<span class="s2">&quot;name&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1"># bytes data</span>
        DefineAttribute.<span class="s2">&quot;bytes&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1"># attribute qualifiers</span>
        attributes <span class="o">{</span>
                <span class="c1">#</span>
                <span class="c1"># This tells the compiler how to construct the object&#39;s name. For example, if the</span>
                <span class="c1"># name attribute is set to &quot;EQIIR-Coefficients&quot;, the object name will be</span>
                <span class="c1"># constructed as &quot;data.EQIIR-Coefficients&quot;</span>
                <span class="c1">#</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;name&quot;</span>
                <span class="o">]</span>
                <span class="c1">#</span>
                <span class="c1"># data objects instantiated within the same alsaconf node should have unique</span>
                <span class="c1"># name attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;name&quot;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> class definition belonging to the <code class="docutils literal notranslate"><span class="pre">base</span></code> class group contains two attributes,
name and bytes, both of type <code class="docutils literal notranslate"><span class="pre">string</span></code>. By default, all attributes have the <code class="docutils literal notranslate"><span class="pre">integer</span></code> type, unless
specified otherwise, like in the example above. Currently, topology 2.0 supports only <code class="docutils literal notranslate"><span class="pre">integer</span></code> and
<code class="docutils literal notranslate"><span class="pre">string</span></code> types for attributes.</p>
<p>The attribute qualifiers are used to describe how to instantiate an object from the class definition
and validate the attribute values.</p>
<p>In the above definition, the <code class="docutils literal notranslate"><span class="pre">constructor</span></code> array tells the compiler how to build the object’s name.
A data object instantiated with the name <code class="docutils literal notranslate"><span class="pre">EQIIR-Coefficients</span></code> will be given the name
<code class="docutils literal notranslate"><span class="pre">data.EQIIR-Coefficients</span></code>, that is the class name followed by ‘.’ followed by the constructor attribute
values separated by ‘.’.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">unique</span></code> qualifier indicates that multiple data objects instantiated within the same alsaconf node should
have unique values for their <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute. If two data objects are instantiated within the same alsaconf
node with the same <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute, errors will not occur, but the two object instances will be merged.
Additionally, the attribute values in the second instance will override the attribute values in the first one.
Therefore, it is the topology writer’s responsibility to ensure that multiple instances within the same parent
node have different unique attribute values.</p>
<p>Let’s consider another class definition example for the <code class="docutils literal notranslate"><span class="pre">pga</span></code> widget belonging to the class group <code class="docutils literal notranslate"><span class="pre">Widget</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Widget.<span class="s2">&quot;pga&quot;</span> <span class="o">{</span>
        <span class="c1">#</span>
        <span class="c1"># Pipeline ID for the pga widget object</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;index&quot;</span> <span class="o">{}</span>

        <span class="c1">#</span>
        <span class="c1"># pga object instance</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;instance&quot;</span> <span class="o">{}</span>

        <span class="c1"># attribute qualifiers</span>
        attributes <span class="o">{</span>
                <span class="c1">#</span>
                <span class="c1"># The PGA widget name is constructed using the index and instance</span>
                <span class="c1"># attributes. For ex: &quot;pga.1.1&quot; or &quot;pga.10.2&quot; etc.</span>
                <span class="c1">#</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;index&quot;</span>
                        <span class="s2">&quot;instance&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># pga widget objects instantiated within the same alsaconf node should have unique</span>
                <span class="c1"># instance attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;instance&quot;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that the pga object names are constructed with the class name
<code class="docutils literal notranslate"><span class="pre">pga</span></code> followed by two attribute values, index and instance. For
example, <code class="docutils literal notranslate"><span class="pre">pga.1.1</span></code>. Both attributes will have the <code class="docutils literal notranslate"><span class="pre">integer</span></code> type
by default because the definitions do not specify the type. In
practice, the unique instance attribute should also be part of the
constructor.</p>
</div>
<div class="section" id="attribute-default-values">
<h4><a class="toc-backref" href="#id8">Attribute default values</a><a class="headerlink" href="#attribute-default-values" title="Permalink to this headline">¶</a></h4>
<p>Optionally, class definitions can be extended to give default values for their attributes. Let’s add a
<code class="docutils literal notranslate"><span class="pre">uuid</span></code> attribute of type <code class="docutils literal notranslate"><span class="pre">string</span></code> to the <code class="docutils literal notranslate"><span class="pre">pga</span></code> class and give it a default value:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Widget.<span class="s2">&quot;pga&quot;</span> <span class="o">{</span>
        <span class="c1">#</span>
        <span class="c1"># Pipeline ID for the pga widget object</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;index&quot;</span> <span class="o">{}</span>

        <span class="c1">#</span>
        <span class="c1"># pga object instance</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;instance&quot;</span> <span class="o">{}</span>

        DefineAttribute.<span class="s2">&quot;uuid&quot;</span> <span class="o">{</span>
                <span class="nb">type</span> <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1"># attribute qualifiers</span>
        attributes <span class="o">{</span>
                <span class="c1">#</span>
                <span class="c1"># The PGA widget name is constructed using the index and instance</span>
                <span class="c1"># attributes. For ex: &quot;pga.1.1&quot; or &quot;pga.10.2&quot; etc.</span>
                <span class="c1">#</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;index&quot;</span>
                        <span class="s2">&quot;instance&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># pga widget objects instantiated within the same alsaconf node should have unique</span>
                <span class="c1"># instance attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;instance&quot;</span>
        <span class="o">}</span>

        <span class="c1"># default attribute values</span>
        uuid                    <span class="s2">&quot;7e:67:7e:b7:f4:5f:88:41:af:14:fb:a8:bd:bf:86:82&quot;</span>

<span class="o">}</span>
</pre></div>
</div>
<p>All pga objects will automatically be given the default uuid as specified above in the class definition.</p>
</div>
<div class="section" id="advanced-attribute-qualifiers">
<h4><a class="toc-backref" href="#id9">Advanced attribute qualifiers</a><a class="headerlink" href="#advanced-attribute-qualifiers" title="Permalink to this headline">¶</a></h4>
<p>Apart from the mandatory basic attribute qualifiers, you can qualify attributes in the class definition
using the following advanced keywords:</p>
<ul class="simple">
<li><p><strong>Mandatory:</strong> Attributes qualified as mandatory should be provided with a value in the object
instance, failing which the alsatplg compiler will emit an error. Objects with default values in the class
definition need not be qualified as mandatory.  Also, note that attributes in the constructor array are
mandatory by default as they are required for building the object’s name.</p></li>
<li><p><strong>Immutable:</strong> Attribute values that are set in the class definition and cannot be modified in
the object instance.</p></li>
<li><p><strong>Deprecated:</strong> Attributes that have been deprecated and should not be set in the object instance.</p></li>
<li><p><strong>Automatic:</strong> Attributes whose values are computed by the alsatplg compiler.</p></li>
</ul>
<p>Let’s add some extra attributes and advanced qualifers into the pga class definition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Widget.<span class="s2">&quot;pga&quot;</span> <span class="o">{</span>
        <span class="c1"># attribute definitions</span>
        DefineAttribute.instance <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;integer&quot;</span>
        <span class="o">}</span>
        DefineAttribute.index <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;integer&quot;</span>
        <span class="o">}</span>
        DefineAttribute.<span class="s2">&quot;type&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>
        DefineAttribute.<span class="s2">&quot;uuid&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>
        DefineAttribute.<span class="s2">&quot;preload_count&quot;</span> <span class="o">{}</span>

        <span class="c1"># attribute qualifiers</span>
        attributes <span class="o">{</span>
                <span class="c1">#</span>
                <span class="c1"># The PGA widget name is constructed using the index and instance attributes.</span>
                <span class="c1"># For ex: &quot;pga.1.1&quot; or &quot;pga.10.2&quot; etc.</span>
                <span class="c1">#</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;index&quot;</span>
                        <span class="s2">&quot;instance&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># immutable attributes should be given default values and cannot be modified in the object instance</span>
                <span class="c1">#</span>
                !immutable <span class="o">[</span>
                        <span class="s2">&quot;uuid&quot;</span>
                        <span class="s2">&quot;type&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># deprecated attributes should not be added in the object instance</span>
                <span class="c1">#</span>
                !deprecated <span class="o">[</span>
                        <span class="s2">&quot;preload_count&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># pga widget objects instantiated within the same alsaconf node should have</span>
                <span class="c1"># unique instance attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;instance&quot;</span>
        <span class="o">}</span>

        <span class="c1"># default attribute values</span>
        <span class="nb">type</span>            <span class="s2">&quot;pga&quot;</span>
        uuid            <span class="s2">&quot;7e:67:7e:b7:f4:5f:88:41:af:14:fb:a8:bd:bf:86:82&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="automatic-attributes">
<h4><a class="toc-backref" href="#id10">Automatic attributes</a><a class="headerlink" href="#automatic-attributes" title="Permalink to this headline">¶</a></h4>
<p>In some cases, an attribute value depends on other attribute values
and need to be computed during build time. Such attributes are
qualified with the <code class="docutils literal notranslate"><span class="pre">automatic</span></code> keyword in the class definition.
Refer to <a class="reference external" href="https://github.com/thesofproject/sof/blob/main/tools/topology/topology2/include/components/buffer.conf">buffer</a> for the complete class definition.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Widget.<span class="s2">&quot;buffer&quot;</span> <span class="o">{</span>
        <span class="c1"># Other attributes skipped for simplicity.</span>

        <span class="c1">#</span>
        <span class="c1"># Buffer size in bytes. Will be calculated based on the parameters of the pipeline to in which the</span>
        <span class="c1"># buffer object belongs</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;size&quot;</span> <span class="o">{</span>
                <span class="c1"># Token reference and type</span>
                token_ref       <span class="s2">&quot;sof_tkn_buffer.word&quot;</span>
        <span class="o">}</span>

        attributes <span class="o">{</span>
                <span class="c1">#</span>
                <span class="c1"># size attribute value for buffer objects is computed in the compiler</span>
                <span class="c1">#</span>
                !automatic <span class="o">[</span>
                        <span class="s2">&quot;size&quot;</span>
                <span class="o">]</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In the example above, the <code class="docutils literal notranslate"><span class="pre">size</span></code> attribute value of <code class="docutils literal notranslate"><span class="pre">buffer</span></code> is
computed based on the pipeline parameters, to which the buffer
belongs. Currently, the alsatplg compiler only has support for
computing the automatic attribute <code class="docutils literal notranslate"><span class="pre">size</span></code> for the buffer objects.
Support for automatic attributes in new class definitions
should be added in the alsatplg compiler if necessary.</p>
</div>
<div class="section" id="attribute-constraints">
<h4><a class="toc-backref" href="#id11">Attribute Constraints</a><a class="headerlink" href="#attribute-constraints" title="Permalink to this headline">¶</a></h4>
<p>One of the key features of Topology 2.0 is validation of the values provided for objects. This is achieved
with the help of constraints added to the attribute definition. Constraints can be added to an attribute using
the <code class="docutils literal notranslate"><span class="pre">constraints</span></code> keyword:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>DefineAttribute.<span class="s2">&quot;foo&quot;</span> <span class="o">{</span>
        constraints <span class="o">{}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Currently, three types of constraints are supported:</p>
<ul>
<li><p><strong>min:</strong> The minimum value for an attribute, applicable only to integer type attributes.</p></li>
<li><p><strong>max:</strong> The maximum value for an attribute, applicable only to integer type attributes.</p>
<p>For example, the pga class definition can be expanded with an attribute for <code class="docutils literal notranslate"><span class="pre">ramp_step_ms</span></code> with min and
max values as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>DefineAttribute.<span class="s2">&quot;ramp_step_ms&quot;</span> <span class="o">{</span>
        constraints <span class="o">{</span>
                min <span class="m">200</span>
                max <span class="m">500</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p><strong>valid values:</strong> an array of acceptable human-readable values, applicable only to string type attributes.</p>
<p>For example, the pga class can have an attribue for <code class="docutils literal notranslate"><span class="pre">ramp_step_type</span></code> with pre-defined values as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>DefineAttribute.<span class="s2">&quot;ramp_step_type&quot;</span> <span class="o">{</span>
        <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        constraints <span class="o">{</span>
                !valid_values <span class="o">[</span>
                        <span class="s2">&quot;linear&quot;</span>
                        <span class="s2">&quot;log&quot;</span>
                        <span class="s2">&quot;linear_zc&quot;</span>
                        <span class="s2">&quot;log_zc&quot;</span>
                <span class="o">]</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
<p>When the pga class is instantiated with a value that does not belong in
the <code class="docutils literal notranslate"><span class="pre">valid_values</span></code> array for <code class="docutils literal notranslate"><span class="pre">ramp_step_type</span></code>, the alsatplg compiler emits
an error along with the list of valid values.</p>
</div>
<div class="section" id="attributes-with-token-references">
<h4><a class="toc-backref" href="#id12">Attributes with token references</a><a class="headerlink" href="#attributes-with-token-references" title="Permalink to this headline">¶</a></h4>
<p>Typically, a lot of objects contain a private data section that is
composed of sets of tuple arrays. Some of the attributes in a class
definition may need to be packed into the tuple array. Such attributes
are identified with the <code class="docutils literal notranslate"><span class="pre">token_ref</span></code> node which contains the name of
the tuple array that the attribute should be built into. For example,
both the <code class="docutils literal notranslate"><span class="pre">ramp_step_ms</span></code> and <code class="docutils literal notranslate"><span class="pre">ramp_step_type</span></code> attributes in the pga
class need to be added to the tuple array. So, they contain the
token_ref node with the value <code class="docutils literal notranslate"><span class="pre">sof_tkn_volume.word</span></code> indicating that
the attributes should be packed with the <code class="docutils literal notranslate"><span class="pre">sof_tkn_volume</span> <span class="pre">tuple</span></code>
array of type <code class="docutils literal notranslate"><span class="pre">word</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># Volume ramp step in milliseconds</span>
<span class="c1">#</span>
DefineAttribute.<span class="s2">&quot;ramp_step_ms&quot;</span> <span class="o">{</span>
        <span class="c1"># Token set reference name</span>
        token_ref       <span class="s2">&quot;sof_tkn_volume.word&quot;</span>
        constraints <span class="o">{</span>
                min <span class="m">200</span>
                max <span class="m">500</span>
        <span class="o">}</span>
<span class="o">}</span>
DefineAttribute.<span class="s2">&quot;ramp_step_type&quot;</span> <span class="o">{</span>
        <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="c1"># Token set reference name</span>
        token_ref       <span class="s2">&quot;sof_tkn_volume.word&quot;</span>
        constraints <span class="o">{</span>
                !valid_values <span class="o">[</span>
                        <span class="s2">&quot;linear&quot;</span>
                        <span class="s2">&quot;log&quot;</span>
                        <span class="s2">&quot;linear_zc&quot;</span>
                        <span class="s2">&quot;log_zc&quot;</span>
                <span class="o">]</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Sometimes, <code class="docutils literal notranslate"><span class="pre">valid_values</span></code> for attributes might need to be translated
from the human readable values to integer tuple values so that it can
be parsed correctly by the kernel driver. In the example above, valid
values for <code class="docutils literal notranslate"><span class="pre">ramp_step_type</span></code> are defined as human readable string
values, such as linear and log. These values are translated to tuple
values (0, 1, etc) before getting added to the tuple array.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>DefineAttribute.<span class="s2">&quot;ramp_step_type&quot;</span> <span class="o">{</span>
        <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="c1"># Token set reference name</span>
        token_ref       <span class="s2">&quot;sof_tkn_volume.word&quot;</span>
        constraints <span class="o">{</span>
                !valid_values <span class="o">[</span>
                        <span class="s2">&quot;linear&quot;</span>
                        <span class="s2">&quot;log&quot;</span>
                        <span class="s2">&quot;linear_zc&quot;</span>
                        <span class="s2">&quot;log_zc&quot;</span>
                <span class="o">]</span>
                !tuple_values <span class="o">[</span>
                        <span class="m">0</span>
                        <span class="m">1</span>
                        <span class="m">2</span>
                        <span class="m">3</span>
                <span class="o">]</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="a-complete-class-definition">
<span id="complete-class-definition"></span><h4><a class="toc-backref" href="#id13">A complete class definition</a><a class="headerlink" href="#a-complete-class-definition" title="Permalink to this headline">¶</a></h4>
<p>Putting it all together, the following example demonstrates the complete definition for the pga widget class:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Widget.<span class="s2">&quot;pga&quot;</span> <span class="o">{</span>
        <span class="c1"># attribute definitions</span>
        DefineAttribute.instance <span class="o">{</span>
                <span class="nb">type</span>    integer
        <span class="o">}</span>
        DefineAttribute.index <span class="o">{</span>
                <span class="nb">type</span>    integer
        <span class="o">}</span>
        DefineAttribute.<span class="s2">&quot;type&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>
        DefineAttribute.<span class="s2">&quot;uuid&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
                <span class="c1"># Token set reference name and type</span>
                token_ref       <span class="s2">&quot;sof_tkn_comp.uuid&quot;</span>
        <span class="o">}</span>
        DefineAttribute.<span class="s2">&quot;preload_count&quot;</span> <span class="o">{}</span>

        <span class="c1">#</span>
        <span class="c1"># Volume ramp step in milliseconds</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;ramp_step_ms&quot;</span> <span class="o">{</span>
                <span class="c1"># Token set reference name</span>
                token_ref       <span class="s2">&quot;sof_tkn_volume.word&quot;</span>
                constraints <span class="o">{</span>
                        min <span class="m">200</span>
                        max <span class="m">500</span>
                <span class="o">}</span>
        <span class="o">}</span>
        DefineAttribute.<span class="s2">&quot;ramp_step_type&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
                <span class="c1"># Token set reference name</span>
                token_ref       <span class="s2">&quot;sof_tkn_volume.word&quot;</span>
                constraints <span class="o">{</span>
                        !valid_values <span class="o">[</span>
                                <span class="s2">&quot;linear&quot;</span>
                                <span class="s2">&quot;log&quot;</span>
                                <span class="s2">&quot;linear_zc&quot;</span>
                                <span class="s2">&quot;log_zc&quot;</span>
                        <span class="o">]</span>
                        !tuple_values <span class="o">[</span>
                                <span class="m">0</span>
                                <span class="m">1</span>
                                <span class="m">2</span>
                                <span class="m">3</span>
                        <span class="o">]</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1"># attribute qualifiers</span>
        attributes <span class="o">{</span>
                <span class="c1">#</span>
                <span class="c1"># The PGA widget name is constructed using the index and instance attributes.</span>
                <span class="c1"># For ex: &quot;pga.1.1&quot; or &quot;pga.10.2&quot; etc.</span>
                <span class="c1">#</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;index&quot;</span>
                        <span class="s2">&quot;instance&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># immutable attributes cannot be modified in the object instance</span>
                <span class="c1">#</span>
                !immutable <span class="o">[</span>
                        <span class="s2">&quot;uuid&quot;</span>
                        <span class="s2">&quot;type&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># deprecated attributes should not be added in the object instance</span>
                <span class="c1">#</span>
                !deprecated <span class="o">[</span>
                        <span class="s2">&quot;preload_count&quot;</span>
                <span class="o">]</span>

                <span class="c1">#</span>
                <span class="c1"># pga widget objects instantiated within the same alsaconf node should have</span>
                <span class="c1"># unique instance attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;instance&quot;</span>
        <span class="o">}</span>

        <span class="c1"># default attribute values</span>
        <span class="nb">type</span>            <span class="s2">&quot;pga&quot;</span>
        uuid            <span class="s2">&quot;7e:67:7e:b7:f4:5f:88:41:af:14:fb:a8:bd:bf:86:82&quot;</span>
        ramp_step_ms    <span class="m">200</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="objects">
<h3><a class="toc-backref" href="#id14">Objects</a><a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h3>
<p>Objects are used to instantiate multiple instances of the same class to avoid duplicating
common attribute definitions. Objects are instantiated with the new keyword <code class="docutils literal notranslate"><span class="pre">Object</span></code> followed by
three nodes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Widget.pga.<span class="s2">&quot;1&quot;</span> <span class="o">{}</span>
</pre></div>
</div>
<p>The nodes refer to the following elements:</p>
<ul class="simple">
<li><p>Class group to which the object class belongs. In this case, the class belongs to <code class="docutils literal notranslate"><span class="pre">Widget</span></code>.</p></li>
<li><p>Class name. That is <code class="docutils literal notranslate"><span class="pre">pga</span></code>.</p></li>
<li><p>Unique attribute value. This is the value for the attribute that is qualified as <code class="docutils literal notranslate"><span class="pre">unique</span></code> in the
class definition. That is <code class="docutils literal notranslate"><span class="pre">instance</span></code>.</p></li>
</ul>
<p>Using the pga class definition as described in
<a class="reference internal" href="#complete-class-definition"><span class="std std-ref">A complete class definition</span></a>, you can instantiate a pga widget
object in the following way:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Widget.pga.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
        index <span class="m">5</span>
<span class="o">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">1</span></code> is the value for the unique attribute <code class="docutils literal notranslate"><span class="pre">instance</span></code> in the pga class definition and the
<code class="docutils literal notranslate"><span class="pre">index</span></code> attribute is given the value of 5. As the class definition contains no other mandatory
attributes, the above instance is fully valid.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You do not need to duplicate commonly used attribute values in the
object instantiation. Objects automatically inherit the default
values for attributes from their class definition.</p>
</div>
<div class="section" id="modifying-default-attributes">
<h4><a class="toc-backref" href="#id15">Modifying default attributes</a><a class="headerlink" href="#modifying-default-attributes" title="Permalink to this headline">¶</a></h4>
<p>Attributes that have default values in the class definition can be overwritten by specifying the
new value in the object instance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Widget.pga.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
        index           <span class="m">5</span>
        ramp_step_ms    <span class="m">300</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The above object overrides the <code class="docutils literal notranslate"><span class="pre">ramp_step_ms</span></code> default value of 200 ms set in the class definition with the
new value of 300 ms.</p>
</div>
<div class="section" id="objects-within-classes">
<h4><a class="toc-backref" href="#id16">Objects within classes</a><a class="headerlink" href="#objects-within-classes" title="Permalink to this headline">¶</a></h4>
<p>Class definitions can optionally also include child objects that need to be instantiated for every
instance of the class object. For example, a pga widget typically always contains a volume mixer control.
The mixer control class definition is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Control.<span class="s2">&quot;mixer&quot;</span> <span class="o">{</span>
        <span class="c1">#</span>
        <span class="c1"># Pipeline ID for the mixer object</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;index&quot;</span> <span class="o">{}</span>

        <span class="c1">#</span>
        <span class="c1"># Instance of mixer object in the same alsaconf node</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;instance&quot;</span> <span class="o">{}</span>

        <span class="c1">#</span>
        <span class="c1"># Mixer name. A mixer object is included in the built topology only if it is given a</span>
        <span class="c1"># name</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;name&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1">#</span>
        <span class="c1"># Max volume setting</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;max&quot;</span> <span class="o">{}</span>

        DefineAttribute.<span class="s2">&quot;invert&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
                constraints <span class="o">{</span>
                        !valid_values <span class="o">[</span>
                                <span class="s2">&quot;true&quot;</span>
                                <span class="s2">&quot;false&quot;</span>
                        <span class="o">]</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1"># use mute LED</span>
        DefineAttribute.<span class="s2">&quot;mute_led_use&quot;</span> <span class="o">{</span>
                token_ref       <span class="s2">&quot;sof_tkn_mute_led.word&quot;</span>
        <span class="o">}</span>

        <span class="c1"># LED direction</span>
        DefineAttribute.<span class="s2">&quot;mute_led_direction&quot;</span> <span class="o">{</span>
                token_ref       <span class="s2">&quot;sof_tkn_mute_led.word&quot;</span>
        <span class="o">}</span>

        <span class="c1">#</span>
        <span class="c1"># access control for mixer</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;access&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;compound&quot;</span>
                constraints <span class="o">{</span>
                        !valid_values <span class="o">[</span>
                                <span class="s2">&quot;read_write&quot;</span>
                                <span class="s2">&quot;tlv_read_write&quot;</span>
                                <span class="s2">&quot;read&quot;</span>
                                <span class="s2">&quot;write&quot;</span>
                                <span class="s2">&quot;volatile&quot;</span>
                                <span class="s2">&quot;tlv_read&quot;</span>
                                <span class="s2">&quot;tlv_write&quot;</span>
                                <span class="s2">&quot;tlv_command&quot;</span>
                                <span class="s2">&quot;inactive&quot;</span>
                                <span class="s2">&quot;lock&quot;</span>
                                <span class="s2">&quot;owner&quot;</span>
                                <span class="s2">&quot;tlv_callback&quot;</span>
                        <span class="o">]</span>
                <span class="o">}</span>
        <span class="o">}</span>

        attributes <span class="o">{</span>
                <span class="c1">#</span>
                <span class="c1"># The Mixer object name is constructed using the index and instance arguments.</span>
                <span class="c1"># For ex: &quot;mixer.1.1&quot; or &quot;mixer.10.2&quot; etc.</span>
                <span class="c1">#</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;index&quot;</span>
                        <span class="s2">&quot;instance&quot;</span>
                <span class="o">]</span>
                !mandatory <span class="o">[</span>
                        <span class="s2">&quot;max&quot;</span>
                <span class="o">]</span>
                <span class="c1">#</span>
                <span class="c1"># mixer control objects instantiated within the same alsaconf node should have unique</span>
                <span class="c1"># index attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;instance&quot;</span>
        <span class="o">}</span>

        <span class="c1"># Default attribute values for mixer control</span>
        invert          <span class="s2">&quot;false&quot;</span>
        mute_led_use            <span class="m">0</span>
        mute_led_direction      <span class="m">0</span>
<span class="o">}</span>
</pre></div>
</div>
<p>You can add a mixer control object to the pga widget class definition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Widget.<span class="s2">&quot;pga&quot;</span> <span class="o">{</span>
        <span class="c1"># Attributes, qualifiers and default values are skipped for simplicity.</span>
        <span class="c1"># Refer to the complete class definition in &quot;Complete Class Definition&quot; for details</span>

        <span class="c1"># volume control for pga widget</span>
        Object.Control.mixer.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                        name <span class="s2">&quot;My Volume Control&quot;</span>
                        max <span class="m">32</span>
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The mixer control <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">Volume</span> <span class="pre">Control</span></code> will be programmatically added to all pga objects.</p>
</div>
<div class="section" id="object-attribute-inheritance">
<h4><a class="toc-backref" href="#id17">Object attribute inheritance</a><a class="headerlink" href="#object-attribute-inheritance" title="Permalink to this headline">¶</a></h4>
<p>One thing to note in the above object instantiation is that the mixer object has two mandatory attributes,
index and instance. But the index attribute value is missing in the instance. This is because the mixer control
object inherits the index attribute value from its parent pga object when it gets instantiated. For example,
consider the following pga object instance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Widget.pga.1 <span class="o">{</span>
        index <span class="m">5</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The mixer control object in the pga class definition inherits the index value of <code class="docutils literal notranslate"><span class="pre">5</span></code>. Inheritance occurs
only when a child object’s class definition shares an attribute of the same name with its parent class
definition. In the case of mixer control class and pga widget class, the shared attribute is <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p>
</div>
<div class="section" id="setting-child-object-attributes">
<span id="id1"></span><h4><a class="toc-backref" href="#id18">Setting child object attributes</a><a class="headerlink" href="#setting-child-object-attributes" title="Permalink to this headline">¶</a></h4>
<p>Let’s consider the pga class definition with the mixer control object again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Widget.<span class="s2">&quot;pga&quot;</span> <span class="o">{</span>
        <span class="c1"># Attributes, qualifiers and default values are skipped for simplicity.</span>
        <span class="c1"># Please refer to the complete class definition above for details</span>

        <span class="c1"># volume control for pga widget</span>
        Object.Control.mixer.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                        name <span class="s2">&quot;My Volume Control&quot;</span>
                        max <span class="m">32</span>
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that the mixer control object has its name set in the pga widget class definition. But, ideally, we want to
give the mixer control a new name whenever a new pga widget object is instantiated. You can do it like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Widget.pga.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
        index <span class="m">5</span>

        <span class="c1"># volume control&#39;</span>
        Object.Control.mixer.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                        name <span class="s2">&quot;My Control Volume 5&quot;</span>
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Now, the mixer control object is assigned the name <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">Control</span> <span class="pre">Volume</span> <span class="pre">5</span></code>.</p>
</div>
<div class="section" id="nested-objects">
<h4><a class="toc-backref" href="#id19">Nested Objects</a><a class="headerlink" href="#nested-objects" title="Permalink to this headline">¶</a></h4>
<p>Objects can also be instantiated as child objects within other object instances. For example, a
switch control can be added to pga widget objects during instantiation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Widget.pga.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
        index <span class="m">5</span>

        <span class="c1"># volume control</span>
        Object.Control.mixer.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                        name <span class="s2">&quot;My Control Volume 5&quot;</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1"># mute control</span>
        Object.Control.mixer.<span class="s2">&quot;2&quot;</span> <span class="o">{</span>
                        name <span class="s2">&quot;Mute Switch Control&quot;</span>
                        max <span class="m">1</span>
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note how the <code class="docutils literal notranslate"><span class="pre">unique</span></code> attribute for the two mixer control objects differs to keep the mixer instances unique.</p>
</div>
<div class="section" id="recursive-object-attribute-inheritance">
<h4><a class="toc-backref" href="#id20">Recursive object attribute inheritance</a><a class="headerlink" href="#recursive-object-attribute-inheritance" title="Permalink to this headline">¶</a></h4>
<p>Objects can be nested within objects that are nested within other objects themselves. In this case, the attribute
values can be inherited all the way from the top-level parent object. For example, consider the following class
definition for volume-playback pipeline:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Pipeline.<span class="s2">&quot;volume-playback&quot;</span> <span class="o">{</span>
        <span class="c1"># Other attributes and qualifiers ommitted for simplicity</span>
        DefineAttribute.<span class="s2">&quot;index&quot;</span> <span class="o">{}</span>

        DefineAttribute.<span class="s2">&quot;format&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1"># pipeline objects</span>
        Object.Widget <span class="o">{</span>
                <span class="c1"># Other objects ommitted for simplicity</span>

                pga.<span class="s2">&quot;1&quot;</span> <span class="o">{}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that the pga widget object above has no index attribute value. An object of volume-playback
class is instantiated as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Pipeline.volume-playback.1 <span class="o">{</span>
        index <span class="m">1</span>
        format s24le
<span class="o">}</span>
</pre></div>
</div>
<p>This ensures that all child objects within the volume-playback object will inherit the
index attribute value from it. So the pga widget object will have the same index. By the same
rule, the mixer control object within the pga widget object will also have the same index attribute
value of 1.</p>
</div>
<div class="section" id="setting-child-object-attributes-deep-down-in-the-parent-object-tree">
<h4><a class="toc-backref" href="#id21">Setting child object attributes deep down in the parent object tree</a><a class="headerlink" href="#setting-child-object-attributes-deep-down-in-the-parent-object-tree" title="Permalink to this headline">¶</a></h4>
<p>In <a class="reference internal" href="#setting-child-object-attributes"><span class="std std-ref">Setting child object attributes</span></a>, we saw that we can set child attribute values from its parent object instance.
For example, you can set the mixer control object’s name from the pga widget object instance. This
can be extended further and it is possible to set the mixer control name from the parent object of
the pga object. Consider the volume playback object instance in the previous section. We can set the
mixer control name for the pga object as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Pipeline.volume-playback.1 <span class="o">{</span>
        index <span class="m">1</span>
        format s24le
        Object.Widget.pga.1 <span class="o">{</span>
                Object.Control.mixer.1 <span class="o">{</span>
                        name    <span class="s2">&quot;My Control Volume 1&quot;</span>
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="arguments-in-top-level-configuration-files">
<h3><a class="toc-backref" href="#id22">Arguments in top-level configuration files</a><a class="headerlink" href="#arguments-in-top-level-configuration-files" title="Permalink to this headline">¶</a></h3>
<p>Arguments are used to pass build-time parameters that can be used for building multiple binaries
from the same configuration file. Consider the following top-level topology configuration file
with two pipelines:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># arguments</span>
@args <span class="o">[</span> DYNAMIC_PIPELINE <span class="o">]</span>
@args.DYNAMIC_PIPELINE <span class="o">{</span>
       <span class="nb">type</span> integer
       default <span class="m">0</span>
<span class="o">}</span>

Object.Pipeline <span class="o">{</span>
        volume-playback.1 <span class="o">{</span>
                dynamic_pipeline <span class="nv">$DYNAMIC_PIPELINE</span>
                index <span class="m">1</span>
                Object.Widget.pipeline.1 <span class="o">{</span>
                        stream_name <span class="s1">&#39;dai.HDA.0.playback&#39;</span>
                <span class="o">}</span>
                Object.Widget.host.playback <span class="o">{</span>
                        stream_name <span class="s1">&#39;Passthrough Playback 0&#39;</span>
                <span class="o">}</span>
                Object.Widget.pga.1 <span class="o">{</span>
                        Object.Control.mixer.1 <span class="o">{</span>
                                name <span class="s1">&#39;1 My Playback Volume&#39;</span>
                        <span class="o">}</span>
                <span class="o">}</span>
                format s24le
        <span class="o">}</span>
        volume-playback.3 <span class="o">{</span>
                dynamic_pipeline <span class="nv">$DYNAMIC_PIPELINE</span>
                index <span class="m">3</span>
                Object.Widget.pipeline.1 <span class="o">{</span>
                        stream_name <span class="s1">&#39;dai.HDA.2.playback&#39;</span>
                <span class="o">}</span>
                Object.Widget.host.playback <span class="o">{</span>
                        stream_name <span class="s1">&#39;Passthrough Playback 1&#39;</span>
                <span class="o">}</span>
                Object.Widget.pga.1 <span class="o">{</span>
                        Object.Control.mixer.1 <span class="o">{</span>
                                name <span class="s1">&#39;3 My Playback Volume&#39;</span>
                        <span class="o">}</span>
                <span class="o">}</span>
                format s24le
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In this example, the value for the <code class="docutils literal notranslate"><span class="pre">dynamic_pipeline</span></code> attribute in the volume-playback objects
is expanded from the provided value for the <code class="docutils literal notranslate"><span class="pre">DYNAMIC_PIPELINE</span></code> argument when building the
topology binary with the <code class="docutils literal notranslate"><span class="pre">-DDYNAMIC_PIPELINE=1</span></code> or <code class="docutils literal notranslate"><span class="pre">-DDYNAMIC_PIPELINE=0</span></code> option.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The alsatplg compiler only parses the arguments that are defined at
the top-level node in the machine topology file.</p>
</div>
</div>
<div class="section" id="includes">
<h3><a class="toc-backref" href="#id23">Includes</a><a class="headerlink" href="#includes" title="Permalink to this headline">¶</a></h3>
<p>When building a top-level configuration file, it should include all
class definitions for the objects being instantiated, failing which
the compiler will emit errors calling out missing class definitions.
All paths are relative to the directory specified by the environment
variable <code class="docutils literal notranslate"><span class="pre">ALSA_CONFIG_DIR</span></code>. You can specify the include paths for
dependencies as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;searchdir:include&gt;
&lt;searchdir:include/controls&gt;
&lt;searchdir:include/components&gt;
</pre></div>
</div>
<p>Include the class definitions as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;dai.conf&gt;
&lt;data.conf&gt;
&lt;pcm.conf&gt;
&lt;volume-playback.conf&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="simple-machine-topology">
<span id="id2"></span><h2><a class="toc-backref" href="#id24">Simple machine topology</a><a class="headerlink" href="#simple-machine-topology" title="Permalink to this headline">¶</a></h2>
<p>A machine topology typically consists of the following:</p>
<ul class="simple">
<li><p>Include paths pointing to the search directory for class definitions includes</p></li>
<li><p>Conf file Includes containing class definitions</p></li>
<li><p>Arguments</p></li>
<li><p>Pipeline objects</p></li>
<li><p>BE DAI links objects</p></li>
<li><p>PCM objects</p></li>
<li><p>Top-level pipeline connections</p></li>
</ul>
<p>Let’s consider a simple machine topology configuration file that includes a volume-playback pipeline,
a HDA type DAI link, a playback PCM, and the top-level connection:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Include paths</span>
&lt;searchdir:include&gt;
&lt;searchdir:include/common&gt;
&lt;searchdir:include/components&gt;
&lt;searchdir:include/controls&gt;
&lt;searchdir:include/dais&gt;
&lt;searchdir:include/pipelines&gt;

<span class="c1"># Include class definitions</span>
&lt;vendor-token.conf&gt;
&lt;tokens.conf&gt;
&lt;volume-playback.conf&gt;
&lt;dai.conf&gt;
&lt;data.conf&gt;
&lt;pcm.conf&gt;
&lt;pcm_caps.conf&gt;
&lt;fe_dai.conf&gt;
&lt;hda.conf&gt;
&lt;hw_config.conf&gt;
&lt;manifest.conf&gt;
&lt;route.conf&gt;

<span class="c1"># arguments</span>
@args.DYNAMIC_PIPELINE <span class="o">{</span>
       <span class="nb">type</span> integer
       default <span class="m">0</span>
<span class="o">}</span>

<span class="c1"># DAI definition</span>
Object.Dai <span class="o">{</span>
        HDA.0 <span class="o">{</span>
                name <span class="s1">&#39;Analog Playback and Capture&#39;</span>
                id <span class="m">4</span>
                default_hw_conf_id <span class="m">4</span>
                Object.Base.hw_config.HDA0 <span class="o">{}</span>
                Object.Widget.dai.1 <span class="o">{</span>
                        direction playback
                        index <span class="m">1</span>
                        <span class="nb">type</span> dai_in
                        stream_name <span class="s1">&#39;Analog Playback and Capture&#39;</span>
                        period_sink_count <span class="m">0</span>
                        period_source_count <span class="m">2</span>
                        format s32le
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>


<span class="c1"># Pipeline Definition</span>
Object.Pipeline <span class="o">{</span>
        volume-playback.1 <span class="o">{</span>
                dynamic_pipeline <span class="nv">$DYNAMIC_PIPELINE</span>
                index <span class="m">1</span>
                Object.Widget.pipeline.1 <span class="o">{</span>
                        stream_name <span class="s1">&#39;dai.HDA.0.playback&#39;</span>
                <span class="o">}</span>
                Object.Widget.host.playback <span class="o">{</span>
                        stream_name <span class="s1">&#39;Passthrough Playback 0&#39;</span>
                <span class="o">}</span>
                Object.Widget.pga.1 <span class="o">{</span>
                        Object.Control.mixer.1 <span class="o">{</span>
                                name <span class="s1">&#39;1 My Playback Volume&#39;</span>
                        <span class="o">}</span>
                <span class="o">}</span>
                format s24le
        <span class="o">}</span>
<span class="o">}</span>

<span class="c1"># PCM Definitions</span>
Object.PCM <span class="o">{</span>
        pcm.0 <span class="o">{</span>
                name <span class="s1">&#39;HDA Analog&#39;</span>
                Object.Base.fe_dai.<span class="s1">&#39;HDA Analog&#39;</span> <span class="o">{}</span>
                Object.PCM.pcm_caps.playback <span class="o">{</span>
                        name <span class="s1">&#39;Passthrough Playback 0&#39;</span>
                        formats <span class="s1">&#39;S24_LE,S16_LE&#39;</span>
                <span class="o">}</span>
                direction playback
                id <span class="m">0</span>
        <span class="o">}</span>
<span class="o">}</span>

<span class="c1"># Top-level pipeline connection</span>
<span class="c1"># Buffer.1. -&gt; dai.HDA.1.playback</span>
Object.Base.route.1 <span class="o">{</span>
        <span class="nb">source</span> <span class="s1">&#39;buffer.1.1&#39;</span>
        sink <span class="s1">&#39;dai.HDA.1.playback&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that the above configuration file only includes the top-level route between the buffer widget
<code class="docutils literal notranslate"><span class="pre">buffer.1.1</span></code> in the volume-playback pipeline and the dai widget <code class="docutils literal notranslate"><span class="pre">dai.HDA.1.playback</span></code>. The connections
between the widgets in the volume-playback pipeline are defined in the class definition.</p>
<p>Let’s peek into the volume-playback pipeline class definition to look at the route objects contained within
the class definition. Refer to <a class="reference external" href="https://github.com/thesofproject/sof/blob/main/tools/topology/topology2/include/pipelines/volume-playback.conf">volume-playback</a> for the complete class definition.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Pipeline.<span class="s2">&quot;volume-playback&quot;</span> <span class="o">{</span>
        <span class="c1"># pipeline attributes skipped for simplicity</span>

        attributes <span class="o">{</span>
                <span class="c1"># pipeline name is constructed as &quot;volume-playback.1&quot;</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;index&quot;</span>
                <span class="o">]</span>
                !mandatory <span class="o">[</span>
                        <span class="s2">&quot;format&quot;</span>
                <span class="o">]</span>
                !immutable <span class="o">[</span>
                        <span class="s2">&quot;direction&quot;</span>
                <span class="o">]</span>
                <span class="c1">#</span>
                <span class="c1"># volume-playback objects instantiated within the same alsaconf node should have</span>
                <span class="c1"># unique instance attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;instance&quot;</span>
        <span class="o">}</span>

        <span class="c1"># Widget objects that constitute the volume-playback pipeline</span>
        Object.Widget <span class="o">{</span>
                pipeline.<span class="s2">&quot;1&quot;</span> <span class="o">{}</span>

                host.<span class="s2">&quot;playback&quot;</span> <span class="o">{</span>
                        <span class="nb">type</span>            <span class="s2">&quot;aif_in&quot;</span>
                <span class="o">}</span>

                buffer.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                        periods <span class="m">2</span>
                        caps            <span class="s2">&quot;host&quot;</span>
                <span class="o">}</span>

                pga.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                        Object.Control.mixer.1 <span class="o">{</span>
                                Object.Base.tlv.<span class="s2">&quot;vtlv_m64s2&quot;</span> <span class="o">{</span>
                                        Object.Base.scale.<span class="s2">&quot;m64s2&quot;</span> <span class="o">{}</span>
                                <span class="o">}</span>
                        <span class="o">}</span>
                <span class="o">}</span>

                buffer.<span class="s2">&quot;2&quot;</span> <span class="o">{</span>
                        periods <span class="m">2</span>
                        caps            <span class="s2">&quot;dai&quot;</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1"># Pipeline connections.</span>
        <span class="c1"># The index attribute values for the source/sink widgets will be populated</span>
        <span class="c1"># when the route objects are built</span>
        Object.Base <span class="o">{</span>
                route.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                        <span class="nb">source</span>  <span class="s2">&quot;host..playback&quot;</span>
                        sink    <span class="s2">&quot;buffer..1&quot;</span>
                <span class="o">}</span>

                route.<span class="s2">&quot;2&quot;</span> <span class="o">{</span>
                        <span class="nb">source</span>  <span class="s2">&quot;buffer..1&quot;</span>
                        sink    <span class="s2">&quot;pga..1&quot;</span>
                <span class="o">}</span>

                route.<span class="s2">&quot;3&quot;</span> <span class="o">{</span>
                        <span class="nb">source</span>  <span class="s2">&quot;pga..1&quot;</span>
                        sink    <span class="s2">&quot;buffer..2&quot;</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1"># Default attribute values</span>
        direction       <span class="s2">&quot;playback&quot;</span>
        time_domain     <span class="s2">&quot;timer&quot;</span>
        period          <span class="m">1000</span>
        channels        <span class="m">2</span>
        rate            <span class="m">48000</span>
        priority        <span class="m">0</span>
        core            <span class="m">0</span>
        frames          <span class="m">0</span>
        mips            <span class="m">5000</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The pipeline class definition is fairly easy to follow except for the route object instances.
Let’s analyze it a bit further. The route class definition is defined as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Class.Base.<span class="s2">&quot;route&quot;</span> <span class="o">{</span>
        <span class="c1"># sink widget name</span>
        DefineAttribute.<span class="s2">&quot;sink&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1"># source widget name for route</span>
        DefineAttribute.<span class="s2">&quot;source&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1"># control name for the route</span>
        DefineAttribute.<span class="s2">&quot;control&quot;</span> <span class="o">{</span>
                <span class="nb">type</span>    <span class="s2">&quot;string&quot;</span>
        <span class="o">}</span>

        <span class="c1">#</span>
        <span class="c1"># Pipeline ID of the pipeline the route object belongs to</span>
        <span class="c1">#</span>
        DefineAttribute.<span class="s2">&quot;index&quot;</span> <span class="o">{}</span>

        <span class="c1"># unique instance for route object in the same alsaconf node</span>
        DefineAttribute.<span class="s2">&quot;instance&quot;</span> <span class="o">{}</span>

        attributes <span class="o">{</span>
                !constructor <span class="o">[</span>
                        <span class="s2">&quot;instance&quot;</span>
                <span class="o">]</span>
                !mandatory <span class="o">[</span>
                        <span class="s2">&quot;source&quot;</span>
                        <span class="s2">&quot;sink&quot;</span>
                <span class="o">]</span>
                <span class="c1">#</span>
                <span class="c1"># route objects instantiated within the same alsaconf node should have unique</span>
                <span class="c1"># index attribute</span>
                <span class="c1">#</span>
                unique  <span class="s2">&quot;instance&quot;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note that a route object is expected to have instance, source, and sink attributes.</p>
<p>Let’s consider the route objects in the volume-playback class again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Base <span class="o">{</span>
        route.<span class="s2">&quot;1&quot;</span> <span class="o">{</span>
                <span class="nb">source</span>  <span class="s2">&quot;host..playback&quot;</span>
                sink    <span class="s2">&quot;buffer..1&quot;</span>
        <span class="o">}</span>

        route.<span class="s2">&quot;2&quot;</span> <span class="o">{</span>
                <span class="nb">source</span>  <span class="s2">&quot;buffer..1&quot;</span>
                sink    <span class="s2">&quot;pga..1&quot;</span>
        <span class="o">}</span>

        route.<span class="s2">&quot;3&quot;</span> <span class="o">{</span>
                <span class="nb">source</span>  <span class="s2">&quot;pga..1&quot;</span>
                sink    <span class="s2">&quot;buffer..2&quot;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Notice that the source and sink attributes are defined for all of the routes. For example, the second route object
<code class="docutils literal notranslate"><span class="pre">Object.Base.route.2</span></code> has a sink attribute value of <code class="docutils literal notranslate"><span class="pre">pga..1</span></code>. Referring back to the pga widget class definition
in <a class="reference internal" href="#complete-class-definition"><span class="std std-ref">A complete class definition</span></a>, we know that a pga widget object’s constructor has two attributes, <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">instance</span></code>.
We know the instance of the pga widget in the volume-playback class is 1 by looking at the list of widgets.
But the index attribute value for the pga widget in the pipeline is unknown. It will only be set from a top-level
topology config file as in <a class="reference internal" href="#simple-machine-topology"><span class="std std-ref">Simple machine topology</span></a>. Therefore, the index attribute is left empty in the class definition.
The alsatplg compiler will populate the index attribute with the appropriate value when the route object is built. For the
machine topology above, the route object <code class="docutils literal notranslate"><span class="pre">Object.base.route.2</span></code> will be built with the right pipeline IDs as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.base.route.2 <span class="o">{</span>
        <span class="nb">source</span>  <span class="s2">&quot;buffer.1.1&quot;</span>
        sink <span class="s2">&quot;pga.1.1&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Currently, alsatplg can fill in attribute values only for the route object source
and sink attributes. If needed, this feature can be extended for other types of objects.</p>
</div>
<div class="section" id="conditional-includes">
<h2><a class="toc-backref" href="#id25">Conditional includes</a><a class="headerlink" href="#conditional-includes" title="Permalink to this headline">¶</a></h2>
<p>Conditional includes allow building multiple topology binaries from the same input configuration file.
For example, let’s consider the HDA generic machine topology. The number of DMICs determines whether
the DMIC configuration file should be included or not. This can be achieved as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>@args.DMIC_COUNT <span class="o">{</span>
       <span class="nb">type</span> integer
       default <span class="m">0</span>
<span class="o">}</span>

<span class="c1"># include DMIC config if needed</span>
IncludeByKey.DMIC_INCLUDE <span class="o">{</span>
        <span class="s2">&quot;[1-4]&quot;</span> <span class="s2">&quot;include/platform/intel/dmic-generic.conf&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The regular expression <code class="docutils literal notranslate"><span class="pre">[1-4]</span></code> indicates that the dmic-generic.conf file should be included if
the DMIC_COUNT argument value is between 1 and 4. Assuming the top-level file is called
<code class="docutils literal notranslate"><span class="pre">sof-hda-generic.conf</span></code>, you can build two separate topology binaries with the following commands:</p>
<ul>
<li><p>For machines with no DMICs:</p>
<p><code class="docutils literal notranslate"><span class="pre">alsatplg</span> <span class="pre">-p</span> <span class="pre">-c</span> <span class="pre">sof-hda-generic.conf</span> <span class="pre">-o</span> <span class="pre">sof-hda-generic.tplg</span></code></p>
</li>
<li><p>For machines with two DMICs:</p>
<p><code class="docutils literal notranslate"><span class="pre">alsatplg</span> <span class="pre">-D</span> <span class="pre">DMIC_COUNT=2</span> <span class="pre">-p</span> <span class="pre">-c</span> <span class="pre">sof-hda-generic.conf</span> <span class="pre">-o</span> <span class="pre">sof-hda-generic-2ch.tplg</span></code></p>
</li>
</ul>
<p>Conditional includes are not limited to top-level configuration files. You can add them to any node
in the configuration file to include the configuration at the specified node. For example, we can conditionally
include the right filter coefficients for the byte controls in the EQIIR widget.</p>
<p>Define the argument for the coefficients in the top-level topology file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>@args.EQIIR_BYTES <span class="o">{</span>
       <span class="nb">type</span> string
       default <span class="s2">&quot;highpass_40hz_0db_48khz&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>And then include the coefficients:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Object.Widget.eqiir.1 <span class="o">{</span>
        Object.Control.bytes.1 <span class="o">{</span>
                name <span class="s2">&quot;my eqiir byte control&quot;</span>
                <span class="c1"># EQIIR filter coefficients</span>
                IncludeByKey.EQIIR_BYTES <span class="o">{</span>
                        <span class="s2">&quot;[highpass.40hz.0db.48khz]&quot;</span> <span class="s2">&quot;include/components/eqiir/highpass_40hz_0db_48khz.conf&quot;</span>
                        <span class="s2">&quot;[highpass.40hz.20db.48khz]&quot;</span> <span class="s2">&quot;include/components/eqiir/highpass_40hz_20db_48khz.conf&quot;</span>
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="building-2-0-configuration-files">
<h2><a class="toc-backref" href="#id26">Building 2.0 configuration files</a><a class="headerlink" href="#building-2-0-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>You can use alsatplg to compile Topology 2.0 configuration files and produce the topology binary files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alsatplg &lt;-D <span class="nv">args</span><span class="o">=</span>values&gt; -p -c input.conf -o output.tplg
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-D</span></code> switch is used to pass comma-separated argument values to the top-level configuration file.</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">-P</span></code> switch to convert a 2.0 configuration file to the 1.0 configuration file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alsatplg &lt;-D <span class="nv">args</span><span class="o">=</span>values&gt; -P input.conf -o output.conf
</pre></div>
</div>
</div>
<div class="section" id="topology-reminders">
<h2><a class="toc-backref" href="#id27">Topology reminders</a><a class="headerlink" href="#topology-reminders" title="Permalink to this headline">¶</a></h2>
<p>Review the following topology considerations:</p>
<ul class="simple">
<li><p>“index” refers to the pipeline ID in pipeline, widget, and control class groups.</p></li>
<li><p>“id” in the DAI class group objects refers to the link ID as defined in the machine driver in the kernel.</p></li>
</ul>
</div>
<div class="section" id="alsaconf-reminders">
<h2><a class="toc-backref" href="#id28">Alsaconf reminders</a><a class="headerlink" href="#alsaconf-reminders" title="Permalink to this headline">¶</a></h2>
<p>Review the following alsaconf considerations:</p>
<ul>
<li><p>“.” refers to a node separator. “foo.bar value” is quivalent to the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>foo <span class="o">{</span>
        bar value
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p>Arrays are defined with []. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>!constructor <span class="o">[</span>
        <span class="s2">&quot;foo&quot;</span>
        <span class="s2">&quot;bar&quot;</span>
<span class="o">]</span>
</pre></div>
</div>
<p>We recommend to use the exclamation mark (!) in array definitions
within the class definition. Use it to ensure that the array items
are not duplicated if the class configuration file is included more
than once from different sources.</p>
</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SOF Project.
      <span class="lastupdated">Last updated on Jul 07, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M4BL5NF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'GTM-M4BL5NF', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>