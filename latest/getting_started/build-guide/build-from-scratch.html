

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Build SOF from scratch &mdash; SOF Project 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/sof-favicon-16x16.png"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sof-custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Build SOF with Docker" href="build-with-docker.html" />
    <link rel="prev" title="Getting Started Guides" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SOF Project
          

          
            
            <img src="../../_static/logo_sof_white_200w.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://sofproject.org">SOF project website</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction to the SOF Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#sdk-introduction-and-overview">SDK Introduction and Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#sof-source-code-tools-and-topologies">SOF source code, tools and topologies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#host-os-drivers">Host OS Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#firmware-toolchain">Firmware Toolchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#dsp-emulator">DSP Emulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#general-faq">General FAQ</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Getting Started Guides</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#building-sof">Building SOF</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Build SOF from scratch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#build-sof-binaries">Build SOF binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-linux-kernel">Build Linux kernel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="build-with-docker.html">Build SOF with Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="build-with-docker.html#set-up-docker">Set up Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="build-with-docker.html#id1">Build with Docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="build-3rd-party-toolchain.html">Build SOF with a 3rd Party Toolchain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="build-3rd-party-toolchain.html#cadence-tensilica-xtensa-c-c-compiler-xcc">Cadence® Tensilica® Xtensa® C/C++ Compiler (XCC)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#setting-up-sof-on-hardware">Setting up SOF on hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../setup/setup_minnowboard_turbot.html">Set up SOF on MinnowBoard Turbot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_minnowboard_turbot.html#minnowboard-resources">MinnowBoard resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_minnowboard_turbot.html#development">Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../setup/setup_up_2_board.html">Set up SOF on Up Squared board with Hifiberry DAC+ (STD)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_up_2_board.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_up_2_board.html#setup-instructions">Setup Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../setup/setup_ktest_environment.html">Set up a Ktest-based environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_ktest_environment.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_ktest_environment.html#prerequisites-on-the-target-device">Prerequisites on the target device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_ktest_environment.html#configure-ssh-without-password">Configure SSH without password</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/setup_ktest_environment.html#create-a-linux-development-environment">Create a linux development environment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../architectures/index.html">Supported Architectures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architectures/host/index.html">Host Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/host/index.html#sof-driver-architecture">SOF Driver Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/host/index.html#linux-driver">Linux Driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../architectures/dsp/index.html">DSP Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/dsp/index.html#adding-a-new-dsp-architecture-to-sof">Adding a new DSP architecture to SOF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/dsp/index.html#method-1-new-hal">Method 1 - New HAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/dsp/index.html#method-2-use-existing-rtos">Method 2 - Use existing RTOS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../architectures/dsp/index.html#vendor-specific-architecture-information">Vendor Specific Architecture Information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../architectures/dsp/index.html#intel">Intel</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Supported Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/intel-legacy/index.html">Intel Hifi2-EP Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-legacy/merrifield/index.html">Intel Merrifield</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-legacy/baytrail/index.html">Intel Baytrail/CherryTrail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-legacy/broadwell/index.html">Intel Broadwell</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/intel-cavs/index.html">Intel CAVS Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-cavs/commons/index.html">CAVS Commons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/commons/work-queue.html">Work Queues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/commons/multicore-processing.html">Multicore Processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-cavs/apollolake/index.html">Intel Apollo Lake</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/apollolake/apl-memory.html">APL Memory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-cavs/cannonlake/index.html">Intel Cannon Lake</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/cannonlake/cnl-memory.html">CNL Memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../platforms/intel-cavs/cannonlake/cnl-config.html">CNL Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../platforms/intel-cavs/icelake/index.html">Intel Ice Lake</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guides/index.html">Developer Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/introduction.html">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/introduction.html#sof-core-concepts">SOF Core Concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/firmware/index.html">Firmware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/component-tutorial/tut-intro.html">Hello World Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/component-tutorial/tut-i-basic-fw-code.html">Part I - Adding a Component Code to FW</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/component-tutorial/tut-ii-topology.html">Part II - Modifying the Topology &amp; Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/component-tutorial/tut-iii-runtime-params.html">Part III - Adding Run-time Parameter Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/component-tutorial/tut-iv-exceptions.html">Part IV - Working with Exception Reports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/mem-mgmt.html">Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/mem-mgmt.html#heap-memory-zones">Heap Memory Zones</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/mem-mgmt.html#system-zone">System Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/mem-mgmt.html#runtime-zone">Runtime Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/mem-mgmt.html#buffer-zone">Buffer Zone</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/work-queue.html">Work Queue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/work-queue.html#basic-work-queue-flow">Basic Work Queue Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/work-queue.html#extensions-for-smp-architectures">Extensions for SMP Architectures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/drivers/index.html">Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/drivers/index.html#registering-the-devices">Registering the Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/drivers/index.html#probing-on-demand">Probing on Demand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/drivers/index.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/components/index.html">Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/components/component-overview.html">Components Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/components/component-api.html">Component API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/components/component-mgmt-api.html">Managing the Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/pipelines/index.html">Pipelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/pipelines/index.html#creating-a-pipeline">Creating a Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/pipelines/index.html#executing-an-operation">Executing an Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/pipelines/index.html#resetting-pipeline">Resetting Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/pipelines/index.html#configuring-audio-parameters-preparing-for-use">Configuring Audio Parameters &amp; Preparing for Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/pipelines/index.html#scheduling">Scheduling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/pipelines/index.html#processing">Processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/porting.html">Porting Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/porting.html#architecture-porting-guide">Architecture Porting Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/porting.html#platform-porting-guide">Platform Porting Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/kd_integration/index.html">Keyword detection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/kd_integration/kd-integration.html">Keyword Detection integration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/firmware/cmake.html">CMake Arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/cmake.html#firmware-unit-tests">Firmware &amp; Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/cmake.html#firmware">Firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/cmake.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/firmware/cmake.html#host-testbench">Host Testbench</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/unit_tests.html">Unit Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/unit_tests.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/unit_tests.html#configuring-for-unit-tests">Configuring for unit tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/unit_tests.html#example-running-tests-for-apl">Example: Running tests for APL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/unit_tests.html#wrapping-objects-for-unit-tests">Wrapping objects for unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/unit_tests.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/topology/topology.html">SOF Topology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/topology/topology.html#topology-ingredients">1. Topology Ingredients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#widgets">1.1 Widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#tokens-vendor-tuples">1.2 Tokens/Vendor Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#kcontrols">1.3 Kcontrols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#pipelines">1.4 Pipelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#backend-dai">1.5 Backend DAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#backend-dai-link-config">1.6 Backend DAI link Config</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/topology/topology.html#how-to-create-a-new-topology">2. How to create a new topology?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#example-topology-with-single-pipeline">2.1 Example topology with single pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/topology/topology.html#example-topology-with-multiple-pipelines">2.2 Example topology with multiple pipelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/topology/topology.html#debugging-topology">3. Debugging topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/topology/topology.html#acronyms">4. Acronyms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/debugability/index.html">Debugability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/debugability/traces/index.html">Traces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/debugability/traces/index.html#building-processing-traces">Building &amp; Processing Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/debugability/traces/index.html#enabling-traces">Enabling Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/debugability/traces/index.html#adding-traces">Adding Traces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/debugability/logger/index.html">Logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/debugability/logger/index.html#logger-usage">Logger usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/debugability/coredump-reader/index.html">Coredump-reader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer_guides/debugability/coredump-reader/index.html#coredump-reader-usage">Coredump-reader usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/tuning/sof-ctl.html">Runtime Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tuning/sof-ctl.html#find-out-effect-numids">Find out effect numids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tuning/sof-ctl.html#example-equalizer-settings">Example equalizer settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tuning/sof-ctl.html#help">Help</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guides/index.html#technical-notes">Technical Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/tech/build-cmocka.html">Build Cmocka for Xtensa</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tech/build-cmocka.html#cmocka-fork">Cmocka fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tech/build-cmocka.html#simple-build-on-linux">Simple build on Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tech/build-cmocka.html#cross-platform-build">Cross-platform build</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_guides/tech/compile_wsl.html">Build on Windows 10 with WSL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tech/compile_wsl.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tech/compile_wsl.html#enable-32-bit-binaries">Enable 32-bit binaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tech/compile_wsl.html#fix-stat-in-32-bit-binaries">Fix stat in 32-bit binaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer_guides/tech/compile_wsl.html#compile">Compile</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../release.html#firmware-and-tools">Firmware and Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release.html#git">Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release.html#source-and-binary-releases">Source and Binary Releases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release.html#linux-driver">Linux Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributing to the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/contribute_guidelines.html#dco-sign-off-methods">DCO Sign-Off Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/contribute_guidelines.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#headings">Headings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#multi-column-lists">Multi-column lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#file-names-and-commands">File names and Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/doc_guidelines.html#tabs-spaces-and-indenting">Tabs, spaces, and indenting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/dox-source-code.html">Documenting the Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/dox-source-code.html#basic-rules">Basic Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/dox-source-code.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/process/bug-tracking.html">Bug Tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#life-cycle-of-a-bug">Life Cycle of a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#labels">Labels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#solution-labels">Solution Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#priority-labels">Priority Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#plaform-and-branch-labels">Plaform and Branch Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../contribute/process/bug-tracking.html#other-optional-labels">Other optional Labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#how-to-report-a-bug">How to Report a Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/bug-tracking.html#how-to-close-a-bug">How to Close a Bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/process/docbuild.html">SOF Documentation Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#documentation-overview">Documentation overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#set-up-documentation-working-folders">Set up documentation working folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#install-documentation-tools">Install documentation tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#documentation-presentation-theme">Documentation presentation theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#run-documentation-processors">Run documentation processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#publish-content">Publish content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#installation-troubleshooting">Installation troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/process/docbuild.html#diagram-compilation-troubleshooting">Diagram compilation troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/dma-drivers-api.html">DMA Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/dai-drivers-api.html">DAI Drivers API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/platform-api.html">Platform API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/component-api.html">Component API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/uapi.html">uAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../presentations/index.html">Presentations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../presentations/index.html#sof-mentions">SOF Mentions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SOF Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Getting Started Guides</a> &raquo;</li>
        
      <li>Build SOF from scratch</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="build-sof-from-scratch">
<span id="build-from-scratch"></span><h1>Build SOF from scratch<a class="headerlink" href="#build-sof-from-scratch" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#build-sof-binaries" id="id4">Build SOF binaries</a><ul>
<li><a class="reference internal" href="#set-up-build-environment" id="id5">Set up build environment</a><ul>
<li><a class="reference internal" href="#install-cmake" id="id6">Install CMake</a></li>
<li><a class="reference internal" href="#build-alsa-lib-and-alsa-utils" id="id7">Build alsa-lib and alsa-utils</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-toolchain-from-source" id="id8">Build toolchain from source</a><ul>
<li><a class="reference internal" href="#build-cross-compiler" id="id9">Build cross-compiler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-firmware-binaries" id="id10">Build firmware binaries</a><ul>
<li><a class="reference internal" href="#build-with-scripts" id="id11">Build with scripts</a></li>
<li><a class="reference internal" href="#build-with-commands" id="id12">Build with commands</a></li>
<li><a class="reference internal" href="#firmware-build-results" id="id13">Firmware build results</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-topology-and-tools" id="id14">Build topology and tools</a><ul>
<li><a class="reference internal" href="#id1" id="id15">Build with scripts</a></li>
<li><a class="reference internal" href="#id2" id="id16">Build with commands</a></li>
<li><a class="reference internal" href="#topology-and-tools-build-results" id="id17">Topology and tools build results</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#build-linux-kernel" id="id18">Build Linux kernel</a></li>
</ul>
</div>
<p>You may boot and test Sound Open Firmware on a target machine or VM. Current target
Intel platforms include: Bay Trail, Cherry Trail, Haswell, Broadwell, Apollo Lake and Cannon Lake.</p>
<p>There is also support for NXP i.MX8 platform.</p>
<div class="section" id="build-sof-binaries">
<h2><a class="toc-backref" href="#id4">Build SOF binaries</a><a class="headerlink" href="#build-sof-binaries" title="Permalink to this headline">¶</a></h2>
<p>The following steps describe how to install the sof development environment
on Ubuntu 16.04, 18.04, and 18.10.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The code examples assume ~/work/sof/ as the working directory, and
all git repos should be added to this directory.</p>
</div>
<div class="section" id="set-up-build-environment">
<h3><a class="toc-backref" href="#id5">Set up build environment</a><a class="headerlink" href="#set-up-build-environment" title="Permalink to this headline">¶</a></h3>
<p>Install package dependencies.</p>
<ul>
<li><p class="first">For Ubuntu 18.10:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install libgtk-3-dev libsdl1.2-dev libspice-protocol-dev <span class="se">\</span>
   libspice-server-dev libusb-1.0-0-dev libusbredirhost-dev libtool-bin <span class="se">\</span>
   acpica-tools valgrind texinfo virt-manager qemu-kvm <span class="se">\</span>
   libvirt-daemon-system libvirt-clients virtinst libfdt-dev libssl-dev <span class="se">\</span>
   pkg-config help2man gawk libncurses5 libncurses5-dev
</pre></div>
</div>
</li>
<li><p class="first">For Ubuntu 16.04 and 18.04:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install libgtk-3-dev libsdl1.2-dev libspice-protocol-dev <span class="se">\</span>
   libspice-server-dev libusb-1.0-0-dev libusbredirhost-dev libtool-bin <span class="se">\</span>
   iasl valgrind texinfo virt-manager qemu-kvm libvirt-bin virtinst <span class="se">\</span>
   libfdt-dev libssl-dev pkg-config help2man gawk libncurses5 <span class="se">\</span>
   libncurses5-dev
</pre></div>
</div>
</li>
</ul>
<p>If you are using Ubuntu 16.04, the gcc version must be updated to gcc 7.3+
for the Advanced Linux Sound Architecture (ALSA) to build.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo add-apt-repository ppa:ubuntu-toolchain-r/test
sudo apt-get update
sudo apt-get install gcc-7 g++-7
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 <span class="m">70</span> --slave /usr/bin/g++ g++ /usr/bin/g++-7
</pre></div>
</div>
<div class="section" id="install-cmake">
<h4><a class="toc-backref" href="#id6">Install CMake</a><a class="headerlink" href="#install-cmake" title="Permalink to this headline">¶</a></h4>
<p>If you use Ubuntu 18.04+ you can install CMake with apt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install cmake
</pre></div>
</div>
<p>On Ubuntu 16.04, CMake from apt is outdated and you have to install CMake from sources.</p>
<p>You can do this by following this short guide: <a class="reference external" href="https://cmake.org/install/">https://cmake.org/install/</a></p>
</div>
<div class="section" id="build-alsa-lib-and-alsa-utils">
<h4><a class="toc-backref" href="#id7">Build alsa-lib and alsa-utils</a><a class="headerlink" href="#build-alsa-lib-and-alsa-utils" title="Permalink to this headline">¶</a></h4>
<p>This project requires some new features in alsa-lib and alsa-utils, so build
the newest ALSA from source code.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/
git clone git://git.alsa-project.org/alsa-lib.git
<span class="nb">cd</span> alsa-lib
./gitcompile
sudo make install
</pre></div>
</div>
<p>(Optional) To enable alsabat’s frequency analysis, FFT library should be installed before configuring alsa-utils.
.. code-block:: bash</p>
<blockquote>
<div>sudo apt-get install libfftw3-dev libfftw3-doc</div></blockquote>
<p>Clone, build, and install alsa-utils.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/
git clone git://git.alsa-project.org/alsa-utils.git
<span class="nb">cd</span> alsa-utils
./gitcompile
sudo make install
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If gitcompile script doesn’t work, refer to INSTALL file for manual build instruction.</p>
</div>
</div>
</div>
<div class="section" id="build-toolchain-from-source">
<h3><a class="toc-backref" href="#id8">Build toolchain from source</a><a class="headerlink" href="#build-toolchain-from-source" title="Permalink to this headline">¶</a></h3>
<div class="section" id="build-cross-compiler">
<h4><a class="toc-backref" href="#id9">Build cross-compiler</a><a class="headerlink" href="#build-cross-compiler" title="Permalink to this headline">¶</a></h4>
<p>Build the xtensa cross compiler with crosstool-ng for Intel Bay Trail,
Cherry Trail, Haswell, Broadwell, Apollo Lake, Cannon Lake platforms and NXP i.MX8 platform.</p>
<p>Clone both repos and check out the sof-gcc8.1 branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/
git clone https://github.com/thesofproject/xtensa-overlay.git
<span class="nb">cd</span> xtensa-overlay
git checkout sof-gcc8.1
<span class="nb">cd</span> ~/work/sof/
git clone https://github.com/thesofproject/crosstool-ng.git
<span class="nb">cd</span> crosstool-ng
git checkout sof-gcc8.1
</pre></div>
</div>
<p>Build and install the ct-ng tools in the local folder.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./bootstrap
./configure --prefix<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
make
make install
</pre></div>
</div>
<p>Copy the config files to .config and build the cross compiler
for your target platforms.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#Baytrail/Cherrytrail</span>
cp config-byt-gcc8.1-gdb8.1 .config
./ct-ng build
<span class="c1">#Haswell/Broadwell</span>
cp config-hsw-gcc8.1-gdb8.1 .config
./ct-ng build
<span class="c1">#Apollo Lake</span>
cp config-apl-gcc8.1-gdb8.1 .config
./ct-ng build
<span class="c1">#Cannon Lake</span>
cp config-cnl-gcc8.1-gdb8.1 .config
./ct-ng build
<span class="c1">#i.MX8</span>
cp config-imx-gcc8.1-gdb8.1 .config
./ct-ng build
</pre></div>
</div>
<p>Update an environment variable to refer to the alsa-lib with the one we’ve just built.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>~/work/sof/alsa-lib/src/.libs:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></div>
</div>
<p>Copy all four cross-compiler toolchains to ~/work/sof/.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls builds/
<span class="c1">#xtensa-apl-elf          xtensa-byt-elf          xtensa-cnl-elf          xtensa-hsw-elf          xtensa-imx-elf</span>
cp -r builds/* ~/work/sof/
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last line-block">
<div class="line">Haswell and Broadwell share the same cross compiler toolchain: xtensa-hsw-elf</div>
<div class="line">Bay Trail and Cherry Trail also share the same cross compiler toolchain: xtensa-byt-elf</div>
</div>
</div>
<p>Add these compilers to your PATH variable.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/work/sof/xtensa-byt-elf/bin/:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/work/sof/xtensa-hsw-elf/bin/:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/work/sof/xtensa-apl-elf/bin/:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/work/sof/xtensa-cnl-elf/bin/:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/work/sof/xtensa-imx-elf/bin/:<span class="nv">$PATH</span>
</pre></div>
</div>
<p>Clone the header repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/
git clone https://github.com/jcmvbkbc/newlib-xtensa.git
<span class="nb">cd</span> newlib-xtensa
git checkout -b xtensa origin/xtensa
</pre></div>
</div>
<p>Build and install the headers for each platform.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#Baytrail/Cherrytrail</span>
./configure --target<span class="o">=</span>xtensa-byt-elf --prefix<span class="o">=</span>/home/<span class="nv">$USER</span>/work/sof/xtensa-root
make
make install
rm -fr rm etc/config.cache
<span class="c1">#Haswell/Broadwell</span>
./configure --target<span class="o">=</span>xtensa-hsw-elf --prefix<span class="o">=</span>/home/<span class="nv">$USER</span>/work/sof/xtensa-root
make
make install
rm -fr rm etc/config.cache
<span class="c1">#Apollo Lake</span>
./configure --target<span class="o">=</span>xtensa-apl-elf --prefix<span class="o">=</span>/home/<span class="nv">$USER</span>/work/sof/xtensa-root
make
make install
rm -fr rm etc/config.cache
<span class="c1">#Cannon Lake</span>
./configure --target<span class="o">=</span>xtensa-cnl-elf --prefix<span class="o">=</span>/home/<span class="nv">$USER</span>/work/sof/xtensa-root
make
make install
rm -fr rm etc/config.cache
<span class="c1">#i.MX8</span>
./configure --target<span class="o">=</span>xtensa-imx-elf --prefix<span class="o">=</span>/home/<span class="nv">$USER</span>/work/sof/xtensa-root
make
make install
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">–prefix expects the absolute PATH. Change the path according to your environment.</p>
</div>
<p>The required headers are now in ~/work/sof/xtensa-root, and we have set up a
cross compiler toolchain for xtensa DSPs.</p>
</div>
</div>
<div class="section" id="build-firmware-binaries">
<h3><a class="toc-backref" href="#id10">Build firmware binaries</a><a class="headerlink" href="#build-firmware-binaries" title="Permalink to this headline">¶</a></h3>
<p>After the SOF environment is set up, we can clone the <em>sof</em> repo.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/
git clone https://github.com/thesofproject/sof.git
</pre></div>
</div>
<div class="section" id="build-with-scripts">
<h4><a class="toc-backref" href="#id11">Build with scripts</a><a class="headerlink" href="#build-with-scripts" title="Permalink to this headline">¶</a></h4>
<p>To build Sound Open Firmware quickly, use the built-in scripts after setting up the
environment.</p>
<p>Build firmware of all platforms.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/sof/
./scripts/xtensa-build-all.sh -a
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This script will only work if the PATH includes both crosscompiler and
xtensa-root and they are siblings of the sof repo.</p>
</div>
<p>You may specify one or more of the following platform arguments:
<code class="docutils literal notranslate"><span class="pre">byt</span></code>, <code class="docutils literal notranslate"><span class="pre">cht</span></code>, <code class="docutils literal notranslate"><span class="pre">hsw</span></code>, <code class="docutils literal notranslate"><span class="pre">bdw</span></code>, <code class="docutils literal notranslate"><span class="pre">apl</span></code>, and <code class="docutils literal notranslate"><span class="pre">cnl</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./scripts/xtensa-build-all.sh byt
./scripts/xtensa-build-all.sh byt apl
</pre></div>
</div>
<p>You can also enable debug build with -d, enable rom build with -r and speed up build with -j [n]</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./scripts/xtensa-build-all.sh -d byt
./scripts/xtensa-build-all.sh -d -r apl
./scripts/xtensa-build-all.sh -d -r -j <span class="m">4</span> apl
</pre></div>
</div>
</div>
<div class="section" id="build-with-commands">
<h4><a class="toc-backref" href="#id12">Build with commands</a><a class="headerlink" href="#build-with-commands" title="Permalink to this headline">¶</a></h4>
<p>This is a detailed build guide for the <em>sof</em> repo.</p>
<p>Snippets below assume that your working directory is repo’s root (~/work/sof/sof/).</p>
<p>CMake is designed for out-of-tree builds which is why you should make separate dirs for your configurations.</p>
<p>You can manage builds for many configurations/platforms from the one source this way.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <em>-j</em> argument indicates the number of cores to use in the build
process. Select a value that matches your build system.</p>
</div>
<p>for Bay Trail:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_byt <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_byt
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-byt-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-byt-elf ..
make baytrail_defconfig
make bin -j4
</pre></div>
</div>
<p>for Cherry Trail:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_cht <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_cht
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-byt-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-byt-elf ..
make cherrytrail_defconfig
make bin -j4
</pre></div>
</div>
<p>for Haswell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_hsw <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_hsw
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-hsw-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-hsw-elf ..
make haswell_defconfig
make bin -j4
</pre></div>
</div>
<p>for Broadwell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_bdw <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_bdw
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-hsw-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-hsw-elf ..
make broadwell_defconfig
make bin -j4
</pre></div>
</div>
<p>for Apollo Lake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_apl <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_apl
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-apl-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-apl-elf ..
make apollolake_defconfig
make bin -j4
</pre></div>
</div>
<p>for Cannon Lake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_cnl <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_cnl
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-cnl-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-cnl-elf ..
make cannonlake_defconfig
make bin -j4
</pre></div>
</div>
<p>for i.MX8:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_imx <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_imx
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-imx-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-imx-elf ..
make imx8_defconfig
make bin -j4
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last line-block">
<div class="line">After ‘make *_defconfig’ step, you can customize your build with ‘make menuconfig’.</div>
<div class="line">There are DEBUG and ROM options for the FW binary build, you can enable them with ‘make menuconfig’.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build_cnl_custom <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_cnl_custom
cmake -DTOOLCHAIN<span class="o">=</span>xtensa-cnl-elf -DROOT_DIR<span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../../xtensa-root/xtensa-cnl-elf ..
make cannonlake_defconfig
make menuconfig <span class="c1"># select/deselect options and save</span>
make bin -j4
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have <a class="reference external" href="https://ninja-build.org/">Ninja</a> installed you can use it instead of Make. Just type <em>cmake -GNinja …</em> while doing configuration step.</p>
</div>
</div>
<div class="section" id="firmware-build-results">
<h4><a class="toc-backref" href="#id13">Firmware build results</a><a class="headerlink" href="#firmware-build-results" title="Permalink to this headline">¶</a></h4>
<p>The firmware binary files are located in build_&lt;platform&gt;/src/arch/xtensa/. Copy them to
your target machine’s /lib/firmware/intel/sof folder.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sof-apl.ri  sof-bdw.ri  sof-byt.ri  sof-cht.ri  sof-cnl.ri  sof-hsw.ri
</pre></div>
</div>
</div>
</div>
<div class="section" id="build-topology-and-tools">
<h3><a class="toc-backref" href="#id14">Build topology and tools</a><a class="headerlink" href="#build-topology-and-tools" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id15">Build with scripts</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/sof/
./scripts/build-tools.sh
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id16">Build with commands</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/work/sof/sof/tools/
mkdir build_tools <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build_tools
cmake ..
make -j4
</pre></div>
</div>
</div>
<div class="section" id="topology-and-tools-build-results">
<h4><a class="toc-backref" href="#id17">Topology and tools build results</a><a class="headerlink" href="#topology-and-tools-build-results" title="Permalink to this headline">¶</a></h4>
<p>The topology files are located in the <em>tools/build_tools/topology</em> folder. Copy them to the target
machine’s /lib/firmware/intel/sof-tplg folder.</p>
<p>The <em>sof-logger</em> tool is in the <em>tools/build_tools/logger</em> folder. Copy it to the target machine’s
/usr/bin directory.</p>
</div>
</div>
</div>
<div class="section" id="build-linux-kernel">
<span id="id3"></span><h2><a class="toc-backref" href="#id18">Build Linux kernel</a><a class="headerlink" href="#build-linux-kernel" title="Permalink to this headline">¶</a></h2>
<p>Sound Open Firmware uses the Linux kernel dev branch, and we need it to work with other
dev branch firmware and topology.</p>
<ol class="arabic">
<li><p class="first">Build the kernel with this branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install bison flex libelf-dev
<span class="nb">cd</span> ~/work/sof/
git clone https://github.com/thesofproject/linux.git
<span class="nb">cd</span> linux
git checkout topic/sof-dev
make defconfig
git clone https://github.com/thesofproject/kconfig
scripts/kconfig/merge_config.sh .config ./kconfig/base-defconfig ./kconfig/sof-defconfig  ./kconfig/sof-mach-driver-defconfig ./kconfig/hdaudio-codecs-defconfig
<span class="o">(</span>optional<span class="o">)</span> make menuconfig
</pre></div>
</div>
<p>Select SOF driver support and disable SST drivers.</p>
</li>
<li><p class="first">Make the kernel deb package to install on the target machine.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make deb-pkg -j <span class="m">4</span>
</pre></div>
</div>
</li>
<li><p class="first">Copy the three resulting <em>.deb</em> files to the target machine and install them.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dpkg -i /absolute/path/to/deb/file
sudo apt-get install -f
</pre></div>
</div>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, SOF Project
      <span class="lastupdated">
        Last updated on Aug 16, 2019.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>